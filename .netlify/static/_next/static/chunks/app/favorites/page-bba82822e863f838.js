(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4040],{7283:(e,s,t)=>{"use strict";t.d(s,{u:()=>a});class r{async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(this.baseUrl).concat(e),r=await fetch(t,{...s,credentials:"include",headers:{"Content-Type":"application/json",...s.headers}});if(!r.ok)throw Error((await r.json().catch(()=>({error:"Network error"}))).error||"HTTP ".concat(r.status));return r.json()}async getFolders(){return this.request("/folders")}async createFolder(e){return this.request("/folders",{method:"POST",body:JSON.stringify(e)})}async updateFolder(e,s){return this.request("/folders",{method:"PUT",body:JSON.stringify({id:e,...s})})}async deleteFolder(e){return this.request("/folders",{method:"DELETE",body:JSON.stringify({id:e})})}async getTags(){return this.request("/tags")}async createTag(e){return this.request("/tags",{method:"POST",body:JSON.stringify(e)})}async getBookmarks(){return this.request("/bookmarks")}async searchBookmarks(e,s){let t=new URLSearchParams({q:e});return(null==s?void 0:s.filters)&&Object.entries(s.filters).forEach(e=>{let[s,r]=e;null!=r&&t.append(s,String(r))}),this.request("/bookmarks/search?".concat(t))}async createBookmark(e){return this.request("/bookmarks",{method:"POST",body:JSON.stringify(e)})}async updateBookmark(e,s){return this.request("/bookmarks",{method:"PUT",body:JSON.stringify({id:e,...s})})}async ensureUserProfile(e,s){return this.request("/profile",{method:"POST",body:JSON.stringify({email:e,fullName:s})})}constructor(){this.baseUrl="/api"}}let a=new r},35695:(e,s,t)=>{"use strict";var r=t(18999);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSelectedLayoutSegments")&&t.d(s,{useSelectedLayoutSegments:function(){return r.useSelectedLayoutSegments}})},47739:(e,s,t)=>{Promise.resolve().then(t.bind(t,56976))},56976:(e,s,t)=>{"use strict";t.d(s,{FavoritesPage:()=>v});var r=t(95155),a=t(12115),i=t(61976),l=t(7283),o=t(7885),n=t(41737),c=t(30285),d=t(62523),u=t(51976),h=t(35169),m=t(47924),g=t(54653),x=t(15968),y=t(19946);let f=(0,y.A)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),k=(0,y.A)("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);var b=t(69074),p=t(35695),j=t(56671),N=t(36383);function v(e){let{userId:s}=e,t=(0,p.useRouter)(),[y,v]=(0,a.useState)([]),[w,S]=(0,a.useState)([]),[P,C]=(0,a.useState)([]),[O,q]=(0,a.useState)([]),[T,F]=(0,a.useState)(!0),[A,E]=(0,a.useState)(""),[L,B]=(0,a.useState)("grid"),[U,_]=(0,a.useState)(null),[J,$]=(0,a.useState)(!1);(0,a.useEffect)(()=>{z()},[s]);let z=async()=>{try{F(!0);let[e,s,t]=await Promise.all([l.u.getBookmarks(),l.u.getFolders(),l.u.getTags()]),r=e.filter(e=>e.is_favorite);v(r),S(s),C(t)}catch(e){console.error("Failed to load favorites:",e),j.oR.error("Failed to load favorites")}finally{F(!1)}},R=(0,a.useCallback)(()=>{let e=[...y];if(A){let s=A.toLowerCase();e=e.filter(e=>{var t,r;return e.title.toLowerCase().includes(s)||e.url.toLowerCase().includes(s)||(null==(t=e.description)?void 0:t.toLowerCase().includes(s))||(null==(r=e.tags)?void 0:r.some(e=>e.name.toLowerCase().includes(s)))})}q(e)},[y,A]);(0,a.useEffect)(()=>{R()},[y,A,R]);let D=e=>{v(s=>s.map(s=>s.id===e.id?e:s)),e.is_favorite||v(s=>s.filter(s=>s.id!==e.id)),_(e)},H=e=>{v(s=>s.filter(s=>s.id!==e)),$(!1),_(null)},M=e=>{_(e),$(!0)};return T?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,r.jsx)(N.W,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>t.push("/dashboard"),className:"flex items-center space-x-2",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Back to Dashboard"})]}),(0,r.jsx)("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.A,{className:"h-6 w-6 text-red-500"}),(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Favorites (",y.length,")"]})]})]}),(0,r.jsx)(i.uF,{afterSignOutUrl:"/"})]})}),(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,r.jsx)(d.p,{placeholder:"Search favorites...",value:A,onChange:e=>E(e.target.value),className:"pl-10 w-80"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:[(0,r.jsx)(c.$,{variant:"grid"===L?"default":"ghost",size:"sm",onClick:()=>B("grid"),className:"px-3",children:(0,r.jsx)(g.A,{className:"h-4 w-4"})}),(0,r.jsx)(c.$,{variant:"list"===L?"default":"ghost",size:"sm",onClick:()=>B("list"),className:"px-3",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})}),(0,r.jsx)(c.$,{variant:"compact"===L?"default":"ghost",size:"sm",onClick:()=>B("compact"),className:"px-3",children:(0,r.jsx)(f,{className:"h-4 w-4"})}),(0,r.jsx)(c.$,{variant:"kanban"===L?"default":"ghost",size:"sm",onClick:()=>B("kanban"),className:"px-3",children:(0,r.jsx)(k,{className:"h-4 w-4"})}),(0,r.jsx)(c.$,{variant:"timeline"===L?"default":"ghost",size:"sm",onClick:()=>B("timeline"),className:"px-3",children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})]})]})}),(0,r.jsx)("main",{className:"p-6",children:0===O.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(u.A,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No favorites yet"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Bookmarks you mark as favorites will appear here"}),(0,r.jsxs)(c.$,{onClick:()=>t.push("/dashboard"),children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]}):(0,r.jsx)("div",{className:"grid gap-6 ".concat({grid:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",list:"grid-cols-1",compact:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6",kanban:"grid-cols-1 md:grid-cols-3",timeline:"grid-cols-1"}[L]),children:O.map(e=>{let s=y.reduce((e,s)=>e+(s.visit_count||0),0);return(0,r.jsx)(o.P,{bookmark:e,folders:w,onUpdated:D,onDeleted:()=>H(e.id),onOpenDetail:()=>M(e),totalBookmarkVisits:s},e.id)})})}),(0,r.jsx)(n.F,{bookmark:U,folders:w,tags:P,isOpen:J,onClose:()=>{$(!1),_(null)},onUpdated:D})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[5004,277,7598,7471,1976,941,9046,3877,6766,9824,2058,5076,530,4765,8441,1684,7358],()=>s(47739)),_N_E=e.O()}]);