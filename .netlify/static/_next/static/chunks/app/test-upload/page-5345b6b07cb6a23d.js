(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7807],{2787:(e,t,r)=>{Promise.resolve().then(r.bind(r,54196))},27213:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var a=r(95155),s=r(12115),l=r(99708),n=r(74466),o=r(59434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:i=!1,...c}=e,u=i?l.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(d({variant:s,size:n,className:r})),ref:t,...c})});i.displayName="Button"},54196:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(95155),s=r(12115),l=r(6874),n=r.n(l),o=r(30285),d=r(56671),i=r(59434),c=r(54416),u=r(27213),m=r(66766);function g(e){let{onImageUploaded:t,onImageRemoved:r,existingImageUrl:l,disabled:n=!1,className:g,bucket:h="bookmark-images",path:p="uploads",acceptedTypes:x=["image/jpeg","image/png","image/gif","image/webp"],maxSizeInMB:b=5,preview:f=!0}=e,[v,y]=(0,s.useState)(!1),[k,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(l||null),[U,R]=(0,s.useState)(null),I=(0,s.useRef)(null),D=e=>x.includes(e.type)?e.size>1024*b*1024?"File size must be less than ".concat(b,"MB"):null:"File type not supported. Please use: ".concat(x.map(e=>e.split("/")[1]).join(", ")),A=async e=>{let t=e.name.split(".").pop(),r="".concat(Math.random().toString(36).substring(2),"-").concat(Date.now(),".").concat(t),a="".concat(p,"/").concat(r),s=new FormData;s.append("file",e),s.append("bucket",h),s.append("path",a);let l=await fetch("/api/upload",{method:"POST",body:s});if(!l.ok)throw Error((await l.json()).error||"Upload failed");let{url:n}=await l.json();return n},C=async e=>{R(null);let r=D(e);if(r){R(r),d.oR.error(r);return}y(!0);try{if(f){let t=URL.createObjectURL(e);N(t)}let r=await A(e);t(r),d.oR.success("Image uploaded successfully")}catch(t){console.error("Upload error:",t);let e=t instanceof Error?t.message:"Upload failed";R(e),d.oR.error(e),N(l||null)}finally{y(!1)}},S=(0,s.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),j(!1),n||v)return;let t=Array.from(e.dataTransfer.files);t.length>0&&C(t[0])},[n,v,C]),_=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),n||v||j(!0)},[n,v]),z=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),j(!1)},[]);return(0,a.jsxs)("div",{className:(0,i.cn)("w-full",g),children:[(0,a.jsx)("input",{ref:I,type:"file",accept:x.join(","),onChange:e=>{let t=e.target.files;t&&t.length>0&&C(t[0])},className:"hidden",disabled:n||v}),w?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"relative w-full h-48 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)(m.default,{src:w,alt:"Preview",className:"w-full h-full object-cover",width:192,height:192,onError:()=>{N(null),R("Failed to load image")}}),v&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-sm",children:"Uploading..."})})]}),!n&&(0,a.jsx)(o.$,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{N(null),R(null),I.current&&(I.current.value=""),null==r||r(),d.oR.success("Image removed")},disabled:v,children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})]}):(0,a.jsx)("div",{onDrop:S,onDragOver:_,onDragLeave:z,onClick:()=>{n||v||!I.current||I.current.click()},className:(0,i.cn)("relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors",k?"border-blue-500 bg-blue-50 dark:bg-blue-950":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500",n&&"opacity-50 cursor-not-allowed",U&&"border-red-300 dark:border-red-600"),children:(0,a.jsx)("div",{className:"flex flex-col items-center justify-center space-y-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Uploading..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-10 w-10 text-gray-400 dark:text-gray-500"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsx)("p",{className:"font-medium",children:k?"Drop image here":"Click to upload or drag and drop"}),(0,a.jsxs)("p",{className:"text-xs mt-1",children:[x.map(e=>e.split("/")[1]).join(", ")," up to ",b,"MB"]})]})]})})}),U&&(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-2 text-sm text-red-600 dark:text-red-400",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:U})]})]})}function h(){let[e,t]=(0,s.useState)("");return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center",children:"Image Upload Test"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload an Image"}),(0,a.jsx)(g,{onImageUploaded:e=>{t(e),console.log("Image uploaded:",e)},onImageRemoved:()=>{t(""),console.log("Image removed")},existingImageUrl:e,bucket:"bookmark-images",path:"test-uploads",maxSizeInMB:2})]}),e&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Uploaded Image URL:"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 p-2 rounded break-all",children:e})]}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)(n(),{href:"/",className:"text-blue-600 hover:text-blue-800 underline",children:"← Back to Home"})})]})]})})}},54416:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},59434:(e,t,r)=>{"use strict";r.d(t,{S:()=>n,cn:()=>l,q:()=>o});var a=r(52596),s=r(39688);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}let n=e=>{try{return new URL(e).hostname.replace("www.","")}catch(e){return"unknown"}},o=e=>{try{let t=new URL(e).hostname;return"https://www.google.com/s2/favicons?domain=".concat(t,"&sz=32")}catch(e){return null}}}},e=>{var t=t=>e(e.s=t);e.O(0,[7598,7471,6766,6874,8441,1684,7358],()=>t(2787)),_N_E=e.O()}]);