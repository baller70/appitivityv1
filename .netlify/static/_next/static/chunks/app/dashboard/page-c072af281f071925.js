(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{7283:(e,a,r)=>{"use strict";r.d(a,{u:()=>t});class s{async request(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s=await fetch(r,{...a,credentials:"include",headers:{"Content-Type":"application/json",...a.headers}});if(!s.ok)throw Error((await s.json().catch(()=>({error:"Network error"}))).error||"HTTP ".concat(s.status));return s.json()}async getFolders(){return this.request("/folders")}async createFolder(e){return this.request("/folders",{method:"POST",body:JSON.stringify(e)})}async updateFolder(e,a){return this.request("/folders",{method:"PUT",body:JSON.stringify({id:e,...a})})}async deleteFolder(e){return this.request("/folders",{method:"DELETE",body:JSON.stringify({id:e})})}async getTags(){return this.request("/tags")}async createTag(e){return this.request("/tags",{method:"POST",body:JSON.stringify(e)})}async getBookmarks(){return this.request("/bookmarks")}async searchBookmarks(e,a){let r=new URLSearchParams({q:e});return(null==a?void 0:a.filters)&&Object.entries(a.filters).forEach(e=>{let[a,s]=e;null!=s&&r.append(a,String(s))}),this.request("/bookmarks/search?".concat(r))}async createBookmark(e){return this.request("/bookmarks",{method:"POST",body:JSON.stringify(e)})}async updateBookmark(e,a){return this.request("/bookmarks",{method:"PUT",body:JSON.stringify({id:e,...a})})}async ensureUserProfile(e,a){return this.request("/profile",{method:"POST",body:JSON.stringify({email:e,fullName:a})})}constructor(){this.baseUrl="/api"}}let t=new s},10728:(e,a,r)=>{"use strict";r.d(a,{BookmarkHubDashboard:()=>a_});var s=r(95155),t=r(12115),l=r(6874),i=r.n(l),n=r(61976),o=r(30285),d=r(7885),c=r(54165),m=r(7283),x=r(21380),h=r(33786),g=r(51976),u=r(85339),p=r(74783),f=r(72713),b=r(38564),j=r(381),y=r(47924),v=r(54653),k=r(15968),N=r(40301),w=r(13846),C=r(69074),A=r(84616),S=r(19145),T=r(29869),F=r(75525),_=r(26126),E=r(40646),D=r(54861),L=r(1243),I=r(53904),B=r(14186);class O{async validateBookmark(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timeout:r=this.DEFAULT_TIMEOUT}=a;try{let a=new AbortController,s=setTimeout(()=>a.abort(),r),t=await fetch(e,{method:"HEAD",signal:a.signal,mode:"no-cors",cache:"no-cache"});return clearTimeout(s),{id:"",url:e,isValid:t.ok,statusCode:t.status,lastChecked:new Date().toISOString()}}catch(a){try{let a=new AbortController,s=setTimeout(()=>a.abort(),r/2),t=await fetch(e,{method:"GET",signal:a.signal,mode:"no-cors",cache:"no-cache"});return clearTimeout(s),{id:"",url:e,isValid:t.ok,statusCode:t.status,lastChecked:new Date().toISOString()}}catch(a){return{id:"",url:e,isValid:!1,error:"Unexpected validation error",lastChecked:new Date().toISOString()}}}}async validateBookmarks(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{batchSize:r=this.DEFAULT_BATCH_SIZE}=a,s=[];for(let t=0;t<e.length;t+=r){let l=e.slice(t,t+r).map(async e=>({...await this.validateBookmark(e.url,a),id:e.id}));(await Promise.allSettled(l)).forEach(e=>{"fulfilled"===e.status?s.push(e.value):console.error("Validation failed:",e.reason)}),t+r<e.length&&await new Promise(e=>setTimeout(e,1e3))}return s}async scheduleValidation(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,r=new Date,s=24*a*36e5;return e.map(e=>{let a=new Date(e.last_validated?e.last_validated:0),t=r.getTime()-a.getTime()>s;return{id:e.id,needsValidation:t}})}createValidationNotification(e){let a=e.filter(e=>!e.isValid),r=a.length,s="";return s=0===r?"✅ All bookmarks are accessible!":1===r?"⚠️ 1 bookmark appears to be broken or inaccessible":"⚠️ ".concat(r," bookmarks appear to be broken or inaccessible"),{invalidCount:r,message:s,details:a}}getValidationSuggestions(e){let a=[];if(!e.isValid){var r,s;404===e.statusCode?(a.push("The page was not found (404). The content may have been moved or deleted."),a.push("Try searching for the content on the website or using an archive service.")):403===e.statusCode?a.push("Access is forbidden (403). The site may require authentication."):500===e.statusCode?a.push("The server is experiencing issues (500). Try again later."):(null==(r=e.error)?void 0:r.includes("timeout"))?a.push("The request timed out. The site may be slow or temporarily unavailable."):(null==(s=e.error)?void 0:s.includes("network"))?a.push("Network error. Check your internet connection."):a.push("The bookmark appears to be inaccessible. Try opening it manually."),a.push("Consider updating the URL or removing the bookmark if it's permanently broken.")}return a}constructor(){this.DEFAULT_TIMEOUT=1e4,this.DEFAULT_RETRY_COUNT=2,this.DEFAULT_BATCH_SIZE=10}}let R=new O,U=e=>{let{value:a,className:r}=e;return(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 ".concat(r),children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(100,Math.max(0,a)),"%")}})})};function z(e){let{bookmarks:a,trigger:r}=e,[l,i]=(0,t.useState)(!1),[d,m]=(0,t.useState)(!1),[x,g]=(0,t.useState)([]),[u,p]=(0,t.useState)(0),[f,b]=(0,t.useState)(0),{user:j}=(0,n.Jd)(),y=async()=>{if(j){m(!0),p(0),g([]),b(0);try{for(let e=0;e<a.length;e+=10){let r=a.slice(e,e+10);b(Math.floor(e/10)+1);let s=await R.validateBookmarks(r,{batchSize:10,timeout:8e3});g(e=>[...e,...s]),p((e+r.length)/a.length*100)}}catch(e){console.error("Validation failed:",e)}finally{m(!1)}}},v=e=>{let r=a.find(a=>a.id===e);return(null==r?void 0:r.title)||"Unknown Bookmark"},k=e=>e.isValid?(0,s.jsx)(E.A,{className:"h-5 w-5 text-green-500"}):404===e.statusCode?(0,s.jsx)(D.A,{className:"h-5 w-5 text-red-500"}):(0,s.jsx)(L.A,{className:"h-5 w-5 text-yellow-500"}),N=e=>{var a;if(e.isValid)return(0,s.jsx)(_.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Accessible"});if(404===e.statusCode)return(0,s.jsx)(_.E,{variant:"destructive",children:"Not Found (404)"});if(403===e.statusCode)return(0,s.jsx)(_.E,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Access Denied (403)"});if(500===e.statusCode)return(0,s.jsx)(_.E,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Server Error (500)"});if(null==(a=e.error)?void 0:a.includes("timeout"))return(0,s.jsx)(_.E,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Timeout"});else return(0,s.jsx)(_.E,{variant:"secondary",className:"bg-gray-100 text-gray-800",children:"Unreachable"})},w=x.filter(e=>e.isValid),C=x.filter(e=>!e.isValid),A=R.createValidationNotification(x);return(0,s.jsxs)(c.lG,{open:l,onOpenChange:i,children:[(0,s.jsx)(c.zM,{asChild:!0,children:r||(0,s.jsxs)(o.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Check Links"]})}),(0,s.jsxs)(c.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:"Bookmark Validation"}),(0,s.jsx)(c.rr,{children:"Check your bookmarks for broken links and accessibility issues"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:"Link Health Check"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Validate ",a.length," bookmark",1!==a.length?"s":""]})]}),(0,s.jsx)(o.$,{onClick:y,disabled:d||0===a.length,className:"min-w-[120px]",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Start Check"]})})]}),d&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{children:"Progress"}),(0,s.jsxs)("span",{children:["Batch ",f," • ",Math.round(u),"%"]})]}),(0,s.jsx)(U,{value:u,className:"w-full"})]})]}),x.length>0&&(0,s.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Validation Results"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:w.length}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Accessible"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:C.length}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Issues Found"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:x.length}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Total Checked"})]})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,s.jsx)("p",{className:"text-sm font-medium",children:A.message})})]}),x.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-medium",children:"Detailed Results"}),(0,s.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[...C,...w].map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[k(e),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium truncate",children:v(e.id)}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.url})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[N(e),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>window.open(e.url,"_blank"),children:(0,s.jsx)(h.A,{className:"h-4 w-4"})})]})]}),!e.isValid&&(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-yellow-800 mb-1",children:"Suggestions:"}),(0,s.jsx)("ul",{className:"text-xs text-yellow-700 space-y-1",children:R.getValidationSuggestions(e).map((e,a)=>(0,s.jsxs)("li",{children:["• ",e]},a))})]}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,s.jsx)(B.A,{className:"h-3 w-3 mr-1"}),"Checked: ",new Date(e.lastChecked).toLocaleString()]})]},e.id))})]}),0===a.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(F.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:"No bookmarks to validate"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Add some bookmarks first to check their validity."})]})]})]})]})}var $=r(36383),M=r(44838),P=r(59409),V=r(54416),J=r(18979),H=r(39022),G=r(5623),Y=r(43332),Z=r(91788),q=r(24357),W=r(62525),K=r(55604);class Q{async exportToJson(e){return JSON.stringify({version:"1.0",exportDate:new Date().toISOString(),bookmarks:e.map(e=>({title:e.title,url:e.url,description:e.description,tags:e.tags||[],folder:e.folder,created_at:e.created_at,is_favorited:e.is_favorite}))},null,2)}async exportToCsv(e){return[["Title","URL","Description","Tags","Folder","Created Date","Is Favorite"],...e.map(e=>{var a,r;return[e.title,e.url,e.description||"",(null==(a=e.tags)?void 0:a.map(e=>e.name).join(", "))||"",(null==(r=e.folder)?void 0:r.name)||"",e.created_at||"",e.is_favorite?"Yes":"No"]})].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")}async exportToHtml(e){let a=e.map(e=>'<DT><A HREF="'.concat(e.url,'">').concat(e.title,"</A>").concat(e.description?"\n<DD>".concat(e.description):"")).join("\n");return'<!DOCTYPE NETSCAPE-Bookmark-file-1>\n<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">\n<TITLE>Bookmarks</TITLE>\n<H1>Bookmarks</H1>\n<DL><p>\n'.concat(a,"\n</DL><p>")}async exportBookmarks(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e;switch(!r.includeTags&&(s=s.map(e=>({...e,tags:[]}))),!r.includeNotes&&(s=s.map(e=>({...e,description:""}))),!r.includeFolders&&(s=s.map(e=>({...e,folder:null}))),a){case"json":return this.exportToJson(s);case"csv":return this.exportToCsv(s);case"html":return this.exportToHtml(s);default:throw Error("Unsupported export format: ".concat(a))}}downloadFile(e,a,r){let s=new Blob([e],{type:r}),t=URL.createObjectURL(s),l=document.createElement("a");l.href=t,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)}async copyToClipboard(e){try{return await navigator.clipboard.writeText(e),!0}catch(e){return!1}}}var X=r(56671);function ee(e){let{bookmarks:a,folders:r,tags:l,userId:i,onUpdate:n}=e,{selectedCount:d,getSelectedItems:m,selectAll:h,deselectAll:u,exitSelectionMode:p,isSelectionMode:f}=(0,$.C)(),[b,j]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[k,N]=(0,t.useState)(!1),[w,C]=(0,t.useState)(!1),[A,T]=(0,t.useState)(""),[F,E]=(0,t.useState)([]),D=new K.U(i),L=m(a),I=async()=>{if(0!==L.length){j(!0);try{let e=L.map(e=>e.id),a=await fetch("/api/bookmarks?ids=".concat(e.join(",")),{method:"DELETE"});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to delete bookmarks")}p(),n(),X.oR.success("Successfully deleted ".concat(e.length," bookmark").concat(e.length>1?"s":""))}catch(a){console.error("Failed to delete bookmarks:",a);let e=a instanceof Error?a.message:"Unknown error occurred";X.oR.error("Failed to delete bookmarks: ".concat(e))}finally{j(!1),v(!1)}}},B=async e=>{if(0!==L.length){j(!0);try{let a=L.map(e=>e.id);for(let r of a){let a=await fetch("/api/bookmarks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,is_archived:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update bookmark")}}p(),n(),X.oR.success("Successfully ".concat(e?"archived":"unarchived"," ").concat(a.length," bookmark").concat(a.length>1?"s":""))}catch(a){console.error("Failed to update bookmarks:",a);let e=a instanceof Error?a.message:"Unknown error occurred";X.oR.error("Failed to update bookmarks: ".concat(e))}finally{j(!1)}}},O=async e=>{if(0!==L.length){j(!0);try{let a=L.map(e=>e.id);for(let r of a){let a=await fetch("/api/bookmarks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,is_favorite:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update bookmark")}}p(),n(),X.oR.success("Successfully ".concat(e?"added to":"removed from"," favorites for ").concat(a.length," bookmark").concat(a.length>1?"s":""))}catch(a){console.error("Failed to update bookmarks:",a);let e=a instanceof Error?a.message:"Unknown error occurred";X.oR.error("Failed to update bookmarks: ".concat(e))}finally{j(!1)}}},R=async()=>{if(0!==L.length){j(!0);try{var e;let a=L.map(e=>e.id),s="none"===A?null:A;for(let e of a){let a=await fetch("/api/bookmarks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,folder_id:s})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to update bookmark")}}p(),n();let t=s?(null==(e=r.find(e=>e.id===s))?void 0:e.name)||"Unknown folder":"No folder";X.oR.success("Successfully moved ".concat(a.length," bookmark").concat(a.length>1?"s":""," to ").concat(t))}catch(a){console.error("Failed to move bookmarks:",a);let e=a instanceof Error?a.message:"Unknown error occurred";X.oR.error("Failed to move bookmarks: ".concat(e))}finally{j(!1),N(!1),T("")}}},U=async()=>{if(0!==L.length){j(!0);try{for(let e of L)await D.removeTagsFromBookmark(e.id),F.length>0&&await D.addTagsToBookmark(e.id,F);p(),n()}catch(e){console.error("Failed to update tags:",e)}finally{j(!1),C(!1),E([])}}},z=async e=>{if(0!==L.length){j(!0);try{let a=L.map(e=>{var a,r;return{id:e.id,title:e.title,url:e.url,description:e.description||"",folder:(null==(a=e.folder)?void 0:a.name)||"Uncategorized",tags:(null==(r=e.tags)?void 0:r.map(e=>e.name).filter(Boolean).join(", "))||"",is_favorite:e.is_favorite,is_archived:e.is_archived,created_at:e.created_at,updated_at:e.updated_at,visit_count:e.visit_count||0,last_visited_at:e.last_visited_at||"",favicon_url:e.favicon_url||""}}),r={exportDate:new Date().toISOString(),totalBookmarks:a.length,bookmarks:a},s={data:JSON.stringify(r,null,2),filename:"selected-bookmarks-".concat(new Date().toISOString().split("T")[0],".json"),mimeType:"application/json"},t=new Q;"download"===e?(t.downloadFile(s.data,s.filename,s.mimeType),alert("Downloaded ".concat(s.filename))):"copy"===e&&(await t.copyToClipboard(s.data),alert("Copied to clipboard")),p()}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}finally{j(!1)}}};return f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:p,className:"h-8",children:(0,s.jsx)(V.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(_.E,{variant:"secondary",className:"h-6",children:[d," selected"]}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>d===a.length?u():h(a),className:"h-8 text-xs",children:d===a.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.A,{className:"h-3 w-3 mr-1"}),"Deselect All"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.A,{className:"h-3 w-3 mr-1"}),"Select All"]})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:()=>O(!0),disabled:b||0===d,className:"h-8",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"Favorite"]}),(0,s.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:()=>B(!0),disabled:b||0===d,className:"h-8",children:[(0,s.jsx)(H.A,{className:"h-4 w-4 mr-1"}),"Archive"]}),(0,s.jsxs)(M.rI,{children:[(0,s.jsx)(M.ty,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"ghost",size:"sm",disabled:b||0===d,className:"h-8",children:(0,s.jsx)(G.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(M.SQ,{align:"end",children:[(0,s.jsxs)(M._2,{onClick:()=>N(!0),children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Move to Folder"]}),(0,s.jsxs)(M._2,{onClick:()=>C(!0),children:[(0,s.jsx)(Y.A,{className:"h-4 w-4 mr-2"}),"Update Tags"]}),(0,s.jsx)(M.mB,{}),(0,s.jsxs)(M._2,{onClick:()=>z("download"),children:[(0,s.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),(0,s.jsxs)(M._2,{onClick:()=>z("copy"),children:[(0,s.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Copy to Clipboard"]}),(0,s.jsx)(M.mB,{}),(0,s.jsxs)(M._2,{onClick:()=>O(!1),children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Remove from Favorites"]}),(0,s.jsxs)(M._2,{onClick:()=>B(!1),children:[(0,s.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Unarchive"]}),(0,s.jsx)(M.mB,{}),(0,s.jsxs)(M._2,{onClick:()=>v(!0),className:"text-red-600 dark:text-red-400",children:[(0,s.jsx)(W.A,{className:"h-4 w-4 mr-2"}),"Delete Selected"]})]})]})]})]})}),(0,s.jsx)(c.lG,{open:y,onOpenChange:v,children:(0,s.jsxs)(c.Cf,{children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:"Delete Bookmarks"}),(0,s.jsxs)(c.rr,{children:["Are you sure you want to delete ",d," bookmark",1!==d?"s":"","? This action cannot be undone."]})]}),(0,s.jsxs)(c.Es,{children:[(0,s.jsx)(o.$,{variant:"outline",onClick:()=>v(!1),disabled:b,children:"Cancel"}),(0,s.jsx)(o.$,{variant:"destructive",onClick:I,disabled:b,children:b?"Deleting...":"Delete"})]})]})}),(0,s.jsx)(c.lG,{open:k,onOpenChange:N,children:(0,s.jsxs)(c.Cf,{children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:"Move to Folder"}),(0,s.jsxs)(c.rr,{children:["Select a folder to move ",d," bookmark",1!==d?"s":""," to."]})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)(P.l6,{value:A,onValueChange:T,children:[(0,s.jsx)(P.bq,{children:(0,s.jsx)(P.yv,{placeholder:"Select a folder"})}),(0,s.jsxs)(P.gC,{children:[(0,s.jsx)(P.eb,{value:"none",children:"No Folder"}),r.map(e=>(0,s.jsx)(P.eb,{value:e.id,children:e.name},e.id))]})]})}),(0,s.jsxs)(c.Es,{children:[(0,s.jsx)(o.$,{variant:"outline",onClick:()=>N(!1),disabled:b,children:"Cancel"}),(0,s.jsx)(o.$,{onClick:R,disabled:b||!A,children:b?"Moving...":"Move"})]})]})}),(0,s.jsx)(c.lG,{open:w,onOpenChange:C,children:(0,s.jsxs)(c.Cf,{children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:"Update Tags"}),(0,s.jsxs)(c.rr,{children:["Select tags to apply to ",d," bookmark",1!==d?"s":"",". This will replace existing tags."]})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:l.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:F.includes(e.id),onChange:a=>{a.target.checked?E(a=>[...a,e.id]):E(a=>a.filter(a=>a!==e.id))},className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})}),(0,s.jsxs)(c.Es,{children:[(0,s.jsx)(o.$,{variant:"outline",onClick:()=>C(!1),disabled:b,children:"Cancel"}),(0,s.jsx)(o.$,{onClick:U,disabled:b,children:b?"Updating...":"Update Tags"})]})]})})]}):null}var ea=r(41737),er=r(88539),es=r(85057),et=r(55863),el=r(59434);let ei=t.forwardRef((e,a)=>{let{className:r,value:t,...l}=e;return(0,s.jsx)(et.bL,{ref:a,className:(0,el.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...l,children:(0,s.jsx)(et.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});ei.displayName=et.bL.displayName;var en=r(17313),eo=r(47262),ed=r(57434),ec=r(92657),em=r(66766);function ex(e){let{isOpen:a,onClose:r,onImport:l,folders:i,tags:n,existingBookmarks:d=[],isLoading:m=!1}=e,[h,g]=(0,t.useState)(""),[u,p]=(0,t.useState)(""),[f,b]=(0,t.useState)([]),[j,y]=(0,t.useState)([]),[v,k]=(0,t.useState)(!1),[N,w]=(0,t.useState)("input"),[C,A]=(0,t.useState)(!0),[S,F]=(0,t.useState)(!0),[D,I]=(0,t.useState)({total:0,processed:0,successful:0,failed:0,percentage:0}),[B,O]=(0,t.useState)("text"),R=(0,t.useRef)(null),U=()=>Math.random().toString(36).substr(2,9),z=e=>{try{let a=new URL(e.trim());return"/"===a.pathname&&(a.pathname=""),a.toString()}catch(a){return e.trim()}},$=e=>{let a=z(e),r=d.find(e=>z(e.url)===a);return{isDuplicate:!!r,existingId:null==r?void 0:r.id}},M=e=>{let a=e.split("\n").filter(e=>e.trim()),r=[];for(let e=0;e<a.length;e++){let s=a[e].trim();if(!s)continue;let t=s,l="",i="",n=U(),o=s.match(/<a[^>]*href=["']([^"']*)["'][^>]*>(.*?)<\/a>/i);o&&(t=o[1],l=o[2].replace(/<[^>]*>/g,"").trim());let d=s.match(/\[([^\]]*)\]\(([^)]*)\)/);d&&(l=d[1],t=d[2]);try{let e=JSON.parse(s);e.url&&(t=e.url,l=e.title||"",i=e.description||"")}catch(e){}let c=s.match(/^(\s*)<DT><A HREF="([^"]*)"[^>]*>([^<]*)<\/A>/);if(c&&(t=c[2],l=c[3]),/^https?:\/\/.+\..+/.test(t)){let e=z(t),{isDuplicate:a,existingId:o}=$(e);r.push({id:n,url:e,originalUrl:s,title:l||J(e),description:i,isValid:!0,isDuplicate:a,existingBookmarkId:o,selected:!a,status:"pending",retryCount:0})}else r.push({id:n,url:s,originalUrl:s,isValid:!1,error:"Invalid URL format",selected:!1,status:"failed",retryCount:0})}return r},J=e=>{try{return new URL(e).hostname.replace("www.","")}catch(a){return e}},H=async e=>{try{await new Promise(e=>setTimeout(e,500));let a=J(e.url);return{title:e.title||"".concat(a),description:e.description||"Content from ".concat(a),favicon:"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=32")}}catch(e){return{error:"Failed to fetch metadata"}}},G=async()=>{if(!h.trim())return void X.oR.error("Please enter some URLs to import");k(!0);let e=M(h);for(let a=0;a<e.length;a++){let r=e[a];if(r.isValid){let s=await H(r);e[a]={...r,...s}}let s=(a+1)/e.length*100;I(e=>({...e,percentage:s}))}y(e),w("preview"),k(!1),I({total:0,processed:0,successful:0,failed:0,percentage:0})},Z=async e=>{var a;let r=null==(a=e.target.files)?void 0:a[0];if(!r)return;let s=await r.text();g(s),O("text"),(r.name.endsWith(".html")||s.includes("<DT><A HREF"))&&await G()},W=e=>{y(a=>a.map(a=>a.id===e?{...a,selected:!a.selected}:a))},K=e=>{y(a=>a.map(a=>({...a,selected:e})))},Q=async()=>{let e=j.filter(e=>e.selected&&e.isValid);if(0===e.length)return void X.oR.error("Please select at least one bookmark to import");w("importing"),I({total:e.length,processed:0,successful:0,failed:0,percentage:0});let a=[],r=0,s=0,t=0;for(let l of e){try{y(e=>e.map(e=>e.id===l.id?{...e,status:"processing"}:e)),a.push({url:l.url,title:l.title,description:l.description,folderId:u&&"none"!==u?u:void 0,tagIds:f.length>0?f:void 0,favicon:l.favicon}),y(e=>e.map(e=>e.id===l.id?{...e,status:"success"}:e)),s++}catch(e){y(a=>a.map(a=>a.id===l.id?{...a,status:"failed",error:e instanceof Error?e.message:"Import failed"}:a)),t++}let i=++r/e.length*100;I({total:e.length,processed:r,successful:s,failed:t,percentage:i})}try{await l(a),w("completed"),X.oR.success("Successfully imported ".concat(s," bookmarks").concat(t>0?" (".concat(t," failed)"):""))}catch(e){X.oR.error("Import failed: "+(e instanceof Error?e.message:"Unknown error")),w("preview")}},ee=()=>{g(""),p(""),b([]),y([]),w("input"),k(!1),I({total:0,processed:0,successful:0,failed:0,percentage:0}),O("text")},ea=()=>{r(),ee()},et=e=>{b(a=>a.filter(a=>a!==e))},el={total:j.length,valid:j.filter(e=>e.isValid).length,invalid:j.filter(e=>!e.isValid).length,duplicates:j.filter(e=>e.isDuplicate).length,selected:j.filter(e=>e.selected).length};return(0,s.jsx)(c.lG,{open:a,onOpenChange:ea,children:(0,s.jsxs)(c.Cf,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsxs)(c.L3,{className:"flex items-center gap-2",children:[(0,s.jsx)(T.A,{className:"h-5 w-5"}),"Robust Bookmark Import Tool"]}),(0,s.jsx)(c.rr,{children:"Advanced bulk bookmark import with duplicate detection, metadata extraction, and progress tracking"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden",children:["input"===N&&(0,s.jsxs)(en.tU,{value:B,onValueChange:e=>O(e),children:[(0,s.jsxs)(en.j7,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(en.Xi,{value:"text",className:"flex items-center gap-2",children:[(0,s.jsx)(ed.A,{className:"h-4 w-4"}),"Text Input"]}),(0,s.jsxs)(en.Xi,{value:"file",className:"flex items-center gap-2",children:[(0,s.jsx)(T.A,{className:"h-4 w-4"}),"File Upload"]})]}),(0,s.jsx)(en.av,{value:"text",className:"space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"bulk-input",children:"Paste URLs or bookmark data"}),(0,s.jsx)(er.T,{id:"bulk-input",placeholder:'Supports multiple formats:\n• Plain URLs: https://example.com\n• Markdown: [Title](https://example.com)\n• HTML: <a href="https://example.com">Title</a>\n• JSON: {"url": "https://example.com", "title": "Title"}\n• Chrome exports: <DT><A HREF="https://example.com">Title</A>',value:h,onChange:e=>g(e.target.value),className:"min-h-[200px] font-mono text-sm"}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[h.split("\n").filter(e=>e.trim()).length," lines"]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.readText().then(e=>{g(e),X.oR.success("Pasted from clipboard")}).catch(()=>{X.oR.error("Failed to read clipboard")})},children:[(0,s.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Paste from Clipboard"]})]})]})}),(0,s.jsx)(en.av,{value:"file",className:"space-y-4",children:(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[(0,s.jsx)("input",{ref:R,type:"file",accept:".html,.json,.txt,.csv",onChange:Z,className:"hidden"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"mx-auto w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:(0,s.jsx)(T.A,{className:"h-6 w-6 text-gray-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Upload bookmark file"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Supports HTML exports from Chrome, Firefox, Safari, and more"})]}),(0,s.jsxs)(o.$,{onClick:()=>{var e;return null==(e=R.current)?void 0:e.click()},children:[(0,s.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Choose File"]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{children:"Default Folder (Optional)"}),(0,s.jsxs)(P.l6,{value:u,onValueChange:p,children:[(0,s.jsx)(P.bq,{children:(0,s.jsx)(P.yv,{placeholder:"Select folder",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Choose folder..."})]})})}),(0,s.jsxs)(P.gC,{children:[(0,s.jsx)(P.eb,{value:"none",children:"No folder"}),i.map(e=>(0,s.jsx)(P.eb,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),e.name]})},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{children:"Default Tags (Optional)"}),(0,s.jsxs)(P.l6,{onValueChange:e=>{f.includes(e)||b(a=>[...a,e])},children:[(0,s.jsx)(P.bq,{children:(0,s.jsx)(P.yv,{placeholder:"Add tags",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Y.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Add tags..."})]})})}),(0,s.jsx)(P.gC,{children:n.filter(e=>!f.includes(e.id)).map(e=>(0,s.jsx)(P.eb,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color||"#gray"}}),e.name]})},e.id))})]}),f.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:f.map(e=>{let a=n.find(a=>a.id===e);return a?(0,s.jsxs)(_.E,{variant:"secondary",className:"gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.color||"#gray"}}),a.name,(0,s.jsx)(V.A,{className:"h-3 w-3 cursor-pointer",onClick:()=>et(a.id)})]},a.id):null})})]})]})]}),"preview"===N&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(_.E,{variant:"outline",className:"gap-1",children:[(0,s.jsx)(E.A,{className:"h-3 w-3"}),el.valid," valid"]}),(0,s.jsxs)(_.E,{variant:"destructive",className:"gap-1",children:[(0,s.jsx)(L.A,{className:"h-3 w-3"}),el.invalid," invalid"]}),(0,s.jsxs)(_.E,{variant:"secondary",className:"gap-1",children:[(0,s.jsx)(q.A,{className:"h-3 w-3"}),el.duplicates," duplicates"]}),(0,s.jsxs)(_.E,{variant:"default",className:"gap-1",children:[(0,s.jsx)(ec.A,{className:"h-3 w-3"}),el.selected," selected"]})]}),(0,s.jsx)(o.$,{variant:"outline",onClick:()=>w("input"),children:"Edit Input"})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>K(!0),children:"Select All"}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>K(!1),children:"Deselect All"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eo.S,{id:"show-duplicates",checked:C,onCheckedChange:e=>A(!0===e)}),(0,s.jsx)(es.J,{htmlFor:"show-duplicates",className:"text-sm",children:"Show duplicates"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eo.S,{id:"show-invalid",checked:S,onCheckedChange:e=>F(!0===e)}),(0,s.jsx)(es.J,{htmlFor:"show-invalid",className:"text-sm",children:"Show invalid"})]})]})}),(0,s.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2",children:j.filter(e=>(!!e.isValid||!!S)&&(!e.isDuplicate||!!C)).map(e=>(0,s.jsx)("div",{className:"p-3 border rounded-lg ".concat(e.isDuplicate?"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-950":e.isValid?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950":"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950"),children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(eo.S,{checked:e.selected,onCheckedChange:()=>W(e.id),disabled:!e.isValid}),e.isValid&&e.favicon&&(0,s.jsx)(em.default,{src:e.favicon,alt:"",width:16,height:16,className:"w-4 h-4 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"font-medium text-sm truncate",children:e.title||e.url}),e.isDuplicate&&(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:"Duplicate"}),!e.isValid&&(0,s.jsx)(_.E,{variant:"destructive",className:"text-xs",children:"Invalid"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.url}),e.description&&(0,s.jsx)("div",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.description}),e.error&&(0,s.jsx)("div",{className:"text-xs text-red-600 mt-1",children:e.error})]})]})},e.id))})]}),"importing"===N&&(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-12 space-y-6",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-medium",children:"Importing bookmarks..."}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[D.processed," of ",D.total," processed"]})]}),(0,s.jsx)(ei,{value:D.percentage}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["✓ ",D.successful," successful"]}),(0,s.jsxs)("span",{children:["✗ ",D.failed," failed"]})]})]})}),"completed"===N&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[(0,s.jsx)(E.A,{className:"h-16 w-16 text-green-500"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-medium",children:"Import completed!"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["Successfully imported ",D.successful," bookmarks",D.failed>0&&" (".concat(D.failed," failed)")]})]}),(0,s.jsx)(o.$,{onClick:ea,children:"Done"})]}),v&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-medium",children:"Processing URLs..."}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Extracting metadata and checking for duplicates"})]}),(0,s.jsx)(ei,{value:D.percentage,className:"w-full max-w-md"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,s.jsx)(o.$,{variant:"outline",onClick:ea,disabled:m||v,children:"Cancel"}),(0,s.jsxs)("div",{className:"space-x-2",children:["input"===N&&(0,s.jsx)(o.$,{onClick:G,disabled:!h.trim()||v,children:v?"Processing...":"Parse & Preview"}),"preview"===N&&(0,s.jsxs)(o.$,{onClick:Q,disabled:0===el.selected||m,children:["Import ",el.selected," Bookmarks"]})]})]})]})})}var eh=r(66695),eg=r(62523),eu=r(96848),ep=r(60760),ef=r(16785),eb=r(71539),ej=r(62108),ey=r(34869),ev=r(35169);let ek=[{icon:ef.A,name:"Target"},{icon:B.A,name:"Clock"},{icon:E.A,name:"Check"},{icon:u.A,name:"Alert"},{icon:eb.A,name:"Zap"},{icon:b.A,name:"Star"},{icon:ej.A,name:"Bookmark"},{icon:ey.A,name:"Globe"},{icon:Y.A,name:"Tag"},{icon:C.A,name:"Calendar"}],eN=[{value:"blue",class:"border-blue-200 bg-blue-50/50 dark:border-blue-800 dark:bg-blue-900/10",name:"Blue"},{value:"green",class:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10",name:"Green"},{value:"purple",class:"border-purple-200 bg-purple-50/50 dark:border-purple-800 dark:bg-purple-900/10",name:"Purple"},{value:"orange",class:"border-orange-200 bg-orange-50/50 dark:border-orange-800 dark:bg-orange-900/10",name:"Orange"},{value:"pink",class:"border-pink-200 bg-pink-50/50 dark:border-pink-800 dark:bg-pink-900/10",name:"Pink"},{value:"yellow",class:"border-yellow-200 bg-yellow-50/50 dark:border-yellow-800 dark:bg-yellow-900/10",name:"Yellow"}];function ew(e){let{isOpen:a,onClose:r,onCreateBoard:l}=e,[i,n]=(0,t.useState)(""),[d,m]=(0,t.useState)(""),[x,h]=(0,t.useState)(0),[g,u]=(0,t.useState)(0);return(0,s.jsx)(c.lG,{open:a,onOpenChange:r,children:(0,s.jsxs)(c.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:"Create New Board"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Board Name"}),(0,s.jsx)(eg.p,{placeholder:"Enter board name...",value:i,onChange:e=>n(e.target.value),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description (Optional)"}),(0,s.jsx)(eg.p,{placeholder:"Enter board description...",value:d,onChange:e=>m(e.target.value),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Icon"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2 mt-2",children:ek.map((e,a)=>{let r=e.icon;return(0,s.jsx)("button",{onClick:()=>h(a),className:"p-3 rounded-lg border-2 transition-all ".concat(x===a?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:(0,s.jsx)(r,{className:"h-5 w-5 ".concat(x===a?"text-blue-600":"text-gray-600 dark:text-gray-400")})},a)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Color"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:eN.map((e,a)=>(0,s.jsx)("button",{onClick:()=>u(a),className:"p-3 rounded-lg border-2 transition-all ".concat(e.class," ").concat(g===a?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-gray-300"),children:(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name})},a))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,s.jsx)(o.$,{variant:"outline",onClick:r,children:"Cancel"}),(0,s.jsx)(o.$,{onClick:()=>{i.trim()&&(l({name:i.trim(),description:d.trim(),color:eN[g].class,icon:ek[x].icon}),n(""),m(""),h(0),u(0),r())},disabled:!i.trim(),children:"Create Board"})]})]})]})})}function eC(e){let{isOpen:a,onClose:r,bookmarks:l,boards:i,onAssignBookmark:n,onRemoveBookmark:d}=e,[m,x]=(0,t.useState)(""),h=l.filter(e=>{var a;return e.title.toLowerCase().includes(m.toLowerCase())||(null==(a=e.description)?void 0:a.toLowerCase().includes(m.toLowerCase()))}),g=e=>i.find(a=>a.bookmarkIds.includes(e)),u=e=>{try{return new URL(e).hostname.replace("www.","")}catch(a){return e}},p=e=>{let a=u(e);return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=32")};return(0,s.jsx)(c.lG,{open:a,onOpenChange:r,children:(0,s.jsxs)(c.Cf,{className:"sm:max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:"Manage Bookmark Assignments"})}),(0,s.jsxs)("div",{className:"space-y-4 flex-1 overflow-hidden flex flex-col",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(eg.p,{placeholder:"Search bookmarks...",value:m,onChange:e=>x(e.target.value),className:"pl-9"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2",children:h.map(e=>{let a=g(e.id),r=(null==a?void 0:a.icon)||ey.A;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:[(0,s.jsx)("img",{src:p(e.url),alt:"",className:"w-5 h-5",onError:e=>{var a;e.currentTarget.style.display="none",null==(a=e.currentTarget.nextElementSibling)||a.classList.remove("hidden")}}),(0,s.jsx)(ey.A,{className:"w-4 h-4 text-gray-500 hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:u(e.url)})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&(0,s.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs",children:[(0,s.jsx)(r,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:a.name})]}),(0,s.jsxs)("select",{value:(null==a?void 0:a.id)||"",onChange:r=>{a&&d(e.id,a.id),r.target.value&&n(e.id,r.target.value)},className:"text-xs border rounded px-2 py-1 bg-white dark:bg-gray-800",children:[(0,s.jsx)("option",{value:"",children:"No Board"}),i.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]},e.id)})}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(o.$,{onClick:r,children:"Done"})})]})]})})}function eA(e){let{bookmarks:a,onBookmarkClick:r,onFavorite:l,loading:i,selectedCategory:n,selectedFolder:d,onCategoryChange:c}=e,[m,p]=(0,t.useState)(""),[f,v]=(0,t.useState)([]),[k,N]=(0,t.useState)(!1),[w,C]=(0,t.useState)(!1);(0,t.useEffect)(()=>{v([{id:"todo",name:"To Review",description:"Bookmarks to review and organize",color:eN[0].class,icon:B.A,bookmarkIds:[]},{id:"in-progress",name:"Priority",description:"High priority bookmarks",color:eN[2].class,icon:ef.A,bookmarkIds:[]},{id:"completed",name:"Favorites",description:"Your favorite bookmarks",color:eN[1].class,icon:b.A,bookmarkIds:[]},{id:"archived",name:"Research",description:"Research and reference materials",color:eN[3].class,icon:ey.A,bookmarkIds:[]}])},[]);let S=e=>{v(a=>a.filter(a=>a.id!==e))},T=(0,t.useMemo)(()=>{let e=a;return d?e=e.filter(e=>e.folder_id===d.id):n&&"all"!==n&&(e=e.filter(e=>(e.tags||[]).some(e=>e.name.toLowerCase()===n.toLowerCase()))),m&&(e=e.filter(e=>{var a;return e.title.toLowerCase().includes(m.toLowerCase())||(null==(a=e.description)?void 0:a.toLowerCase().includes(m.toLowerCase()))||e.url.toLowerCase().includes(m.toLowerCase())})),e},[a,m,n,d]),F=e=>{try{return new URL(e).hostname.replace("www.","")}catch(a){return e}},E=e=>{let a=F(e);return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=32")},D=T.filter(e=>!f.some(a=>a.bookmarkIds.includes(e.id)));return i?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"}),(0,s.jsx)("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-96 animate-pulse"})]}),(0,s.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),[void 0,void 0,void 0].map((e,a)=>(0,s.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"},a))]},a))})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(n||d)&&c&&(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>c("all"),className:"p-2",children:(0,s.jsx)(ev.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d?"KANBAN VIEW - ".concat(d.name.toUpperCase()):n&&"all"!==n?"KANBAN VIEW - ".concat(n.toUpperCase()):"KANBAN VIEW - CUSTOM BOARDS"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:d?"Organize bookmarks from ".concat(d.name," folder across your custom boards"):n&&"all"!==n?'Organize bookmarks tagged with "'.concat(n,'" across your custom boards'):"Organize your bookmarks across custom boards for better workflow management"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[d&&(0,s.jsxs)(_.E,{variant:"secondary",className:"px-3 py-1",children:[(0,s.jsx)(x.A,{className:"h-3 w-3 mr-1"}),d.name," (",T.length,")"]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>C(!0),className:"flex items-center space-x-2",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Manage Assignments"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(eg.p,{placeholder:"Search bookmarks...",value:m,onChange:e=>p(e.target.value),className:"pl-9 w-64"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[f.map(e=>{let a=T.filter(a=>e.bookmarkIds.includes(a.id)),r=e.icon;return(0,s.jsx)(eu.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col h-[600px]",children:(0,s.jsxs)(eh.Zp,{className:"h-full flex flex-col ".concat(e.color," border-2"),children:[(0,s.jsx)(eh.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"p-2 bg-white/80 dark:bg-gray-800/80 rounded-lg",children:(0,s.jsx)(r,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(eh.ZB,{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:a.length}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>S(e.id),className:"h-6 w-6 p-0 text-gray-400 hover:text-red-500",children:(0,s.jsx)(V.A,{className:"h-3 w-3"})})]})]})}),(0,s.jsxs)(eh.Wu,{className:"flex-1 overflow-y-auto space-y-3 pb-4",children:[(0,s.jsx)(ep.N,{children:a.map((e,a)=>(0,s.jsx)(eu.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:.05*a},className:"group",children:(0,s.jsx)(eh.Zp,{className:"cursor-pointer hover:shadow-md transition-all duration-200 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:(0,s.jsx)(eh.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsxs)("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded flex-shrink-0",children:[(0,s.jsx)("img",{src:E(e.url),alt:"",className:"w-5 h-5",onError:e=>{var a;e.currentTarget.style.display="none",null==(a=e.currentTarget.nextElementSibling)||a.classList.remove("hidden")}}),(0,s.jsx)(ey.A,{className:"w-4 h-4 text-gray-500 hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2 mb-1",children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2 mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:F(e.url)}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),null==l||l(e)},className:"h-6 w-6 p-0 ".concat(e.is_favorite?"text-red-500":"text-gray-400 hover:text-red-500"),children:(0,s.jsx)(g.A,{className:"h-3 w-3 ".concat(e.is_favorite?"fill-current":"")})}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),window.open(e.url,"_blank")},className:"h-6 w-6 p-0 text-gray-400 hover:text-blue-500",children:(0,s.jsx)(h.A,{className:"h-3 w-3"})})]})]})]})]})})})},e.id))}),0===a.length&&(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(r,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"No bookmarks assigned"}),(0,s.jsx)("p",{className:"text-xs",children:'Use "Manage Assignments" to add bookmarks'})]})]})]})},e.id)}),(0,s.jsx)(eu.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*f.length},className:"flex flex-col h-[600px]",children:(0,s.jsx)(eh.Zp,{className:"h-full flex flex-col border-2 border-dashed border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 transition-all duration-200 cursor-pointer bg-gray-50/50 dark:bg-gray-800/30 hover:bg-blue-50/50 dark:hover:bg-blue-900/10",onClick:()=>N(!0),children:(0,s.jsx)(eh.Wu,{className:"flex-1 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/20 transition-colors",children:(0,s.jsx)(A.A,{className:"h-8 w-8 text-gray-500 dark:text-gray-400"})}),(0,s.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Add New Board"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create a custom board to organize your bookmarks"})]})})})})]}),D.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-orange-500"}),(0,s.jsxs)("span",{children:["Unassigned Bookmarks (",D.length,")"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[D.slice(0,8).map(e=>(0,s.jsx)(eh.Zp,{className:"p-3 bg-orange-50/50 dark:bg-orange-900/10 border-orange-200 dark:border-orange-800",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:[(0,s.jsx)("img",{src:E(e.url),alt:"",className:"w-5 h-5",onError:e=>{var a;e.currentTarget.style.display="none",null==(a=e.currentTarget.nextElementSibling)||a.classList.remove("hidden")}}),(0,s.jsx)(ey.A,{className:"w-4 h-4 text-gray-500 hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:F(e.url)})]})]})},e.id)),D.length>8&&(0,s.jsx)(eh.Zp,{className:"p-3 bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 flex items-center justify-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["+",D.length-8," more"]})})]})]}),(0,s.jsx)(ew,{isOpen:k,onClose:()=>N(!1),onCreateBoard:e=>{let a={...e,id:"board-".concat(Date.now()),bookmarkIds:[]};v(e=>[...e,a])}}),(0,s.jsx)(eC,{isOpen:w,onClose:()=>C(!1),bookmarks:T,boards:f,onAssignBookmark:(e,a)=>{v(r=>r.map(r=>r.id===a?{...r,bookmarkIds:[...r.bookmarkIds.filter(a=>a!==e),e]}:{...r,bookmarkIds:r.bookmarkIds.filter(a=>a!==e)}))},onRemoveBookmark:(e,a)=>{v(r=>r.map(r=>r.id===a?{...r,bookmarkIds:r.bookmarkIds.filter(a=>a!==e)}:r))}})]})}var eS=r(62720),eT=r(52681);let eF=e=>{let{data:a}=e,r=(0,t.useRef)(null),l=(0,t.useRef)(null),[i,n]=(0,t.useState)(0);(0,t.useEffect)(()=>{r.current&&n(r.current.getBoundingClientRect().height)},[r]);let{scrollYProgress:o}=(0,eS.L)({target:l,offset:["start 10%","end 50%"]}),d=(0,eT.G)(o,[0,1],[0,i]),c=(0,eT.G)(o,[0,.1],[0,1]);return(0,s.jsxs)("div",{className:"w-full bg-white dark:bg-neutral-950 font-sans md:px-10",ref:l,children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto py-4 px-4 md:px-8 lg:px-10"}),(0,s.jsxs)("div",{ref:r,className:"relative max-w-7xl mx-auto pb-20",children:[a.map((e,a)=>(0,s.jsxs)(eu.P.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1*a,ease:"easeOut"},viewport:{once:!0,margin:"-50px"},className:"flex justify-start pt-6 md:pt-16 md:gap-10",children:[(0,s.jsxs)("div",{className:"sticky flex flex-col md:flex-row z-40 items-center top-40 self-start max-w-xs lg:max-w-sm md:w-full",children:[(0,s.jsx)(eu.P.div,{className:"h-10 absolute left-2 md:left-2 w-10 rounded-full bg-neutral-800 dark:bg-neutral-200 flex items-center justify-center border border-neutral-300 dark:border-neutral-700 shadow-sm",whileInView:{scale:[.8,1]},transition:{duration:.4,delay:.1*a,ease:"easeOut"},viewport:{once:!0},children:(0,s.jsx)("div",{className:"h-3 w-3 rounded-full bg-white dark:bg-neutral-800"})}),(0,s.jsx)(eu.P.h3,{className:"hidden md:block text-xl md:pl-20 md:text-4xl font-semibold uppercase text-black bg-white px-4 py-2 rounded-lg border-2 border-black shadow-lg tracking-tight",whileInView:{opacity:[0,1],x:[-15,0]},transition:{duration:.6,delay:.1*a+.2,ease:"easeOut"},viewport:{once:!0},children:e.title})]}),(0,s.jsxs)("div",{className:"relative pl-20 pr-4 md:pl-4 w-full",children:[(0,s.jsx)(eu.P.h3,{className:"md:hidden block text-2xl mb-4 text-left font-semibold uppercase text-black bg-white px-4 py-2 rounded-lg border-2 border-black shadow-lg tracking-tight",whileInView:{opacity:[0,1],y:[-10,0]},transition:{duration:.5,delay:.1*a+.2,ease:"easeOut"},viewport:{once:!0},children:e.title}),e.content]})]},a)),(0,s.jsx)("div",{style:{height:i+"px"},className:"absolute md:left-8 left-8 top-0 overflow-hidden w-[2px] bg-neutral-200 dark:bg-neutral-800 [mask-image:linear-gradient(to_bottom,transparent_0%,black_10%,black_90%,transparent_100%)]",children:(0,s.jsx)(eu.P.div,{style:{height:d,opacity:c},className:"absolute inset-x-0 top-0 w-[2px] bg-neutral-600 dark:bg-neutral-400 rounded-full"})})]})]})};var e_=r(70463),eE=r(5040),eD=r(46561),eL=r(33109),eI=r(97210),eB=r(47863),eO=r(66474);let eR=[{icon:e_.A,name:"Ideas"},{icon:eE.A,name:"Learning"},{icon:eD.A,name:"Current"},{icon:eL.A,name:"Progress"},{icon:eI.A,name:"Goals"},{icon:ef.A,name:"Priority"},{icon:E.A,name:"Completed"},{icon:H.A,name:"Archive"},{icon:B.A,name:"Later"},{icon:C.A,name:"Scheduled"}],eU=[{value:"blue",class:"border-blue-200 bg-blue-50/50 dark:border-blue-800 dark:bg-blue-900/10",name:"Blue"},{value:"green",class:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10",name:"Green"},{value:"purple",class:"border-purple-200 bg-purple-50/50 dark:border-purple-800 dark:bg-purple-900/10",name:"Purple"},{value:"orange",class:"border-orange-200 bg-orange-50/50 dark:border-orange-800 dark:bg-orange-900/10",name:"Orange"},{value:"pink",class:"border-pink-200 bg-pink-50/50 dark:border-pink-800 dark:bg-pink-900/10",name:"Pink"},{value:"yellow",class:"border-yellow-200 bg-yellow-50/50 dark:border-yellow-800 dark:bg-yellow-900/10",name:"Yellow"},{value:"indigo",class:"border-indigo-200 bg-indigo-50/50 dark:border-indigo-800 dark:bg-indigo-900/10",name:"Indigo"},{value:"teal",class:"border-teal-200 bg-teal-50/50 dark:border-teal-800 dark:bg-teal-900/10",name:"Teal"}];function ez(e){let{bookmark:a,onFavorite:r,onClick:t,index:l}=e,i=e=>{try{return new URL(e).hostname.replace("www.","")}catch(e){return"Invalid URL"}};return(0,s.jsx)(eu.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.02*l},className:"group",children:(0,s.jsxs)("div",{onClick:()=>null==t?void 0:t(a),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer transition-all duration-200 border border-transparent hover:border-gray-200 dark:hover:border-gray-700",children:[(0,s.jsxs)("div",{className:"w-6 h-6 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded flex-shrink-0",children:[(0,s.jsx)("img",{src:(e=>{let a=i(e);return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=32")})(a.url),alt:"",className:"w-4 h-4",onError:e=>{var a;e.currentTarget.style.display="none",null==(a=e.currentTarget.nextElementSibling)||a.classList.remove("hidden")}}),(0,s.jsx)(ey.A,{className:"w-3 h-3 text-gray-500 hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 dark:text-white truncate pr-2",children:a.title}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),null==r||r(a)},className:"h-5 w-5 p-0 ".concat(a.is_favorite?"text-red-500":"text-gray-400 hover:text-red-500"),children:(0,s.jsx)(g.A,{className:"h-3 w-3 ".concat(a.is_favorite?"fill-current":"")})}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),window.open(a.url,"_blank")},className:"h-5 w-5 p-0 text-gray-400 hover:text-blue-500",children:(0,s.jsx)(h.A,{className:"h-2.5 w-2.5"})})]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:i(a.url)})]})]})})}function e$(e){let{isOpen:a,onClose:r,onCreateSegment:l}=e,[i,n]=(0,t.useState)(""),[d,m]=(0,t.useState)(""),[x,h]=(0,t.useState)(0),[g,u]=(0,t.useState)(0);return(0,s.jsx)(c.lG,{open:a,onOpenChange:r,children:(0,s.jsxs)(c.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:"Create Timeline Segment"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Segment Name"}),(0,s.jsx)(eg.p,{placeholder:"e.g., Learning Queue, Current Projects...",value:i,onChange:e=>n(e.target.value),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description (Optional)"}),(0,s.jsx)(eg.p,{placeholder:"What this timeline segment represents...",value:d,onChange:e=>m(e.target.value),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Icon"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2 mt-2",children:eR.map((e,a)=>{let r=e.icon;return(0,s.jsx)("button",{onClick:()=>h(a),className:"p-3 rounded-lg border-2 transition-all ".concat(x===a?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),children:(0,s.jsx)(r,{className:"h-5 w-5 ".concat(x===a?"text-blue-600":"text-gray-600 dark:text-gray-400")})},a)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Color Theme"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-2",children:eU.map((e,a)=>(0,s.jsx)("button",{onClick:()=>u(a),className:"p-3 rounded-lg border-2 transition-all ".concat(e.class," ").concat(g===a?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-gray-300"),children:(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name})},a))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,s.jsx)(o.$,{variant:"outline",onClick:r,children:"Cancel"}),(0,s.jsx)(o.$,{onClick:()=>{i.trim()&&(l({name:i.trim(),description:d.trim(),color:eU[g].class,icon:eR[x].icon,iconName:eR[x].name}),n(""),m(""),h(0),u(0),r())},disabled:!i.trim(),children:"Create Segment"})]})]})]})})}function eM(e){let{isOpen:a,onClose:r,bookmarks:l,segments:i,onAssignBookmark:n,onRemoveBookmark:d}=e,[m,x]=(0,t.useState)(""),h=e=>i.find(a=>a.bookmarkIds.includes(e)),g=e=>{try{return new URL(e).hostname.replace("www.","")}catch(e){return"Invalid URL"}},u=e=>{let a=g(e);return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=32")},p=(0,t.useMemo)(()=>l.filter(e=>e.title.toLowerCase().includes(m.toLowerCase())||e.url.toLowerCase().includes(m.toLowerCase())||e.description&&e.description.toLowerCase().includes(m.toLowerCase())),[l,m]);return(0,s.jsx)(c.lG,{open:a,onOpenChange:r,children:(0,s.jsxs)(c.Cf,{className:"sm:max-w-4xl max-h-[80vh] overflow-hidden",children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:"Manage Timeline Assignments"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(eg.p,{placeholder:"Search bookmarks...",value:m,onChange:e=>x(e.target.value),className:"pl-9"})]}),(0,s.jsx)("div",{className:"overflow-y-auto max-h-96 space-y-2",children:p.map(e=>{let a=h(e.id);return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:[(0,s.jsx)("img",{src:u(e.url),alt:"",className:"w-5 h-5",onError:e=>{var a;e.currentTarget.style.display="none",null==(a=e.currentTarget.nextElementSibling)||a.classList.remove("hidden")}}),(0,s.jsx)(ey.A,{className:"w-4 h-4 text-gray-500 hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:g(e.url)})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:a.name}),(0,s.jsxs)("select",{value:(null==a?void 0:a.id)||"",onChange:r=>{let s=r.target.value;a&&d(e.id,a.id),s&&n(e.id,s)},className:"text-sm border rounded px-2 py-1 bg-white dark:bg-gray-800",children:[(0,s.jsx)("option",{value:"",children:"Unassigned"}),i.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]},e.id)})}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(o.$,{onClick:r,children:"Done"})})]})]})})}function eP(e){let{bookmarks:a,onBookmarkClick:r,onFavorite:l,loading:i,selectedCategory:n,selectedFolder:d,onCategoryChange:c}=e,[m,h]=(0,t.useState)(""),[g,p]=(0,t.useState)(!1),[f,b]=(0,t.useState)(!1),[v,k]=(0,t.useState)(null),[N,w]=(0,t.useState)(!1),[C,S]=(0,t.useState)(new Set),[T,F]=(0,t.useState)(()=>{let e=[{id:"ideas-inspiration",name:"Ideas & Inspiration",description:"Future concepts and creative sparks",color:"border-yellow-200 bg-yellow-50/50 dark:border-yellow-800 dark:bg-yellow-900/10",icon:e_.A,iconName:"Lightbulb",bookmarkIds:[],order:1},{id:"learning-queue",name:"Learning Queue",description:"Educational resources and tutorials to study",color:"border-blue-200 bg-blue-50/50 dark:border-blue-800 dark:bg-blue-900/10",icon:eE.A,iconName:"BookOpen",bookmarkIds:[],order:2},{id:"current-focus",name:"Current Focus",description:"Active projects and immediate priorities",color:"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10",icon:eD.A,iconName:"Timer",bookmarkIds:[],order:3},{id:"completed",name:"Completed",description:"Finished projects and accomplished goals",color:"border-purple-200 bg-purple-50/50 dark:border-purple-800 dark:bg-purple-900/10",icon:E.A,iconName:"CheckCircle",bookmarkIds:[],order:4},{id:"reference-library",name:"Reference Library",description:"Documentation and long-term resources",color:"border-indigo-200 bg-indigo-50/50 dark:border-indigo-800 dark:bg-indigo-900/10",icon:H.A,iconName:"Archive",bookmarkIds:[],order:5}];{let e=localStorage.getItem("timeline-segments");if(e)try{return JSON.parse(e).map(e=>{let a=eR.find(a=>a.name===e.iconName);return{...e,icon:a?a.icon:ey.A}})}catch(e){}}return e});(0,t.useEffect)(()=>{localStorage.setItem("timeline-segments",JSON.stringify(T))},[T]);let D=e=>{F(a=>a.filter(a=>a.id!==e))},L=e=>{k(e),w(!0),null==r||r(e)},I=e=>{S(a=>{let r=new Set(a);return r.has(e)?r.delete(e):r.add(e),r})},B=(0,t.useMemo)(()=>a.filter(e=>{var a;let r=e.title.toLowerCase().includes(m.toLowerCase())||e.url.toLowerCase().includes(m.toLowerCase())||e.description&&e.description.toLowerCase().includes(m.toLowerCase()),s=!n||"all"===n||(null==(a=e.folder)?void 0:a.name.toLowerCase())===n.toLowerCase(),t=!d||e.folder_id===d.id;return r&&s&&t}),[a,m,n,d]),O=(0,t.useMemo)(()=>{let e=new Set(T.flatMap(e=>e.bookmarkIds));return B.filter(a=>!e.has(a.id))},[B,T]),R=e=>{try{return new URL(e).hostname.replace("www.","")}catch(e){return"Invalid URL"}},U=e=>{let a=R(e);return"https://www.google.com/s2/favicons?domain=".concat(a,"&sz=32")},z=(0,t.useMemo)(()=>T.sort((e,a)=>e.order-a.order).map(e=>{let a=B.filter(a=>e.bookmarkIds.includes(a.id)),r=e.icon,t=C.has(e.id),i=a.length>10,n=t?a:a.slice(0,10);return{title:e.name,content:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color),children:(0,s.jsx)(r,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:a.length}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>D(e.id),className:"h-6 w-6 p-0 text-gray-400 hover:text-red-500",children:(0,s.jsx)(V.A,{className:"h-3 w-3"})})]})]}),0===a.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(r,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{className:"text-sm",children:"No bookmarks assigned"}),(0,s.jsx)("p",{className:"text-xs",children:'Use "Manage Timeline" to add bookmarks'})]}):(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(ep.N,{children:n.map((e,a)=>(0,s.jsx)(ez,{bookmark:e,onFavorite:l,onClick:L,index:a},e.id))}),i&&(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>I(e.id),className:"w-full mt-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eB.A,{className:"h-4 w-4 mr-1"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eO.A,{className:"h-4 w-4 mr-1"}),"Show ",a.length-10," More"]})})]})]})}}),[T,B,D,l,C,L]);return i?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"}),(0,s.jsx)("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-96 animate-pulse"})]}),(0,s.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded w-64 animate-pulse"})]}),(0,s.jsx)("div",{className:"space-y-8",children:[void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 animate-pulse"}),(0,s.jsx)("div",{className:"space-y-3",children:[void 0,void 0].map((e,a)=>(0,s.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"},a))})]},a))})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(n||d)&&c&&(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>c("all"),className:"p-2",children:(0,s.jsx)(ev.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d?"Timeline - ".concat(d.name):n&&"all"!==n?"Timeline - ".concat(n):"Timeline View"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:d?"Timeline view of bookmarks in ".concat(d.name," folder"):n&&"all"!==n?"Timeline view of ".concat(n," bookmarks"):"Organize bookmarks by timeline segments representing your workflow stages"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[d&&(0,s.jsxs)(_.E,{variant:"secondary",className:"px-3 py-1",children:[(0,s.jsx)(x.A,{className:"h-3 w-3 mr-1"}),d.name," (",B.length,")"]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"flex items-center space-x-2",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Add Segment"})]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>b(!0),className:"flex items-center space-x-2",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Manage Timeline"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(eg.p,{placeholder:"Search bookmarks...",value:m,onChange:e=>h(e.target.value),className:"pl-9 w-64"})]})]})]}),(0,s.jsx)("div",{className:"max-w-none -mt-2",children:(0,s.jsx)(eF,{data:z})}),O.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center space-x-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-orange-500"}),(0,s.jsxs)("span",{children:["Unassigned Bookmarks (",O.length,")"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[O.slice(0,8).map(e=>(0,s.jsx)(eh.Zp,{className:"p-3 bg-orange-50/50 dark:bg-orange-900/10 border-orange-200 dark:border-orange-800 cursor-pointer hover:bg-orange-100/50 dark:hover:bg-orange-900/20 transition-colors",onClick:()=>L(e),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:[(0,s.jsx)("img",{src:U(e.url),alt:"",className:"w-5 h-5",onError:e=>{var a;e.currentTarget.style.display="none",null==(a=e.currentTarget.nextElementSibling)||a.classList.remove("hidden")}}),(0,s.jsx)(ey.A,{className:"w-4 h-4 text-gray-500 hidden"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:R(e.url)})]})]})},e.id)),O.length>8&&(0,s.jsx)(eh.Zp,{className:"p-3 bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 flex items-center justify-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["+",O.length-8," more"]})})]})]}),(0,s.jsx)(e$,{isOpen:g,onClose:()=>p(!1),onCreateSegment:e=>{let a={...e,id:"segment-".concat(Date.now()),bookmarkIds:[],order:T.length+1};F(e=>[...e,a])}}),(0,s.jsx)(eM,{isOpen:f,onClose:()=>b(!1),bookmarks:B,segments:T,onAssignBookmark:(e,a)=>{F(r=>r.map(r=>r.id===a?{...r,bookmarkIds:[...r.bookmarkIds.filter(a=>a!==e),e]}:{...r,bookmarkIds:r.bookmarkIds.filter(a=>a!==e)}))},onRemoveBookmark:(e,a)=>{F(r=>r.map(r=>r.id===a?{...r,bookmarkIds:r.bookmarkIds.filter(a=>a!==e)}:r))}}),(0,s.jsx)(ea.F,{bookmark:v,folders:[],tags:[],isOpen:N,onClose:()=>{w(!1),k(null)},onUpdated:e=>{console.log("Bookmark updated:",e)}})]})}var eV=r(35695),eJ=r(75143),eH=r(50402),eG=r(78266),eY=r(48021),eZ=r(44020),eq=r(13052),eW=r(92138);function eK(e){let{bookmark:a,onBookmarkClick:r,onFavorite:t,isDragging:l,index:i}=e,{attributes:n,listeners:d,setNodeRef:c,transform:m,transition:x}=(0,eH.gl)({id:a.id}),g={transform:eG.Ks.Transform.toString(m),transition:x};return(0,s.jsxs)(eu.P.div,{ref:c,style:g,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*i},className:"group relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl border border-gray-200/60 dark:border-gray-700/60 hover:border-blue-300/60 dark:hover:border-blue-600/60 transition-all duration-300 hover:shadow-lg cursor-pointer ".concat(l?"shadow-2xl scale-105 opacity-75 z-50":""),children:[(0,s.jsx)("div",{...n,...d,className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1 rounded opacity-0 group-hover:opacity-100 transition-all duration-200 cursor-grab active:cursor-grabbing hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,s.jsx)(eY.A,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsxs)("div",{className:"p-6 pl-12 flex items-center justify-between",onClick:()=>null==r?void 0:r(a),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"w-12 h-12 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-600 rounded-xl overflow-hidden flex-shrink-0 border border-gray-200/60 dark:border-gray-600/60 group-hover:shadow-lg transition-all duration-300",children:(0,el.q)(a.url)?(0,s.jsx)("div",{className:"w-8 h-8 object-contain rounded bg-cover bg-center",style:{backgroundImage:"url(".concat((0,el.q)(a.url),")")}}):(0,s.jsx)(ey.A,{className:"w-6 h-6 text-blue-500 dark:text-blue-400"})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg line-clamp-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300",children:a.title}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm line-clamp-2 mt-1",children:a.description||"No description available"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full",children:(0,el.S)(a.url)}),(0,s.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:(e=>{if(!e)return"Unknown date";try{let a=new Date(e),r=new Date,s=Math.abs(r.getTime()-a.getTime()),t=Math.ceil(s/864e5);if(1===t)return"Today";if(2===t)return"Yesterday";if(t<=7)return"".concat(t-1," days ago");if(t<=30)return"".concat(Math.floor((t-1)/7)," weeks ago");if(t<=365)return"".concat(Math.floor((t-1)/30)," months ago");return"".concat(Math.floor((t-1)/365)," years ago")}catch(e){return"Unknown date"}})(a.created_at)})]})]})})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-all duration-200",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),null==t||t(a)},className:"rounded-full hover:scale-110 transition-all duration-200 ".concat(a.is_favorite?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-red-500"),children:(0,s.jsx)(b.A,{className:"h-4 w-4 ".concat(a.is_favorite?"fill-current":"")})}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),window.open(a.url,"_blank")},className:"rounded-full text-gray-400 hover:text-blue-500 hover:scale-110 transition-all duration-200",children:(0,s.jsx)(h.A,{className:"h-4 w-4"})}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"rounded-full text-gray-400 hover:text-gray-600 hover:scale-110 transition-all duration-200",children:(0,s.jsx)(eZ.A,{className:"h-4 w-4"})})]})]})]})}function eQ(e){var a;let{bookmarks:r,onBookmarkClick:l,onFavorite:i,loading:n,onReorder:d}=e,c=(0,eV.useRouter)(),[m,h]=(0,t.useState)(r),[g,u]=(0,t.useState)(""),[p,f]=(0,t.useState)(null),[b,j]=(0,t.useState)(new Set),v=(0,eJ.FR)((0,eJ.MS)(eJ.AN),(0,eJ.MS)(eJ.uN,{coordinateGetter:eH.JR}));(0,t.useEffect)(()=>{h(r)},[r]);let k=(0,t.useMemo)(()=>{let e=m.filter(e=>{var a;return e.title.toLowerCase().includes(g.toLowerCase())||(null==(a=e.description)?void 0:a.toLowerCase().includes(g.toLowerCase()))||e.url.toLowerCase().includes(g.toLowerCase())}),a=new Map;return e.forEach(e=>{var r;let s=(null==(r=e.folder)?void 0:r.name)||"Uncategorized";a.has(s)||a.set(s,[]),a.get(s).push(e)}),Array.from(a.entries()).map(e=>{let[a,r]=e;return{id:a.toLowerCase().replace(/\s+/g,"-"),name:a,bookmarks:r.sort((e,a)=>new Date(a.created_at||0).getTime()-new Date(e.created_at||0).getTime()),count:r.length}})},[m,g]),N=e=>{let a=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");c.push("/category/".concat(a))},w=e=>{j(a=>{let r=new Set(a);return r.has(e)?r.delete(e):r.add(e),r})},C=m.length,A=m.filter(e=>e.is_favorite).length;return n?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-950 dark:via-gray-900 dark:to-blue-950/30",children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-8 max-w-6xl",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"LIST VIEW - ALL BOOKMARKS"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Click folder names to explore • Use arrows to expand/collapse content"})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:C})," bookmarks"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:A})," favorites"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:k.length})," folders"]})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(eg.p,{placeholder:"Search bookmarks...",value:g,onChange:e=>u(e.target.value),className:"pl-9 w-64"})]})]})]}),(0,s.jsxs)(eJ.Mp,{sensors:v,collisionDetection:eJ.fp,onDragStart:e=>{f(e.active.id)},onDragEnd:e=>{let{active:a,over:r}=e;if(r&&a.id!==r.id){let e=m.find(e=>e.id===a.id),l=m.find(e=>e.id===r.id);if(e&&l){var s,t;if((null==(s=e.folder)?void 0:s.id)===(null==(t=l.folder)?void 0:t.id)){let e=m.findIndex(e=>e.id===a.id),s=m.findIndex(e=>e.id===r.id);if(-1!==e&&-1!==s){let a=(0,eH.be)(m,e,s);h(a),null==d||d(a)}}}}f(null)},children:[(0,s.jsx)("div",{className:"space-y-6",children:k.map((e,a)=>(0,s.jsxs)(eu.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-blue-500/10 to-purple-500/10 dark:from-blue-900/20 dark:to-purple-900/20 backdrop-blur-sm rounded-2xl border border-blue-200/30 dark:border-blue-700/30 hover:from-blue-500/15 hover:to-purple-500/15 transition-all duration-300 hover:shadow-lg group",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 flex-1 cursor-pointer",onClick:()=>N(e.name),children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl text-white shadow-lg group-hover:shadow-xl transition-shadow duration-300",children:(0,s.jsx)(x.A,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300",children:e.name.toUpperCase()}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[e.count," bookmark",1!==e.count?"s":""," • Click to explore"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(_.E,{className:"bg-white/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-xl font-semibold",children:e.count}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),w(e.id)},className:"rounded-xl hover:bg-white/50 dark:hover:bg-gray-700/50 transition-all duration-200",children:b.has(e.id)?(0,s.jsx)(eO.A,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}):(0,s.jsx)(eq.A,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),(0,s.jsx)(eW.A,{className:"h-6 w-6 text-gray-500 dark:text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors duration-300"})]})]}),(0,s.jsx)(ep.N,{children:b.has(e.id)&&(0,s.jsx)(eu.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden pl-4",children:(0,s.jsx)(eH.gB,{items:e.bookmarks.map(e=>e.id),strategy:eH._G,children:(0,s.jsx)("div",{className:"space-y-3",children:e.bookmarks.map((e,a)=>(0,s.jsx)(eK,{bookmark:e,onBookmarkClick:l,onFavorite:i,isDragging:p===e.id,index:a},e.id))})})})})]},e.id))}),(0,s.jsx)(eJ.Hd,{children:p?(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-4 opacity-90",children:(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:null==(a=m.find(e=>e.id===p))?void 0:a.title})}):null})]}),0===k.length&&(0,s.jsxs)(eu.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900/20 dark:to-purple-900/20 rounded-2xl flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(x.A,{className:"w-10 h-10 text-blue-500 dark:text-blue-400"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No bookmarks found"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:g?'No bookmarks match "'.concat(g,'"'):"Start by adding some bookmarks to organize them in folders."})]})]})}var eX=r(13717),e0=r(58257);function e2(e){let a,{bookmarks:r,folders:l,tags:i,onBookmarkUpdated:n,onBookmarkDeleted:d,onCreateFolder:m,onEditFolder:u,onDeleteFolder:p,onAddBookmarkToFolder:f}=e,[b,j]=(0,t.useState)(null),[y,v]=(0,t.useState)(null),[k,N]=(0,t.useState)(!1),[w,C]=(0,t.useState)(!1),S=e=>r.filter(a=>a.folder_id===e).length+l.filter(a=>a.parent_id===e).reduce((e,a)=>e+S(a.id),0),T=e=>{j(e)},F=e=>{v(e),N(!0)},E=async e=>{try{let a={...e,is_favorite:!e.is_favorite};n(a),X.oR.success(a.is_favorite?"Added to favorites":"Removed from favorites")}catch(e){console.error("Failed to toggle favorite:",e),X.oR.error("Failed to update bookmark")}},D=async e=>{if(window.confirm("Are you sure you want to delete this bookmark?"))try{d(e),X.oR.success("Bookmark deleted")}catch(e){console.error("Failed to delete bookmark:",e),X.oR.error("Failed to delete bookmark")}},L=e=>{v(e),C(!0)},I=e=>e.color||"#3b82f6",B=e=>{let a=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16);return(.299*a+.587*r+.114*parseInt(e.slice(5,7),16))/255>.5?"#000000":"#ffffff"},O=b?(a=b.id,r.filter(e=>e.folder_id===a)):[];return b?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 pb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>{j(null)},className:"flex items-center space-x-2 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)(ev.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Back to Folders"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg shadow-sm",style:{backgroundColor:I(b)},children:(0,s.jsx)(x.A,{className:"h-5 w-5",style:{color:B(I(b))}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:b.name.toUpperCase()}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:b.description||"Compact view of ".concat(b.name," bookmarks")})]})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2 bg-gray-50 dark:bg-gray-800/50 px-3 py-2 rounded-lg border",children:(0,s.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:[O.length," bookmark",1!==O.length?"s":""]})})]}),0===O.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600",children:(0,s.jsx)(x.A,{className:"w-full h-full"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bookmarks Yet"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This folder is empty. Add some bookmarks to get started."}),(0,s.jsxs)(o.$,{onClick:()=>f(b.id),children:[(0,s.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Add Bookmark"]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3",children:O.map(e=>(0,s.jsxs)(eh.Zp,{className:"group hover:shadow-lg transition-all duration-200 hover:scale-[1.02] border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 cursor-pointer",onClick:()=>L(e),children:[(0,s.jsx)(eh.aR,{className:"p-3 pb-2",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.favicon_url?(0,s.jsx)(em.default,{src:e.favicon_url,alt:"",width:16,height:16,className:"w-4 h-4 rounded flex-shrink-0"}):(0,s.jsx)("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded flex-shrink-0"}),(0,s.jsx)(eh.ZB,{className:"text-sm font-semibold truncate text-gray-900 dark:text-white",children:e.title})]}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:a=>{a.stopPropagation(),E(e)},children:(0,s.jsx)(g.A,{className:"h-3 w-3 ".concat(e.is_favorite?"fill-red-500 text-red-500":"text-gray-400")})})]})}),(0,s.jsxs)(eh.Wu,{className:"p-3 pt-0 space-y-2",children:[e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:e.description}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 truncate font-mono",children:new URL(e.url).hostname}),e.tags&&e.tags.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.slice(0,2).map(e=>(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs px-2 py-0 h-5",children:e.name},e.id)),e.tags.length>2&&(0,s.jsxs)(_.E,{variant:"secondary",className:"text-xs px-2 py-0 h-5",children:["+",e.tags.length-2]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)(o.$,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs hover:bg-blue-50 dark:hover:bg-blue-900/20",onClick:a=>{a.stopPropagation(),window.open(e.url,"_blank")},children:[(0,s.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Visit"]}),(0,s.jsxs)(o.$,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs hover:bg-gray-50 dark:hover:bg-gray-800",onClick:a=>{a.stopPropagation(),F(e)},children:[(0,s.jsx)(eX.A,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:a=>{a.stopPropagation(),D(e.id)},children:(0,s.jsx)(W.A,{className:"h-3 w-3"})})]})]})]},e.id))}),(0,s.jsx)(ea.F,{bookmark:y,folders:l,tags:i,isOpen:w,onClose:()=>{C(!1),v(null)},onUpdated:e=>{n(e),v(e)}})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 pb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"COMPACT VIEW"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Browse your folders in a compact, efficient layout"})]}),(0,s.jsxs)(o.$,{onClick:m,className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Create Folder"})]})]}),0===l.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 text-gray-300 dark:text-gray-600",children:(0,s.jsx)(x.A,{className:"w-full h-full"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Folders Yet"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Create your first folder to organize your bookmarks in a compact view."}),(0,s.jsxs)(o.$,{onClick:m,className:"bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Create Your First Folder"]})]}):(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-3",children:l.map(e=>{let a=S(e.id),r=I(e),t=B(r);return(0,s.jsxs)(eh.Zp,{className:"group cursor-pointer hover:shadow-lg transition-all duration-200 hover:scale-105 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",onClick:()=>T(e),children:[(0,s.jsx)(eh.aR,{className:"p-3 pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg shadow-sm",style:{backgroundColor:r},children:(0,s.jsx)(x.A,{className:"h-5 w-5",style:{color:t}})}),(0,s.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:a=>{a.stopPropagation(),u(e)},children:(0,s.jsx)(eX.A,{className:"h-3 w-3"})}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:a=>{a.stopPropagation(),p(e.id)},children:(0,s.jsx)(W.A,{className:"h-3 w-3"})})]})]})}),(0,s.jsxs)(eh.Wu,{className:"p-3 pt-0 space-y-2",children:[(0,s.jsx)(eh.ZB,{className:"text-sm font-semibold text-gray-900 dark:text-white line-clamp-1",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-1",children:[(0,s.jsxs)(_.E,{variant:"outline",className:"text-xs px-2 py-0 h-5",children:[a," item",1!==a?"s":""]}),(0,s.jsx)(eq.A,{className:"h-3 w-3 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})]})]})]},e.id)})}),(0,s.jsx)(c.lG,{open:k,onOpenChange:N,children:(0,s.jsxs)(c.Cf,{className:"max-w-2xl",children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:"Edit Bookmark"})}),y&&(0,s.jsx)(e0.H,{bookmark:y,folders:l,onSubmit:e=>{n(e),N(!1),v(null),X.oR.success("Bookmark updated successfully")},onCancel:()=>{N(!1),v(null)}})]})})]})}function e1(e){var a;let{bookmark:r,folders:l,tags:i,onSubmit:n,onCancel:d}=e,[c,m]=(0,t.useState)({title:(null==r?void 0:r.title)||"",url:(null==r?void 0:r.url)||"",description:(null==r?void 0:r.description)||"",folder_id:(null==r?void 0:r.folder_id)?r.folder_id:"no-category",priority:(null==r?void 0:r.priority)||"medium",notes:(null==r?void 0:r.notes)||"",selectedTags:(null==r||null==(a=r.tags)?void 0:a.map(e=>e.name))||[]}),[x,h]=(0,t.useState)(""),[g,u]=(0,t.useState)(!1),p=()=>{x.trim()&&!c.selectedTags.includes(x.trim())&&(m(e=>({...e,selectedTags:[...e.selectedTags,x.trim()]})),h(""))},f=e=>{m(a=>({...a,selectedTags:a.selectedTags.filter(a=>a!==e)}))},b=async e=>{try{return new URL(e),{title:e,description:"",favicon_url:""}}catch(e){return null}},j=async e=>{e.preventDefault(),u(!0);try{if(!c.url)return void X.oR.error("URL is required");let e=null;r||(e=await b(c.url));let a={title:c.title.trim()||(null==e?void 0:e.title)||c.url,url:c.url,description:c.description.trim(),folder_id:"no-category"===c.folder_id?null:c.folder_id,favicon_url:(null==e?void 0:e.favicon_url)||null,priority:c.priority,notes:c.notes.trim()};if(r){let e={...r,...a,tags:c.selectedTags.map(e=>({id:"tag-".concat(e),name:e,color:null,user_id:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}))};n(e)}else{let e={id:Date.now().toString(),...a,user_id:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visited_at:null,visit_count:0,is_favorite:!1,is_archived:!1,screenshot_url:null,folder:null,tags:c.selectedTags.map(e=>({id:"tag-".concat(e),name:e,color:null,user_id:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}))};n(e)}X.oR.success(r?"Bookmark updated":"Bookmark created")}catch(e){console.error("Error saving bookmark:",e),X.oR.error("Failed to save bookmark")}finally{u(!1)}};return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Add a new website to your bookmark collection."}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"title",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),(0,s.jsx)(eg.p,{id:"title",value:c.title,onChange:e=>m(a=>({...a,title:e.target.value})),placeholder:"Website title",className:"mt-1 w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"url",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"URL"}),(0,s.jsx)(eg.p,{id:"url",type:"url",value:c.url,onChange:e=>m(a=>({...a,url:e.target.value})),placeholder:"https://example.com",className:"mt-1 w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"description",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),(0,s.jsx)(er.T,{id:"description",value:c.description,onChange:e=>m(a=>({...a,description:e.target.value})),placeholder:"Brief description of the website",rows:3,className:"mt-1 w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"category",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),(0,s.jsxs)(P.l6,{value:c.folder_id,onValueChange:e=>m(a=>({...a,folder_id:e})),children:[(0,s.jsx)(P.bq,{className:"mt-1 w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:(0,s.jsx)(P.yv,{placeholder:"Select category"})}),(0,s.jsxs)(P.gC,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[(0,s.jsx)(P.eb,{value:"no-category",children:"No category"}),l.map(e=>(0,s.jsx)(P.eb,{value:e.id,className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"priority",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Priority"}),(0,s.jsxs)(P.l6,{value:c.priority,onValueChange:e=>m(a=>({...a,priority:e})),children:[(0,s.jsx)(P.bq,{className:"mt-1 w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:(0,s.jsx)(P.yv,{placeholder:"Select priority"})}),(0,s.jsx)(P.gC,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[{value:"critical",label:"Critical"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}].map(e=>(0,s.jsx)(P.eb,{value:e.value,className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"tags",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tags"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)(eg.p,{id:"tags",value:x,onChange:e=>h(e.target.value),onKeyDown:e=>{("Enter"===e.key||","===e.key)&&(e.preventDefault(),p())},placeholder:"tag1, tag2, tag3",className:"w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),c.selectedTags.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:c.selectedTags.map((e,a)=>(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[e,(0,s.jsx)("button",{type:"button",onClick:()=>f(e),className:"ml-1 text-blue-600 hover:text-blue-800 dark:text-blue-300 dark:hover:text-blue-100",children:(0,s.jsx)(V.A,{className:"h-3 w-3"})})]},a))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(es.J,{htmlFor:"notes",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notes"}),(0,s.jsx)(er.T,{id:"notes",value:c.notes,onChange:e=>m(a=>({...a,notes:e.target.value})),placeholder:"Additional notes or comments",rows:4,className:"mt-1 w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white resize-none"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(o.$,{type:"button",variant:"outline",onClick:d,className:"px-6 py-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Cancel"}),(0,s.jsx)(o.$,{type:"submit",disabled:g,className:"px-6 py-2 bg-black dark:bg-white text-white dark:text-black hover:bg-gray-800 dark:hover:bg-gray-200",children:g?"Adding...":"Add Bookmark"})]})]})]})}function e4(e){let{open:a,onOpenChange:r,bookmark:t,folders:l,tags:i,onSubmit:n}=e;return(0,s.jsx)(c.lG,{open:a,onOpenChange:r,children:(0,s.jsxs)(c.Cf,{className:"max-w-2xl max-h-[85vh] p-0 overflow-hidden flex flex-col",children:[(0,s.jsx)(c.c7,{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:(0,s.jsx)(c.L3,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t?"Edit Bookmark":"Add New Bookmark"})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600 scrollbar-track-transparent",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(e1,{bookmark:t,folders:l,tags:i,onSubmit:e=>{n(e),r(!1)},onCancel:()=>{r(!1)}})})})]})})}var e3=r(52596),e5=r(39688);function e6(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,e5.QP)((0,e3.$)(a))}let e8=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:e6("rounded-xl border bg-card text-card-foreground shadow",r),...t})});e8.displayName="Card";let e7=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)("div",{ref:a,className:e6("p-6 pt-0",r),...t})});function e9(e){let{bookmarks:a}=e,r=a.length,t=new Date().getMonth(),l=new Date().getFullYear(),i=a.filter(e=>{if(!e.created_at)return!1;let a=new Date(e.created_at);return a.getMonth()===t&&a.getFullYear()===l}).length,n=a.filter(e=>e.is_favorite).length,o=a.reduce((e,a)=>e+(a.visit_count||0),0),d=[{name:"Total Bookmarks",value:r.toString(),change:"+".concat(Math.max(0,i)),percentageChange:i>0?"+".concat(Math.round(i/Math.max(1,r-i)*100),"%"):"0%",changeType:"positive",icon:ej.A,color:"hsl(217.2 91.2% 59.8%)"},{name:"This Month",value:"+".concat(i),change:"".concat(i),percentageChange:i>0?"+".concat(Math.round(i/Math.max(1,r)*100),"%"):"0%",changeType:"positive",icon:eL.A,color:"hsl(142.1 76.2% 36.3%)"},{name:"Total Visits",value:o.toString(),change:"".concat(o),percentageChange:o>0?"+0%":"0%",changeType:o>0?"positive":"neutral",icon:f.A,color:"hsl(262.1 83.3% 57.8%)"},{name:"Favorites",value:n.toString(),change:"".concat(n),percentageChange:n>0?"".concat(Math.round(n/Math.max(1,r)*100),"%"):"0%",changeType:n>0?"positive":"neutral",icon:g.A,color:"hsl(45.4 93.4% 47.5%)"}];return(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6",children:(0,s.jsx)("dl",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 w-full",children:d.map(e=>{let a=e.icon;return(0,s.jsx)(e8,{className:"p-0 overflow-hidden border shadow-lg bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 hover:shadow-xl transition-shadow duration-200",children:(0,s.jsxs)(e7,{className:"p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-muted-foreground",children:e.name}),(0,s.jsx)("div",{className:"w-10 h-10 flex items-center justify-center rounded-lg",style:{backgroundColor:e.color+"15",border:"1px solid ".concat(e.color,"25")},children:(0,s.jsx)(a,{className:"h-5 w-5",style:{color:e.color}})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("dd",{className:"text-3xl font-bold text-foreground",children:e.value}),(0,s.jsxs)("dd",{className:"flex items-center space-x-2 text-sm",children:[(0,s.jsx)("span",{className:e6("positive"===e.changeType?"text-green-600 dark:text-green-500":"text-muted-foreground","font-medium"),children:e.percentageChange}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"of total"})]})]})]}),(0,s.jsx)("div",{className:"mt-4 h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{backgroundColor:e.color,width:"".concat(Math.min(100,Math.max(5,parseInt(e.value.replace("+",""))/Math.max(1,r)*100)),"%")}})})]})},e.name)})})})}e7.displayName="CardContent";var ae=r(57340),aa=r(56287);function ar(e){let{folder:a,bookmarkCount:r,onEdit:l,onDelete:n,onAddBookmark:d,onDrop:c,onDragOver:m,onClick:h,disableLink:g=!1}=e,[u,p]=(0,t.useState)(!1),f=e=>{e.preventDefault(),p(!0),m(e)},b=e=>{e.preventDefault();let a=e.currentTarget.getBoundingClientRect(),r=e.clientX,s=e.clientY;(r<a.left||r>a.right||s<a.top||s>a.bottom)&&p(!1)},j=e=>{e.preventDefault(),p(!1);try{let r=e.dataTransfer.getData("application/json");if(r){let e=JSON.parse(r);c(a.id,e)}}catch(e){console.error("Error handling drop:",e)}},y=a.color||"#3b82f6",v=(e=>{let a=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16);return(.299*a+.587*r+.114*parseInt(e.slice(5,7),16))/255>.5?"#000000":"#ffffff"})(y);return g?(0,s.jsx)(eh.Zp,{className:"\n          relative group cursor-pointer border-2 transition-all duration-200 hover:shadow-lg\n          min-h-[200px] flex flex-col\n          ".concat(u?"border-blue-500 bg-blue-50 dark:bg-blue-950/20 scale-105":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600","\n        "),onDragOver:f,onDragLeave:b,onDrop:j,onClick:e=>{g&&(e.preventDefault(),null==h||h())},children:(0,s.jsxs)(eh.Wu,{className:"p-6 flex-1 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg shadow-sm",style:{backgroundColor:y},children:(0,s.jsx)(x.A,{className:"h-8 w-8",style:{color:v}})}),(0,s.jsxs)(M.rI,{children:[(0,s.jsx)(M.ty,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8 p-0",onClick:e=>e.preventDefault(),children:(0,s.jsx)(eZ.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(M.SQ,{align:"end",className:"w-48",children:[(0,s.jsxs)(M._2,{onClick:e=>{e.preventDefault(),l(a)},children:[(0,s.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Edit Folder"]}),(0,s.jsxs)(M._2,{onClick:e=>{e.preventDefault(),d(a.id)},children:[(0,s.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Add Bookmark"]}),(0,s.jsxs)(M._2,{onClick:e=>{e.preventDefault(),n(a.id)},className:"text-red-600 dark:text-red-400",children:[(0,s.jsx)(W.A,{className:"h-4 w-4 mr-2"}),"Delete Folder"]})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:a.name.toUpperCase()}),a.description&&(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3 flex-1",children:a.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-auto pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(ed.A,{className:"h-4 w-4 mr-1"}),(0,s.jsxs)("span",{className:"text-sm",children:[r," ",1===r?"bookmark":"bookmarks"]})]}),u&&(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:"Drop here"})]})]})]})}):(0,s.jsx)(i(),{href:"/category/".concat(a.name.toLowerCase().replace(/\s+/g,"-")),children:(0,s.jsx)(eh.Zp,{className:"\n          relative group cursor-pointer border-2 transition-all duration-200 hover:shadow-lg\n          min-h-[200px] flex flex-col\n          ".concat(u?"border-blue-500 bg-blue-50 dark:bg-blue-950/20 scale-105":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600","\n        "),onDragOver:f,onDragLeave:b,onDrop:j,children:(0,s.jsxs)(eh.Wu,{className:"p-6 flex-1 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg shadow-sm",style:{backgroundColor:y},children:(0,s.jsx)(x.A,{className:"h-8 w-8",style:{color:v}})}),(0,s.jsxs)(M.rI,{children:[(0,s.jsx)(M.ty,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8 p-0",onClick:e=>e.preventDefault(),children:(0,s.jsx)(eZ.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(M.SQ,{align:"end",className:"w-48",children:[(0,s.jsxs)(M._2,{onClick:e=>{e.preventDefault(),l(a)},children:[(0,s.jsx)(aa.A,{className:"h-4 w-4 mr-2"}),"Edit Folder"]}),(0,s.jsxs)(M._2,{onClick:e=>{e.preventDefault(),d(a.id)},children:[(0,s.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Add Bookmark"]}),(0,s.jsxs)(M._2,{onClick:e=>{e.preventDefault(),n(a.id)},className:"text-red-600 dark:text-red-400",children:[(0,s.jsx)(W.A,{className:"h-4 w-4 mr-2"}),"Delete Folder"]})]})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2",children:a.name.toUpperCase()}),a.description&&(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3 flex-1",children:a.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-auto pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(ed.A,{className:"h-4 w-4 mr-1"}),(0,s.jsxs)("span",{className:"text-sm",children:[r," ",1===r?"bookmark":"bookmarks"]})]}),u&&(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:"Drop here"})]})]})]})})})}function as(e){let{folders:a,bookmarks:r,onCreateFolder:l,onEditFolder:i,onDeleteFolder:n,onAddBookmarkToFolder:c,onDropBookmarkToFolder:m,onBookmarkUpdated:x,onBookmarkDeleted:h,onOpenDetail:g,currentFolderId:u,onFolderNavigate:p}=e,f=u?a.find(e=>e.id===u):null,b=u?a.filter(e=>e.parent_id===u):a.filter(e=>!e.parent_id),j=u?r.filter(e=>e.folder_id===u):[],y=e=>r.filter(a=>a.folder_id===e).length+a.filter(a=>a.parent_id===e).reduce((e,a)=>e+y(a.id),0),v=e=>{e.preventDefault()},k=e=>{p(e)},N=(()=>{if(!u)return[];let e=[],r=a.find(e=>e.id===u);for(;r;)e.unshift(r),r=r.parent_id?a.find(e=>e.id===r.parent_id):void 0;return e})();return(0,s.jsxs)("div",{className:"space-y-6",children:[u&&(0,s.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("button",{onClick:()=>p(null),className:"flex items-center hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:[(0,s.jsx)(ae.A,{className:"h-4 w-4 mr-1"}),"All Folders"]}),N.map((e,a)=>(0,s.jsxs)(t.Fragment,{children:[(0,s.jsx)(eq.A,{className:"h-4 w-4"}),a===N.length-1?(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.name.toUpperCase()}):(0,s.jsx)("button",{onClick:()=>p(e.id),className:"hover:text-gray-900 dark:hover:text-gray-200 transition-colors",children:e.name.toUpperCase()})]},e.id))]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f?f.name.toUpperCase():"FOLDERS"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:f?f.description||"Contents of ".concat(f.name," folder"):"Organize your bookmarks into folders"})]}),(0,s.jsxs)(o.$,{onClick:l,className:"flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),"Create Folder"]})]}),b.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:f?"SUBFOLDERS":"FOLDERS"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:b.map(e=>(0,s.jsx)(ar,{folder:e,bookmarkCount:y(e.id),onEdit:i,onDelete:n,onAddBookmark:c,onDrop:m,onDragOver:v,onClick:()=>k(e.id),disableLink:!0},e.id))})]}),j.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"BOOKMARKS"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>{let t=r.reduce((e,a)=>e+(a.visit_count||0),0);return(0,s.jsx)(d.P,{bookmark:e,onUpdated:x,onDeleted:()=>h(e.id),onOpenDetail:()=>g(e),folders:a,totalBookmarkVisits:t},e.id)})})]}),!u&&0===b.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 text-gray-300 dark:text-gray-600",children:(0,s.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:(0,s.jsx)("path",{d:"M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"NO FOLDERS YET"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-sm mx-auto",children:"Create your first folder to organize your bookmarks by category or project."}),(0,s.jsxs)(o.$,{onClick:l,className:"flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),"Create Your First Folder"]})]}),u&&0===b.length&&0===j.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 text-gray-300 dark:text-gray-600",children:(0,s.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:(0,s.jsx)("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"FOLDER IS EMPTY"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-sm mx-auto",children:"This folder doesn't contain any bookmarks or subfolders yet."}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,s.jsxs)(o.$,{onClick:l,variant:"outline",className:"flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),"Create Subfolder"]}),(0,s.jsxs)(o.$,{onClick:()=>c(u),className:"flex items-center gap-2",children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),"Add Bookmark"]})]})]})]})}var at=r(17951),al=r(17580),ai=r(71007),an=r(17576),ao=r(48136),ad=r(14395),ac=r(66932),am=r(85213),ax=r(95488),ah=r(44940),ag=r(42355),au=r(5196);function ap(e){let{folder:a,level:r}=e,{attributes:t,listeners:l,setNodeRef:i,transform:n,transition:o,isDragging:d}=(0,eH.gl)({id:a.id}),c={transform:eG.Ks.Transform.toString(n),transition:o,opacity:d?.5:1};return(0,s.jsxs)("div",{ref:i,style:c,...t,...l,className:"\n        flex items-center gap-3 p-3 rounded-lg border bg-white dark:bg-slate-800 \n        cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-all\n        ".concat(d?"scale-105 z-50":"","\n      "),children:[(0,s.jsx)(eY.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.color||"#6b7280"}}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.name}),(0,s.jsx)(_.E,{variant:"outline",className:"ml-auto text-xs",children:a.bookmark_count||0})]})}function af(e){let{section:a,folders:r,isEditing:t,onEditToggle:l,onTitleChange:i,editingTitle:n,onEditingTitleChange:d}=e;return(0,s.jsxs)(eh.Zp,{className:"mb-4",children:[(0,s.jsx)(eh.aR,{className:"pb-3 ".concat(a.gradient," text-white"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(a.icon,{className:"w-5 h-5"}),t?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eg.p,{value:n,onChange:e=>d(e.target.value),className:"text-white bg-white/20 border-white/30 placeholder-white/70 text-sm py-1 px-2 h-auto",placeholder:"Section title"}),(0,s.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>i(n),className:"text-white hover:bg-white/20 p-1 h-auto",children:(0,s.jsx)(au.A,{className:"w-3 h-3"})}),(0,s.jsx)(o.$,{size:"sm",variant:"ghost",onClick:l,className:"text-white hover:bg-white/20 p-1 h-auto",children:(0,s.jsx)(V.A,{className:"w-3 h-3"})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eh.ZB,{className:"text-sm font-bold tracking-wider",children:a.title}),(0,s.jsx)(o.$,{size:"sm",variant:"ghost",onClick:l,className:"text-white hover:bg-white/20 p-1 h-auto ml-2",children:(0,s.jsx)(aa.A,{className:"w-3 h-3"})})]})]}),(0,s.jsx)(_.E,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:r.length})]})}),(0,s.jsx)(eh.Wu,{className:"p-4 min-h-[120px] bg-gray-50/50 dark:bg-slate-900/50",children:0===r.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-20 text-gray-500 dark:text-gray-400 text-sm",children:"Drop folders here"}):(0,s.jsx)(eH.gB,{items:r.map(e=>e.id),strategy:eH._G,children:(0,s.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,s.jsx)(ap,{folder:e,level:a.id},e.id))})})})]})}function ab(e){let{folders:a,assignments:r,onAssignmentsChange:l,isOpen:i,onToggle:n}=e,[d,c]=(0,t.useState)(null),[m,x]=(0,t.useState)([{id:"director",title:"DIRECTOR",icon:at.A,color:"purple",gradient:"bg-gradient-to-r from-purple-600 to-blue-600"},{id:"teams",title:"TEAMS",icon:al.A,color:"emerald",gradient:"bg-gradient-to-r from-emerald-600 to-teal-600"},{id:"collaborators",title:"COLLABORATORS",icon:ai.A,color:"orange",gradient:"bg-gradient-to-r from-orange-600 to-red-600"}]),[h,g]=(0,t.useState)(null),[u,p]=(0,t.useState)(""),f=(0,eJ.FR)((0,eJ.MS)(eJ.AN,{activationConstraint:{distance:8}}),(0,eJ.MS)(eJ.uN,{coordinateGetter:eH.JR})),b=e=>r.filter(a=>a.level===e).sort((e,a)=>e.order-a.order).map(e=>e.folderId).map(e=>a.find(a=>a.id===e)).filter(Boolean),y=()=>{let e=new Set(r.map(e=>e.folderId));return a.filter(a=>!e.has(a.id))},v=e=>{let a=m.find(a=>a.id===e);a&&(g(e),p(a.title))},k=(e,a)=>{x(r=>r.map(r=>r.id===e?{...r,title:a}:r)),g(null),p("")},N=d?a.find(e=>e.id===d):null;return i?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(j.A,{className:"w-6 h-6 text-blue-600"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Hierarchy Management"})]}),(0,s.jsx)(o.$,{onClick:n,variant:"outline",children:"Close"})]}),(0,s.jsxs)(eJ.Mp,{sensors:f,collisionDetection:eJ.fp,onDragStart:e=>{let{active:a}=e;c(a.id)},onDragEnd:e=>{var a;let{active:s,over:t}=e;if(c(null),!t)return;let i=s.id,n=t.id,o=null==(a=m.find(e=>e.id===n))?void 0:a.id;if(o){let e=r.filter(e=>e.folderId!==i),a=Math.max(0,...e.filter(e=>e.level===o).map(e=>e.order),-1)+1;e.push({folderId:i,level:o,order:a}),l(e);return}let d=r.find(e=>e.folderId===i),x=r.find(e=>e.folderId===n);if(d&&x&&d.level===x.level){let e=d.level,a=r.filter(a=>a.level===e),s=a.findIndex(e=>e.folderId===i),t=a.findIndex(e=>e.folderId===n),o=(0,eH.be)(a,s,t).map((e,a)=>({...e,order:a}));l([...r.filter(a=>a.level!==e),...o])}},children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Organizational Levels"}),m.map(e=>(0,s.jsx)(eH.gB,{items:[e.id,...b(e.id).map(e=>e.id)],strategy:eH._G,children:(0,s.jsx)("div",{"data-id":e.id,className:"min-h-[140px] border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-1",children:(0,s.jsx)(af,{section:e,folders:b(e.id),isEditing:h===e.id,onEditToggle:()=>v(e.id),onTitleChange:a=>k(e.id,a),editingTitle:u,onEditingTitleChange:p})})},e.id))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Unassigned Folders"}),(0,s.jsx)(eh.Zp,{children:(0,s.jsx)(eh.Wu,{className:"p-4 min-h-[400px]",children:0===y().length?(0,s.jsx)("div",{className:"flex items-center justify-center h-40 text-gray-500 dark:text-gray-400",children:"All folders are assigned"}):(0,s.jsx)(eH.gB,{items:y().map(e=>e.id),strategy:eH._G,children:(0,s.jsx)("div",{className:"space-y-2",children:y().map(e=>(0,s.jsx)(ap,{folder:e,level:"teams"},e.id))})})})})]})]}),(0,s.jsx)(eJ.Hd,{children:N?(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-white dark:bg-slate-800 shadow-lg",children:[(0,s.jsx)(eY.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:N.color||"#6b7280"}}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:N.name})]}):null})]}),(0,s.jsx)("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,s.jsx)("strong",{children:"Instructions:"})," Drag folders between sections to organize your hierarchy. Click the edit icon to rename section titles. Folders in higher levels will appear above those in lower levels in the organizational chart."]})})]})})}):null}function aj(e){var a;let{folders:r,bookmarks:l,onCreateFolder:i,onEditFolder:n,onDeleteFolder:d,onAddBookmarkToFolder:c,onDropBookmarkToFolder:m,onBookmarkUpdated:h,onBookmarkDeleted:g,onOpenDetail:u,currentFolderId:p,onFolderNavigate:f,selectedFolder:v}=e,[k,N]=(0,t.useState)([]),[w,C]=(0,t.useState)(!1),[S,T]=(0,t.useState)({}),F=[{name:"Crown",icon:at.A},{name:"Users",icon:al.A},{name:"User",icon:ai.A},{name:"Briefcase",icon:an.A},{name:"Target",icon:ef.A},{name:"Star",icon:b.A},{name:"Building",icon:ao.A},{name:"Lightbulb",icon:e_.A},{name:"Zap",icon:eb.A}],_=[{name:"Purple-Blue",bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",accent:"#8b5cf6"},{name:"Emerald-Teal",bg:"bg-emerald-50",border:"border-emerald-200",text:"text-emerald-700",accent:"#10b981"},{name:"Orange-Red",bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-700",accent:"#f97316"},{name:"Blue-Indigo",bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",accent:"#3b82f6"},{name:"Pink-Rose",bg:"bg-pink-50",border:"border-pink-200",text:"text-pink-700",accent:"#ec4899"},{name:"Amber-Yellow",bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",accent:"#f59e0b"},{name:"Violet-Purple",bg:"bg-violet-50",border:"border-violet-200",text:"text-violet-700",accent:"#8b5cf6"},{name:"Cyan-Sky",bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-700",accent:"#06b6d4"}],[E,D]=(0,t.useState)([{id:"director",title:"DIRECTOR",iconName:"Crown",colorName:"Purple-Blue",order:0},{id:"teams",title:"TEAMS",iconName:"Users",colorName:"Emerald-Teal",order:1},{id:"collaborators",title:"COLLABORATORS",iconName:"User",colorName:"Orange-Red",order:2}]),[L,I]=(0,t.useState)(!1),[B,O]=(0,t.useState)(""),[R,U]=(0,t.useState)("Crown"),[z,$]=(0,t.useState)("Purple-Blue"),[P,J]=(0,t.useState)(null),[H,G]=(0,t.useState)(""),[Y,Z]=(0,t.useState)("name"),[q,W]=(0,t.useState)("asc"),[K,Q]=(0,t.useState)("all"),[X,ee]=(0,t.useState)("all");(0,t.useEffect)(()=>{let e=localStorage.getItem("folder-hierarchy-assignments");e&&N(JSON.parse(e))},[]);let ea=e=>{let a=F.find(a=>a.name===e);return a?a.icon:at.A},er=e=>_.find(a=>a.name===e)||_[0],es=e=>{D(a=>a.filter(a=>a.id!==e).map((e,a)=>({...e,order:a})))},et=e=>{J(e)},el=e=>{e.preventDefault()},ei=(e,a)=>{if(e.preventDefault(),null===P||P===a)return void J(null);let r=[...E],s=r[P];r.splice(P,1),r.splice(a,0,s),D(r.map((e,a)=>({...e,order:a}))),J(null)},en=e=>k.filter(a=>a.level===e).sort((e,a)=>e.order-a.order).map(e=>e.folderId).map(e=>r.find(a=>a.id===e)).filter(Boolean),eo=()=>{let e=new Set(k.map(e=>e.folderId));return r.filter(a=>!e.has(a.id))},ed=e=>e.color||"#3b82f6",ec=e=>{let a=e.replace("#",""),r=parseInt(a.substr(0,2),16),s=parseInt(a.substr(2,2),16);return(.299*r+.587*s+.114*parseInt(a.substr(4,2),16))/255>.5?"#000000":"#ffffff"},em=p?r.filter(e=>e.parent_id===p):r.filter(e=>!e.parent_id),ex=p?l.filter(e=>e.folder_id===p):[],eu=e=>({bookmarks:l.filter(a=>a.folder_id===e).length,folders:r.filter(a=>a.parent_id===e).length}),ep=p?r.find(e=>e.id===p):null,ey=e=>{f(e)},ev=e=>{u(e)},ek=()=>k.map(e=>({folderId:e.folderId,levelId:e.level})),eN=e=>S[e]||1,ew=(e,a)=>{T(r=>({...r,[e]:a}))},eC=(e,a)=>{let r=(eN(a)-1)*5;return e.slice(r,r+5)},eA=e=>Math.ceil(e/5),eS=(0,t.useMemo)(()=>{let e=r;if(H.trim()){let a=H.toLowerCase();e=e.filter(e=>{var r;return e.name.toLowerCase().includes(a)||(null==(r=e.description)?void 0:r.toLowerCase().includes(a))})}if("all"!==X){let a=new Map(ek().map(e=>[e.folderId,e.levelId]));e="unassigned"===X?e.filter(e=>!a.has(e.id)):e.filter(e=>a.get(e.id)===X)}return e.sort((e,a)=>{let r,s;switch(Y){case"name":case"alphabetical":default:r=e.name.toLowerCase(),s=a.name.toLowerCase();break;case"bookmarks":r=eu(e.id).bookmarks,s=eu(a.id).bookmarks;break;case"recent":r=new Date(e.updated_at||e.created_at||Date.now()).getTime(),s=new Date(a.updated_at||a.created_at||Date.now()).getTime()}return"number"==typeof r&&"number"==typeof s?"desc"===q?s-r:r-s:"desc"===q?s.toString().localeCompare(r.toString()):r.toString().localeCompare(s.toString())}),e},[r,H,X,Y,q,k]),eT=(0,t.useMemo)(()=>{let e=l;if(H.trim()){let a=H.toLowerCase();e=e.filter(e=>{var r;return e.title.toLowerCase().includes(a)||(null==(r=e.description)?void 0:r.toLowerCase().includes(a))||e.url.toLowerCase().includes(a)})}return e},[l,H]),eF=(0,t.useMemo)(()=>{let e=new Map(ek().map(e=>[e.folderId,e.levelId])),a=eS.filter(a=>"director"===e.get(a.id)).length,r=eS.filter(a=>"teams"===e.get(a.id)).length,s=eS.filter(a=>"collaborators"===e.get(a.id)).length,t=eS.filter(a=>!e.has(a.id)).length,l=eT.length;return{directorFolders:a,teamsFolders:r,collaboratorsFolders:s,unassignedFolders:t,totalFolders:eS.length,totalBookmarks:l}},[eS,eT,k]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"relative min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/30 dark:from-gray-950 dark:via-gray-900 dark:to-blue-950/30",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 py-8 max-w-7xl",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"text-center mb-16",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 shadow-xl mb-6",children:(0,s.jsx)(ad.A,{className:"w-12 h-12 text-white"})}),(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-2xl px-8 py-6 shadow-lg inline-block border-2 border-blue-200 dark:border-blue-800",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v?"HIERARCHY VIEW - ".concat(v.name.toUpperCase()):"ORGANIZATIONAL HIERARCHY VIEW"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:v?"Hierarchical view of ".concat(v.name," folder contents"):"Manage and visualize your folder organization across hierarchical levels"})]})]})}),(0,s.jsxs)("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-2xl border border-gray-200/60 dark:border-gray-700/60 p-6 mb-8 shadow-lg",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"HIERARCHY MANAGEMENT"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Filter and organize your folders across organizational levels"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:eF.directorFolders})," director"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-emerald-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:eF.teamsFolders})," teams"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:eF.collaboratorsFolders})," collaborators"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:eF.unassignedFolders})," unassigned"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 dark:text-white",children:eF.totalBookmarks})," bookmarks"]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(eg.p,{placeholder:"Search folders and bookmarks...",value:H,onChange:e=>G(e.target.value),className:"pl-9"})]}),(0,s.jsxs)(M.rI,{children:[(0,s.jsx)(M.ty,{asChild:!0,children:(0,s.jsxs)(o.$,{variant:"outline",className:"min-w-40",children:[(0,s.jsx)(ac.A,{className:"h-4 w-4 mr-2"}),"all"===X?"All Levels":"unassigned"===X?"Unassigned":(null==(a=E.find(e=>e.id===X))?void 0:a.title)||"Filter",(0,s.jsx)(eO.A,{className:"h-4 w-4 ml-2"})]})}),(0,s.jsxs)(M.SQ,{align:"end",className:"w-48",children:[(0,s.jsx)(M.hO,{checked:"all"===X,onCheckedChange:()=>ee("all"),children:"All Levels"}),(0,s.jsx)(M.mB,{}),E.map(e=>(0,s.jsxs)(M.hO,{checked:X===e.id,onCheckedChange:()=>ee(e.id),children:[t.createElement(ea(e.iconName),{className:"h-4 w-4 mr-2"}),e.title]},e.id)),(0,s.jsx)(M.mB,{}),(0,s.jsx)(M.hO,{checked:"unassigned"===X,onCheckedChange:()=>ee("unassigned"),children:"Unassigned"})]})]}),(0,s.jsxs)(M.rI,{children:[(0,s.jsx)(M.ty,{asChild:!0,children:(0,s.jsxs)(o.$,{variant:"outline",className:"min-w-40",children:["asc"===q?(0,s.jsx)(am.A,{className:"h-4 w-4 mr-2"}):(0,s.jsx)(ax.A,{className:"h-4 w-4 mr-2"}),"Sort by ","name"===Y?"Name":"bookmarks"===Y?"Bookmarks":"recent"===Y?"Recent":"Alphabetical",(0,s.jsx)(eO.A,{className:"h-4 w-4 ml-2"})]})}),(0,s.jsxs)(M.SQ,{align:"end",className:"w-48",children:[(0,s.jsx)(M._2,{onClick:()=>Z("name"),children:"Sort by Name"}),(0,s.jsx)(M._2,{onClick:()=>Z("bookmarks"),children:"Sort by Bookmark Count"}),(0,s.jsx)(M._2,{onClick:()=>Z("recent"),children:"Sort by Recent"}),(0,s.jsx)(M._2,{onClick:()=>Z("alphabetical"),children:"Sort Alphabetically"}),(0,s.jsx)(M.mB,{}),(0,s.jsx)(M._2,{onClick:()=>W("asc"===q?"desc":"asc"),children:"asc"===q?"Descending":"Ascending"})]})]}),(0,s.jsxs)(o.$,{onClick:()=>C(!0),className:"flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Manage Hierarchy"})]})]})]}),!p&&em.length>0&&(0,s.jsxs)("div",{className:"space-y-12 relative",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"w-px h-16 border-l-2 border-dotted border-gray-300 dark:border-gray-600"})}),(0,s.jsxs)("div",{className:"relative flex",children:[(0,s.jsxs)("div",{className:"w-24 flex flex-col mr-6 sticky top-0",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-2 h-10",children:(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>I(!L),className:"p-1 h-6 w-6",children:(0,s.jsx)(ah.A,{className:"w-3 h-3"})})}),E.sort((e,a)=>e.order-a.order).map((e,a)=>{let r=ea(e.iconName),t=er(e.colorName);return(0,s.jsxs)("div",{className:"flex-1 min-h-64 flex items-center justify-center border-r-2 relative ".concat(t.border," ").concat(t.bg," transition-all duration-200 ").concat(P===a?"opacity-50":""),draggable:L,onDragStart:()=>et(a),onDragOver:el,onDrop:e=>ei(e,a),children:[L&&(0,s.jsx)("div",{className:"absolute top-2 right-2 cursor-move",children:(0,s.jsx)(eY.A,{className:"w-3 h-3 text-gray-400"})}),L&&E.length>1&&(0,s.jsx)("button",{onClick:()=>es(e.id),className:"absolute top-2 left-2 p-1 rounded-full bg-red-100 hover:bg-red-200 transition-colors",children:(0,s.jsx)(V.A,{className:"w-3 h-3 text-red-600"})}),(0,s.jsx)("div",{className:"transform -rotate-90 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"".concat(t.text," px-3 py-2 flex items-center gap-1 border-2 ").concat(t.border," bg-transparent rounded-md"),children:[(0,s.jsx)(r,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"text-sm font-semibold tracking-wide",children:e.title})]})})]},e.id)}),L&&(0,s.jsx)("div",{className:"mt-4 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(eg.p,{placeholder:"Section title",value:B,onChange:e=>O(e.target.value),className:"text-xs h-6"}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsxs)(M.rI,{children:[(0,s.jsx)(M.ty,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"outline",size:"sm",className:"p-1 h-6 w-8",children:t.createElement(ea(R),{className:"w-3 h-3"})})}),(0,s.jsx)(M.SQ,{children:F.map(e=>(0,s.jsxs)(M._2,{onClick:()=>U(e.name),children:[(0,s.jsx)(e.icon,{className:"w-4 h-4 mr-2"}),e.name]},e.name))})]}),(0,s.jsxs)(M.rI,{children:[(0,s.jsx)(M.ty,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"outline",size:"sm",className:"p-1 h-6 w-8",children:(0,s.jsx)("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:er(z).accent}})})}),(0,s.jsx)(M.SQ,{children:_.map(e=>(0,s.jsxs)(M._2,{onClick:()=>$(e.name),children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full border mr-2",style:{backgroundColor:e.accent}}),e.name]},e.name))})]})]}),(0,s.jsxs)(o.$,{onClick:()=>{if(!B.trim())return;let e={id:"section_".concat(Date.now()),title:B.toUpperCase(),iconName:R,colorName:z,order:E.length};D([...E,e]),O(""),U("Crown"),$("Purple-Blue")},size:"sm",disabled:!B.trim(),className:"w-full h-6 text-xs",children:[(0,s.jsx)(A.A,{className:"w-3 h-3 mr-1"}),"Add"]})]})})]}),(0,s.jsx)("div",{className:"flex-1 space-y-20",children:E.map(e=>{let a=[...en(e.id),..."teams"===e.id?eo():[]];return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[e.title," LEVEL (",a.length,")"]}),(0,s.jsxs)(o.$,{onClick:i,variant:"outline",size:"sm",className:"text-sm",children:[(0,s.jsx)(A.A,{className:"w-4 h-4 mr-1"}),"Add Folder"]})]}),a.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:a.map(e=>{let a=eu(e.id),r=ed(e),t=ec(r),i=l.filter(a=>a.folder_id===e.id);return(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full shadow-lg flex items-center justify-center cursor-pointer transform transition-all duration-200 hover:scale-110 hover:shadow-xl border-4 border-white dark:border-slate-700",style:{backgroundColor:r},onClick:()=>ey(e.id),children:(0,s.jsx)(x.A,{className:"w-10 h-10",style:{color:t}})}),(0,s.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-px h-6 border-l-2 border-dotted border-gray-300 dark:border-gray-600"})]}),(0,s.jsx)(eh.Zp,{className:"cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg border-2",style:{borderColor:r},onClick:()=>ey(e.id),children:(0,s.jsxs)(eh.Wu,{className:"px-6 py-4 text-center",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900 dark:text-white",children:e.name.toUpperCase()}),(0,s.jsx)("p",{className:"text-sm font-medium mb-3",style:{color:r},children:a.folders>0?"".concat(a.folders," SUBFOLDER").concat(1!==a.folders?"S":""):"".concat(a.bookmarks," BOOKMARK").concat(1!==a.bookmarks?"S":"")}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:a=>{a.stopPropagation(),c(e.id)},className:"text-xs w-full",style:{borderColor:r,color:r},children:[(0,s.jsx)(A.A,{className:"w-3 h-3 mr-1"}),"Add Bookmark"]})]})}),i.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-px h-8 border-l-2 border-dotted border-gray-300 dark:border-gray-600"}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 w-full max-w-sm bg-gray-50/30 dark:bg-slate-800/30 relative",children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3",children:eC(i,e.id).map(e=>(0,s.jsx)(eh.Zp,{className:"cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg bg-white dark:bg-slate-800",onClick:()=>ev(e),children:(0,s.jsx)(eh.Wu,{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-800 dark:to-blue-900 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(ej.A,{className:"w-4 h-4 text-blue-600 dark:text-blue-300"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:new URL(e.url).hostname})]})]})})},e.id))}),i.length>5&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>ew(e.id,Math.max(1,eN(e.id)-1)),disabled:1===eN(e.id),className:"p-1 h-6 w-6",children:(0,s.jsx)(ag.A,{className:"w-3 h-3"})}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[eN(e.id)," / ",eA(i.length)]}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>ew(e.id,Math.min(eA(i.length),eN(e.id)+1)),disabled:eN(e.id)===eA(i.length),className:"p-1 h-6 w-6",children:(0,s.jsx)(eq.A,{className:"w-3 h-3"})})]})]})]}),0===i.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-px h-8 border-l-2 border-dotted border-gray-300 dark:border-gray-600"}),(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("div",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"No bookmarks yet"})})]})]},e.id)})}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("div",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"No folders in this level yet"})})]},e.id)})})]}),(0,s.jsx)("div",{className:"text-center mt-16",children:(0,s.jsxs)(o.$,{onClick:i,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-8 py-3 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105",children:[(0,s.jsx)(A.A,{className:"w-5 h-5 mr-2"}),"Create New Folder"]})})]}),p&&(0,s.jsxs)("div",{className:"space-y-12",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"w-px h-16 border-l-2 border-dotted border-gray-300 dark:border-gray-600"})}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[em.length>0&&(0,s.jsxs)("div",{className:"mb-16",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"SUBFOLDERS"}),(0,s.jsx)("div",{className:"w-px h-8 border-l-2 border-dotted border-gray-300 dark:border-gray-600 mx-auto"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:em.map(e=>{let a=ed(e),r=ec(a),t=eu(e.id);return(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full shadow-lg flex items-center justify-center cursor-pointer transform transition-all duration-200 hover:scale-110 hover:shadow-xl border-4 border-white dark:border-slate-700",style:{backgroundColor:a},onClick:()=>ey(e.id),children:(0,s.jsx)(x.A,{className:"w-8 h-8",style:{color:r}})}),(0,s.jsx)(eh.Zp,{className:"cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg border-2 w-full",style:{borderColor:a},onClick:()=>ey(e.id),children:(0,s.jsxs)(eh.Wu,{className:"px-4 py-3 text-center",children:[(0,s.jsx)("h3",{className:"font-bold text-base text-gray-900 dark:text-white",children:e.name.toUpperCase()}),(0,s.jsxs)("p",{className:"text-xs font-medium mb-3",style:{color:a},children:[t.bookmarks," BOOKMARK",1!==t.bookmarks?"S":""]}),(0,s.jsxs)(o.$,{variant:"outline",size:"sm",onClick:a=>{a.stopPropagation(),c(e.id)},className:"text-xs w-full",style:{borderColor:a,color:a},children:[(0,s.jsx)(A.A,{className:"w-3 h-3 mr-1"}),"Add Bookmark"]})]})})]},e.id)})})]}),ex.length>0&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"BOOKMARKS"}),(0,s.jsx)("div",{className:"w-px h-8 border-l-2 border-dotted border-gray-300 dark:border-gray-600 mx-auto"})]}),(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 bg-gray-50/30 dark:bg-slate-800/30 max-w-6xl mx-auto",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ex.map(e=>(0,s.jsx)(eh.Zp,{className:"cursor-pointer transform transition-all duration-200 hover:scale-105 hover:shadow-lg bg-white dark:bg-slate-800",onClick:()=>ev(e),children:(0,s.jsx)(eh.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-800 dark:to-blue-900 flex items-center justify-center",children:(0,s.jsx)(ej.A,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h4",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:new URL(e.url).hostname})]})]})})},e.id))})})]}),(0,s.jsx)("div",{className:"text-center mt-12",children:(0,s.jsxs)(o.$,{onClick:()=>c(p),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 py-3 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105",children:[(0,s.jsx)(A.A,{className:"w-5 h-5 mr-2"}),"Add Bookmark to ",null==ep?void 0:ep.name]})}),0===em.length&&0===ex.length&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-32 h-32 mx-auto mb-8 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(ej.A,{className:"w-16 h-16 text-gray-500 dark:text-gray-400"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"EMPTY FOLDER"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"This folder doesn't have any bookmarks yet. Start by adding your first bookmark."}),(0,s.jsxs)(o.$,{onClick:()=>c(p),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-8 py-4 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105",children:[(0,s.jsx)(A.A,{className:"w-6 h-6 mr-2"}),"Add Your First Bookmark"]})]})]})]}),!p&&0===em.length&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-32 h-32 mx-auto mb-8 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center",children:(0,s.jsx)(x.A,{className:"w-16 h-16 text-gray-500 dark:text-gray-400"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"NO FOLDERS YET"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto",children:"Create your first folder to organize your bookmarks in this beautiful organizational structure."}),(0,s.jsxs)(o.$,{onClick:i,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-8 py-4 rounded-xl shadow-lg transform transition-all duration-200 hover:scale-105",children:[(0,s.jsx)(A.A,{className:"w-6 h-6 mr-2"}),"Create Your First Folder"]})]})]})}),(0,s.jsx)(ab,{folders:r,assignments:k,onAssignmentsChange:e=>{N(e),localStorage.setItem("folder-hierarchy-assignments",JSON.stringify(e))},isOpen:w,onToggle:()=>C(!1)})]})}let ay=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#f97316","#06b6d4","#84cc16","#ec4899","#6b7280"];function av(e){let{open:a,onOpenChange:r,folder:l,onSubmit:i}=e,[n,d]=(0,t.useState)({name:"",description:"",color:"#3b82f6"}),[m,x]=(0,t.useState)({});(0,t.useEffect)(()=>{l?d({name:l.name,description:l.description||"",color:l.color||"#3b82f6"}):d({name:"",description:"",color:"#3b82f6"}),x({})},[l,a]);let h=()=>{let e={};return n.name.trim()||(e.name="Folder name is required"),x(e),0===Object.keys(e).length},g=!!l;return(0,s.jsx)(c.lG,{open:a,onOpenChange:r,children:(0,s.jsxs)(c.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:g?"Edit Folder":"Create New Folder"})}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h()&&(i({name:n.name.trim(),description:n.description.trim()||void 0,color:n.color}),r(!1))},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(es.J,{htmlFor:"name",children:["Folder Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(eg.p,{id:"name",type:"text",placeholder:"Enter folder name",value:n.name,onChange:e=>d({...n,name:e.target.value}),className:m.name?"border-red-500":""}),m.name&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:m.name})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(es.J,{htmlFor:"description",children:"Description (optional)"}),(0,s.jsx)(er.T,{id:"description",placeholder:"Enter folder description",value:n.description,onChange:e=>d({...n,description:e.target.value}),rows:3,className:"resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(es.J,{children:"Folder Color"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:ay.map(e=>(0,s.jsx)("button",{type:"button",className:"\n                    w-8 h-8 rounded-full border-2 transition-all duration-200\n                    ".concat(n.color===e?"border-gray-900 dark:border-white scale-110":"border-gray-300 dark:border-gray-600 hover:scale-105","\n                  "),style:{backgroundColor:e},onClick:()=>d({...n,color:e}),title:"Select ".concat(e)},e))}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,s.jsx)("input",{type:"color",value:n.color,onChange:e=>d({...n,color:e.target.value}),className:"w-8 h-8 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),(0,s.jsx)(es.J,{className:"text-sm text-gray-600 dark:text-gray-400",children:"Or choose custom color"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(es.J,{children:"Preview"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:n.color},children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",style:{color:function(e){let a=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16);return(.299*a+.587*r+.114*parseInt(e.slice(5,7),16))/255>.5?"#000000":"#ffffff"}(n.color)},children:(0,s.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:n.name||"Folder Name"}),n.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.description})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,s.jsx)(o.$,{type:"submit",children:g?"Update Folder":"Create Folder"})]})]})]})})}var ak=r(40133),aN=r(20547);let aw=aN.bL,aC=aN.l9;aN.Mz;let aA=t.forwardRef((e,a)=>{let{className:r,align:t="center",sideOffset:l=4,...i}=e;return(0,s.jsx)(aN.ZL,{children:(0,s.jsx)(aN.UC,{ref:a,align:t,sideOffset:l,className:(0,el.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",r),...i})})});aA.displayName=aN.UC.displayName;var aS=r(22346);function aT(e){var a,r,l;let i,{filters:n,onFiltersChange:d}=e,[c,m]=(0,t.useState)(!1),x=[{value:"all",label:"All Content"},{value:"bookmarks",label:"Bookmarks"},{value:"notes",label:"Notes"},{value:"tags",label:"Tags"}],h=[{value:"all",label:"All Contexts"},{value:"personal",label:"Personal"},{value:"work",label:"Work"},{value:"shared",label:"Shared"}],g=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"title",label:"By Title"},{value:"url",label:"By URL"},{value:"recent",label:"Recently Visited"},{value:"visits",label:"Most Visited"},{value:"favorites",label:"Favorites"}],u=(e,a)=>{d({...n,[e]:a})},p=(i=0,"all"!==n.contentType&&i++,"all"!==n.context&&i++,"newest"!==n.sortBy&&i++,i);return(0,s.jsxs)(aw,{open:c,onOpenChange:m,children:[(0,s.jsx)(aC,{asChild:!0,children:(0,s.jsxs)(o.$,{variant:"outline",className:"relative flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)(ac.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Filters"}),p>0&&(0,s.jsx)(_.E,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 p-0 text-xs flex items-center justify-center",children:p})]})}),(0,s.jsx)(aA,{className:"w-80 p-0",align:"start",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm",children:"Filter Bookmarks"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[p>0&&(0,s.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:()=>{d({contentType:"all",context:"all",sortBy:"newest"})},className:"h-7 px-2 text-xs",children:[(0,s.jsx)(ak.A,{className:"h-3 w-3 mr-1"}),"Reset"]}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>m(!1),className:"h-7 w-7 p-0",children:(0,s.jsx)(V.A,{className:"h-3 w-3"})})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Content Type"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-1",children:x.map(e=>(0,s.jsxs)(o.$,{variant:n.contentType===e.value?"default":"ghost",size:"sm",onClick:()=>u("contentType",e.value),className:"h-8 text-xs justify-start",children:[n.contentType===e.value&&(0,s.jsx)(au.A,{className:"h-3 w-3 mr-1"}),e.label]},e.value))})]}),(0,s.jsx)(aS.w,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Context"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-1",children:h.map(e=>(0,s.jsxs)(o.$,{variant:n.context===e.value?"default":"ghost",size:"sm",onClick:()=>u("context",e.value),className:"h-8 text-xs justify-start",children:[n.context===e.value&&(0,s.jsx)(au.A,{className:"h-3 w-3 mr-1"}),e.label]},e.value))})]}),(0,s.jsx)(aS.w,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Sort By"}),(0,s.jsx)("div",{className:"space-y-1",children:g.map(e=>(0,s.jsxs)(o.$,{variant:n.sortBy===e.value?"default":"ghost",size:"sm",onClick:()=>u("sortBy",e.value),className:"w-full h-8 text-xs justify-start",children:[n.sortBy===e.value&&(0,s.jsx)(au.A,{className:"h-3 w-3 mr-1"}),e.label]},e.value))})]})]}),p>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(aS.w,{className:"my-4"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:"Active Filters"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:["all"!==n.contentType&&(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:null==(a=x.find(e=>e.value===n.contentType))?void 0:a.label}),"all"!==n.context&&(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:null==(r=h.find(e=>e.value===n.context))?void 0:r.label}),"newest"!==n.sortBy&&(0,s.jsx)(_.E,{variant:"secondary",className:"text-xs",children:null==(l=g.find(e=>e.value===n.sortBy))?void 0:l.label})]})]})]})]})})]})}function aF(e){let{userId:a,userData:r}=e,{enterSelectionMode:l,isSelectionMode:h}=(0,$.C)(),[g,_]=(0,t.useState)([]),[E,D]=(0,t.useState)([]),[L,I]=(0,t.useState)([]),[B,O]=(0,t.useState)(!0),[R,U]=(0,t.useState)(null),[M,P]=(0,t.useState)("all"),[V,J]=(0,t.useState)([]),[H,G]=(0,t.useState)(""),[Y,Z]=(0,t.useState)(!1),[q,W]=(0,t.useState)(!1),[K,Q]=(0,t.useState)("grid"),[er,es]=(0,t.useState)(null),[et,el]=(0,t.useState)(!1),[ei,en]=(0,t.useState)(!1),[eo,ed]=(0,t.useState)(!1),[ec,em]=(0,t.useState)(null),[eh,eg]=(0,t.useState)(null),[eu,ep]=(0,t.useState)(null),[ef,eb]=(0,t.useState)({contentType:"all",context:"all",sortBy:"newest"}),ej=(0,t.useCallback)(async()=>{try{O(!0),U(null),await m.u.ensureUserProfile("user@example.com","User");let[e,a,r]=await Promise.all([m.u.getBookmarks(),m.u.getFolders(),m.u.getTags()]),s=a;if(0===a.length){let e=[];for(let a of[{name:"DEVELOPMENT",description:"Development tools and resources",color:"#3b82f6",parent_id:null},{name:"DESIGN",description:"Design inspiration and tools",color:"#8b5cf6",parent_id:null},{name:"PRODUCTIVITY",description:"Productivity apps and workflows",color:"#10b981",parent_id:null},{name:"LEARNING",description:"Educational content and courses",color:"#f59e0b",parent_id:null},{name:"ENTERTAINMENT",description:"Entertainment and leisure content",color:"#ef4444",parent_id:null}])try{let r=await m.u.createFolder(a);e.push(r)}catch(e){console.error("Failed to create default folder ".concat(a.name,":"),e)}s=e}_(e),D(s),I(r)}catch(a){console.error("Failed to load data:",a);let e=a instanceof Error?a.message:"Unknown error";U("Failed to load dashboard data: ".concat(e)),X.oR.error("Failed to load dashboard data: ".concat(e))}finally{O(!1)}},[]);(0,t.useEffect)(()=>{ej()},[ej]);let ey=async e=>{try{var a;let r=e.folder_id;if(!r){let e=E.find(e=>"uncategorized"===e.name.toLowerCase());if(!e)try{e=await m.u.createFolder({name:"Uncategorized",description:"Default folder for bookmarks without a category",color:"#6b7280",parent_id:null}),D(a=>[...a,e]),X.oR.success('Created default "Uncategorized" folder')}catch(e){console.error("Failed to create default folder:",e)}r=(null==e?void 0:e.id)||null}let s=await fetch("/api/bookmarks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.url,title:e.title,description:e.description||"",folder_id:r,favicon_url:e.favicon_url,tagIds:(null==(a=e.tags)?void 0:a.map(e=>e.id))||[]})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create bookmark")}let t=await s.json();_(e=>[t,...e]),X.oR.success("Bookmark created successfully")}catch(e){console.error("Failed to create bookmark:",e),X.oR.error(e instanceof Error?e.message:"Failed to create bookmark")}},ev=e=>{_(a=>a.map(a=>a.id===e.id?e:a)),X.oR.success("Bookmark updated successfully")},ek=e=>{_(a=>a.filter(a=>a.id!==e)),el(!1),es(null),X.oR.success("Bookmark deleted successfully")},eN=e=>{es(e),el(!0)},ew=async e=>{try{let a=E.find(e=>"uncategorized"===e.name.toLowerCase());if(!a)try{a=await m.u.createFolder({name:"Uncategorized",description:"Default folder for bookmarks without a category",color:"#6b7280",parent_id:null}),D(e=>[...e,a])}catch(e){console.error("Failed to create default folder:",e)}for(let r of e){let e=r.folderId;!e&&a&&(e=a.id);let s=await fetch("/api/bookmarks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r.url,title:r.title||r.url,description:r.description||"",folder_id:e||null,favicon_url:r.favicon||null,tagIds:r.tagIds||[]})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to import bookmark: ".concat(r.url))}}await ej(),Z(!1),X.oR.success("Successfully imported ".concat(e.length," bookmarks"))}catch(e){throw console.error("Bulk import failed:",e),X.oR.error(e instanceof Error?e.message:"Failed to import bookmarks"),e}},eC=()=>{em(null),ed(!0)},eS=e=>{em(e),ed(!0)},eT=async e=>{try{if(ec){let a=await m.u.updateFolder(ec.id,e);D(e=>e.map(e=>e.id===ec.id?a:e)),X.oR.success("Folder updated successfully")}else{let a=await m.u.createFolder({name:e.name,description:e.description||null,color:e.color||null,parent_id:null});D(e=>[...e,a]),X.oR.success("Folder created successfully")}}catch(e){console.error("Failed to save folder:",e),X.oR.error("Failed to save folder")}},eF=async e=>{if(confirm('Are you sure you want to delete this folder? All bookmarks in this folder will be moved to "No category".'))try{for(let a of g.filter(a=>a.folder_id===e))await m.u.updateBookmark(a.id,{folder_id:null});await m.u.deleteFolder(e),D(a=>a.filter(a=>a.id!==e)),_(a=>a.map(a=>a.folder_id===e?{...a,folder_id:null}:a)),X.oR.success("Folder deleted successfully")}catch(e){console.error("Failed to delete folder:",e),X.oR.error("Failed to delete folder")}},e_=e=>{eg(e),en(!0)},eE=async(e,a)=>{try{await m.u.updateBookmark(a.id,{folder_id:e}),_(r=>r.map(r=>r.id===a.id?{...r,folder_id:e}:r));let r=E.find(a=>a.id===e);X.oR.success("Bookmark moved to ".concat((null==r?void 0:r.name)||"folder"))}catch(e){console.error("Failed to move bookmark:",e),X.oR.error("Failed to move bookmark")}},eD=g.filter(e=>{var a,r,s,t,l,i,n;let o=""===H||e.title.toLowerCase().includes(H.toLowerCase())||(null==(a=e.description)?void 0:a.toLowerCase().includes(H.toLowerCase()))||e.url.toLowerCase().includes(H.toLowerCase()),d="all"===ef.contentType||"bookmarks"===ef.contentType&&!(null!=(t=e.is_archived)&&t)||"notes"===ef.contentType&&e.description&&e.description.length>0||"tags"===ef.contentType&&e.tags&&e.tags.length>0,c="all"===ef.context||"personal"===ef.context&&(!e.folder||e.folder.name.toLowerCase().includes("personal"))||"work"===ef.context&&(null==(r=e.folder)?void 0:r.name.toLowerCase().includes("work"))||"shared"===ef.context&&(null==(s=e.folder)?void 0:s.name.toLowerCase().includes("shared")),m=!0;return"all"!==M&&(m="favorites"===M?null!=(l=e.is_favorite)&&l:(null==(n=e.folder)||null==(i=n.name)?void 0:i.toLowerCase())===M.toLowerCase()),o&&d&&c&&m}).filter(e=>{var a;return 0===V.length||(null==(a=e.tags)?void 0:a.some(e=>V.includes(e.id)))||!1}).sort((e,a)=>{switch(ef.sortBy){case"title":return e.title.localeCompare(a.title);case"url":return e.url.localeCompare(a.url);case"oldest":return new Date(e.created_at||0).getTime()-new Date(a.created_at||0).getTime();case"recent":return(a.last_visited_at?new Date(a.last_visited_at).getTime():0)-(e.last_visited_at?new Date(e.last_visited_at).getTime():0);case"visits":return(a.visit_count||0)-(e.visit_count||0);case"favorites":return!!a.is_favorite-!!e.is_favorite;default:return new Date(a.created_at||0).getTime()-new Date(e.created_at||0).getTime()}}),eL=g.length,eI=g.filter(e=>{if(!e.created_at)return!1;let a=new Date(e.created_at),r=new Date;return a.getMonth()===r.getMonth()&&a.getFullYear()===r.getFullYear()}).length,eB=g.filter(e=>e.is_favorite).length;return(g.reduce((e,a)=>e+(a.visit_count||0),0),B)?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):R?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50 dark:bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(u.A,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Database Connection Error"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:R}),(0,s.jsx)(o.$,{onClick:ej,variant:"outline",children:"Try Again"})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsxs)("div",{className:"".concat(q?"w-16":"w-64"," bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 flex flex-col"),children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[!q&&(0,s.jsx)(i(),{href:"/dashboard",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"BOOKMARKHUB"})}),(0,s.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>W(!q),children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})]}),!q&&(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Your digital workspace"})]}),!q&&(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"NAVIGATION"}),(0,s.jsxs)("nav",{className:"space-y-1",children:[(0,s.jsxs)("button",{onClick:()=>P("all"),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat("all"===M?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,s.jsx)(f.A,{className:"mr-3 h-4 w-4"}),"Dashboard"]}),(0,s.jsxs)("button",{onClick:()=>window.location.href="/analytics",className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,s.jsx)(f.A,{className:"mr-3 h-4 w-4"}),"Analytics"]}),(0,s.jsxs)("button",{onClick:()=>window.location.href="/favorites",className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,s.jsx)(b.A,{className:"mr-3 h-4 w-4"}),"Favorites",(0,s.jsx)("span",{className:"ml-auto bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:eB})]}),(0,s.jsxs)("button",{onClick:()=>window.location.href="/settings",className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,s.jsx)(j.A,{className:"mr-3 h-4 w-4"}),"Settings"]})]})]}),!q&&(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"CATEGORIES"}),(0,s.jsxs)("nav",{className:"space-y-1",children:[(0,s.jsxs)(i(),{href:"/category/all",className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{children:"All"}),(0,s.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:g.length})]}),(0,s.jsxs)(i(),{href:"/category/development",className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{children:"Development"}),(0,s.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:g.filter(e=>{var a,r;return(null==(r=e.folder)||null==(a=r.name)?void 0:a.toLowerCase())==="development"}).length})]}),(0,s.jsxs)(i(),{href:"/category/design",className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{children:"Design"}),(0,s.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:g.filter(e=>{var a,r;return(null==(r=e.folder)||null==(a=r.name)?void 0:a.toLowerCase())==="design"}).length})]}),(0,s.jsxs)(i(),{href:"/category/productivity",className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{children:"Productivity"}),(0,s.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:g.filter(e=>{var a,r;return(null==(r=e.folder)||null==(a=r.name)?void 0:a.toLowerCase())==="productivity"}).length})]}),(0,s.jsxs)(i(),{href:"/category/learning",className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{children:"Learning"}),(0,s.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:g.filter(e=>{var a,r;return(null==(r=e.folder)||null==(a=r.name)?void 0:a.toLowerCase())==="learning"}).length})]}),(0,s.jsxs)(i(),{href:"/category/entertainment",className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{children:"Entertainment"}),(0,s.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:g.filter(e=>{var a,r;return(null==(r=e.folder)||null==(a=r.name)?void 0:a.toLowerCase())==="entertainment"}).length})]}),(0,s.jsxs)(i(),{href:"/category/favorites",className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700",children:[(0,s.jsx)("span",{children:"Favorites"}),(0,s.jsx)("span",{className:"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded-full px-2 py-0.5",children:g.filter(e=>e.is_favorite).length})]})]})]}),!q&&(0,s.jsx)("div",{className:"p-4 flex-1",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total Bookmarks"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:eL})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This Month"}),(0,s.jsxs)("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["+",eI]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Favorites"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-yellow-600 dark:text-yellow-400",children:eB})]})]})}),q&&(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)(o.$,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>W(!1),children:(0,s.jsx)(p.A,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"all"===M?"DASHBOARD":"favorites"===M?"FAVORITES":"development"===M?"DEVELOPMENT":"design"===M?"DESIGN":"productivity"===M?"PRODUCTIVITY":"learning"===M?"LEARNING":"entertainment"===M?"ENTERTAINMENT":M.toUpperCase()})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Welcome, ",r.firstName||r.email,"!"]}),(0,s.jsx)(n.uF,{afterSignOutUrl:"/"})]})]})}),(0,s.jsx)(e9,{bookmarks:g}),(0,s.jsxs)("main",{className:"flex-1 p-6 overflow-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,s.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>W(!q),className:"lg:hidden",children:(0,s.jsx)(p.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search bookmarks, tags, notes...",value:H,onChange:e=>G(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsx)(aT,{filters:ef,onFiltersChange:eb})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg",children:[(0,s.jsx)(o.$,{variant:"grid"===K?"default":"ghost",size:"sm",onClick:()=>Q("grid"),className:"p-2 rounded-r-none border-r border-gray-300 dark:border-gray-600",title:"Grid View",children:(0,s.jsx)(v.A,{className:"h-4 w-4"})}),(0,s.jsx)(o.$,{variant:"list"===K?"default":"ghost",size:"sm",onClick:()=>Q("list"),className:"p-2 rounded-none border-r border-gray-300 dark:border-gray-600",title:"List View",children:(0,s.jsx)(k.A,{className:"h-4 w-4"})}),(0,s.jsx)(o.$,{variant:"folder"===K?"default":"ghost",size:"sm",onClick:()=>Q("folder"),className:"p-2 rounded-none border-r border-gray-300 dark:border-gray-600",title:"Folder View",children:(0,s.jsx)(x.A,{className:"h-4 w-4"})}),(0,s.jsx)(o.$,{variant:"org-chart"===K?"default":"ghost",size:"sm",onClick:()=>Q("org-chart"),className:"p-2 rounded-none border-r border-gray-300 dark:border-gray-600",title:"Organizational Chart View",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})}),(0,s.jsx)(o.$,{variant:"compact"===K?"default":"ghost",size:"sm",onClick:()=>Q("compact"),className:"p-2 rounded-none border-r border-gray-300 dark:border-gray-600",title:"Compact View",children:(0,s.jsx)(N.A,{className:"h-4 w-4"})}),(0,s.jsx)(o.$,{variant:"kanban"===K?"default":"ghost",size:"sm",onClick:()=>Q("kanban"),className:"p-2 rounded-none border-r border-gray-300 dark:border-gray-600",title:"Kanban View",children:(0,s.jsx)(w.A,{className:"h-4 w-4"})}),(0,s.jsx)(o.$,{variant:"timeline"===K?"default":"ghost",size:"sm",onClick:()=>Q("timeline"),className:"p-2 rounded-l-none",title:"Timeline View",children:(0,s.jsx)(C.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)(o.$,{onClick:()=>en(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-black",children:[(0,s.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Add Bookmark"]}),(0,s.jsxs)(o.$,{variant:"outline",onClick:l,className:"border-blue-500 text-blue-600 hover:bg-blue-50",disabled:h,title:h?"Selection mode is active":"Enter selection mode to bulk delete, move, or manage bookmarks",children:[(0,s.jsx)(S.A,{className:"h-4 w-4 mr-2"}),h?"Selection Active":"Select"]}),(0,s.jsxs)(c.lG,{open:Y,onOpenChange:Z,children:[(0,s.jsx)(c.zM,{asChild:!0,children:(0,s.jsxs)(o.$,{variant:"outline",children:[(0,s.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Import URLs"]})}),(0,s.jsxs)(c.Cf,{className:"max-w-4xl max-h-[80vh]",children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:"Bulk Import Bookmarks"})}),(0,s.jsx)(ex,{isOpen:Y,onImport:ew,folders:E,tags:L,onClose:()=>Z(!1)})]})]}),(0,s.jsx)(z,{bookmarks:eD,trigger:(0,s.jsxs)(o.$,{variant:"outline",children:[(0,s.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Check Links"]})})]})]}),(0,s.jsx)(ee,{bookmarks:eD,userId:a,onUpdate:ej,folders:E,tags:L}),"folder"===K?(0,s.jsx)(as,{folders:E,bookmarks:g,onCreateFolder:eC,onEditFolder:eS,onDeleteFolder:eF,onAddBookmarkToFolder:e_,onDropBookmarkToFolder:eE,onBookmarkUpdated:ev,onBookmarkDeleted:ek,onOpenDetail:eN,currentFolderId:eu,onFolderNavigate:ep}):"org-chart"===K?(0,s.jsx)(aj,{folders:E,bookmarks:g,onCreateFolder:eC,onEditFolder:eS,onDeleteFolder:eF,onAddBookmarkToFolder:e_,onDropBookmarkToFolder:eE,onBookmarkUpdated:ev,onBookmarkDeleted:ek,onOpenDetail:eN,currentFolderId:eu,onFolderNavigate:ep}):"timeline"===K?(0,s.jsx)(eP,{bookmarks:eD,onBookmarkClick:eN,onFavorite:e=>{ev({...e,is_favorite:!e.is_favorite})},loading:B}):"kanban"===K?(0,s.jsx)(eA,{bookmarks:eD,onBookmarkClick:eN,onFavorite:e=>{ev({...e,is_favorite:!e.is_favorite})},loading:B}):"list"===K?(0,s.jsx)(eQ,{bookmarks:eD,onBookmarkClick:eN,onFavorite:e=>{ev({...e,is_favorite:!e.is_favorite})},onReorder:e=>{_(e)},loading:B}):"compact"===K?(0,s.jsx)(e2,{bookmarks:eD,folders:E,tags:L,onBookmarkUpdated:ev,onBookmarkDeleted:e=>{ek(e)},onCreateFolder:eC,onEditFolder:eS,onDeleteFolder:eF,onAddBookmarkToFolder:e_}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:eD.map(e=>{let a=g.reduce((e,a)=>e+(a.visit_count||0),0);return(0,s.jsx)(d.P,{bookmark:e,onUpdated:ev,onDeleted:()=>ek(e.id),onOpenDetail:()=>eN(e),folders:E,totalBookmarkVisits:a},e.id)})})]})]})]}),(0,s.jsx)(ea.F,{bookmark:er,folders:E,tags:L,isOpen:et,onClose:()=>{el(!1),es(null)},onUpdated:ev}),(0,s.jsx)(e4,{open:ei,onOpenChange:en,folders:E,tags:L,onSubmit:ey}),(0,s.jsx)(av,{open:eo,onOpenChange:ed,folder:ec,onSubmit:eT})]})}function a_(e){let{userId:a,userData:r}=e;return(0,s.jsx)($.W,{children:(0,s.jsx)(aF,{userId:a,userData:r})})}},22346:(e,a,r)=>{"use strict";r.d(a,{w:()=>n});var s=r(95155),t=r(12115),l=r(87489),i=r(59434);let n=t.forwardRef((e,a)=>{let{className:r,orientation:t="horizontal",decorative:n=!0,...o}=e;return(0,s.jsx)(l.b,{ref:a,decorative:n,orientation:t,className:(0,i.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",r),...o})});n.displayName=l.b.displayName},56245:(e,a,r)=>{Promise.resolve().then(r.bind(r,10728))}},e=>{var a=a=>e(e.s=a);e.O(0,[5004,277,7598,7471,1976,941,9046,3877,6766,6874,9824,2058,9362,5076,530,4765,8441,1684,7358],()=>a(56245)),_N_E=e.O()}]);