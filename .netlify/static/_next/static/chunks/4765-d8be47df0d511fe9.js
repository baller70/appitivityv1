"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4765],{7885:(e,t,s)=>{s.d(t,{P:()=>N});var a=s(95155),r=s(12115),i=s(58257),o=s(66695),l=s(30285),n=s(26126),c=s(54165),d=s(5196),m=s(51976),u=s(92657),h=s(13717),x=s(33786),g=s(62525),p=s(27213),f=s(56671),b=s(61976),k=s(27016),v=s(36383),j=s(59434),y=s(66766);function N(e){var t;let{bookmark:s,folders:N,onUpdated:w,onDeleted:C,onOpenDetail:_,totalBookmarkVisits:A}=e,{user:S}=(0,b.Jd)(),{isSignedIn:R}=(0,k.d)(),[z,E]=(0,r.useState)(!1),[F,T]=(0,r.useState)(!1),{isSelectionMode:I,isSelected:P,toggleItem:B,enterSelectionMode:U}=(0,v.C)(),$=async()=>{if(!R||!S)return void f.oR.error("Please sign in to favorite bookmarks");try{T(!0),console.log("Toggling favorite for bookmark:",s.id,"Current favorite status:",s.is_favorite);let e=await fetch("/api/bookmarks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,title:s.title,url:s.url,description:s.description,folder_id:s.folder_id,is_favorite:!s.is_favorite,is_archived:s.is_archived})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to update bookmark")}let t=await e.json();console.log("Updated bookmark result:",t),w({...s,...t}),f.oR.success(t.is_favorite?"❤️ Added to favorites":"\uD83D\uDC94 Removed from favorites")}catch(t){console.error("Failed to toggle favorite:",t);let e=t instanceof Error?t.message:"Unknown error occurred";e.includes("JWT")||e.includes("unauthorized")||e.includes("authentication")?f.oR.error("Authentication expired - please refresh the page"):e.includes("network")||e.includes("fetch")?f.oR.error("Network error - please check your connection"):f.oR.error("Failed to update bookmark: ".concat(e)),e.includes("authentication")||e.includes("unauthorized")||(w({...s,is_favorite:!s.is_favorite}),f.oR.info("Update may have succeeded - page will refresh with latest data"))}finally{T(!1)}},D=async()=>{if(confirm("Are you sure you want to delete this bookmark?"))try{T(!0);let e=await fetch("/api/bookmarks?id=".concat(s.id),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete bookmark")}C(),f.oR.success("Bookmark deleted successfully")}catch(t){console.error("Failed to delete bookmark:",t);let e=t instanceof Error?t.message:"Unknown error occurred";e.includes("JWT")||e.includes("unauthorized")||e.includes("authentication")?f.oR.error("Authentication expired - please refresh the page"):f.oR.error("Failed to delete bookmark: ".concat(e))}finally{T(!1)}},M=async e=>{try{T(!0);let t=await fetch("/api/bookmarks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s.id,title:e.title,url:e.url,description:e.description,folder_id:e.folder_id,is_favorite:e.is_favorite,is_archived:e.is_archived})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update bookmark")}let a=await t.json();w({...s,...a}),f.oR.success("Bookmark updated successfully"),E(!1)}catch(s){console.error("Failed to update bookmark:",s);let t=s instanceof Error?s.message:"Unknown error occurred";t.includes("JWT")||t.includes("unauthorized")||t.includes("authentication")?f.oR.error("Authentication expired - please refresh the page"):(f.oR.error("Failed to update bookmark: ".concat(t)),w(e),E(!1),f.oR.info("Changes saved locally - please refresh to sync"))}finally{T(!1)}},L=P(s.id),O=e=>e.charAt(0).toUpperCase(),q=e=>{try{let t=new URL(e).hostname;if("localhost"===t||t.includes("127.0.0.1")||t.includes("192.168."))return null;return"https://www.google.com/s2/favicons?domain=".concat(t,"&sz=32")}catch(e){return null}},J=A&&0!==A?Math.round((s.visit_count||0)/A*100):0;return console.log("BookmarkCard Debug:",{bookmarkTitle:s.title,bookmarkVisits:s.visit_count,totalBookmarkVisits:A,usagePercentage:J,shouldShow:A&&A>=0}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Zp,{className:(0,j.cn)("group hover:shadow-lg transition-all duration-200 cursor-pointer relative bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",L&&"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-950"),onClick:e=>{I?(e.preventDefault(),B(s.id)):(null==_||_(),f.oR.success("Opening bookmark details"))},onDoubleClick:()=>{I||(U(),B(s.id))},draggable:!0,onDragStart:e=>{e.dataTransfer.setData("application/json",JSON.stringify(s)),e.dataTransfer.effectAllowed="move"},children:[(0,a.jsxs)("div",{className:"absolute top-3 left-3 right-3 flex items-center justify-between z-10",children:[(0,a.jsx)("div",{className:(0,j.cn)("w-4 h-4 border-2 rounded-sm flex items-center justify-center transition-colors cursor-pointer",L?"bg-blue-500 border-blue-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"),onClick:e=>{e.stopPropagation(),B(s.id)},children:L&&(0,a.jsx)(d.A,{className:"w-3 h-3 text-white"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"sm",className:(0,j.cn)("p-1 h-auto w-auto hover:bg-white/80",s.is_favorite&&"hover:bg-red-50"),onClick:e=>{e.stopPropagation(),$()},disabled:F,title:s.is_favorite?"Remove from favorites":"Add to favorites",children:(0,a.jsx)(m.A,{className:(0,j.cn)("h-4 w-4 transition-colors",s.is_favorite?"fill-red-500 text-red-500":"text-gray-400 hover:text-red-500")})}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",className:"p-1 h-auto w-auto hover:bg-white/80",onClick:e=>{e.stopPropagation(),null==_||_(),f.oR.info("Opening bookmark details")},title:"View bookmark details",children:(0,a.jsx)(u.A,{className:"h-4 w-4 text-gray-400 hover:text-blue-500"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",className:"p-1 h-auto w-auto hover:bg-white/80",onClick:e=>{e.stopPropagation(),E(!0),f.oR.info("Opening edit form")},title:"Edit bookmark",children:(0,a.jsx)(h.A,{className:"h-4 w-4 text-gray-400 hover:text-green-500"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",className:"p-1 h-auto w-auto hover:bg-white/80",onClick:e=>{e.stopPropagation();try{window.open(s.url,"_blank"),f.oR.success("Opening website in new tab")}catch(e){console.error("Failed to open bookmark:",e),f.oR.error("Failed to open bookmark")}},title:"Open website in new tab",children:(0,a.jsx)(x.A,{className:"h-4 w-4 text-gray-400 hover:text-blue-500"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",className:"p-1 h-auto w-auto hover:bg-white/80 hover:bg-red-50",onClick:e=>{e.stopPropagation(),D()},disabled:F,title:"Delete bookmark",children:(0,a.jsx)(g.A,{className:"h-4 w-4 text-gray-400 hover:text-red-500"})})]})]}),(0,a.jsxs)(o.Wu,{className:"p-0",children:[(0,a.jsxs)("div",{className:"relative",children:[s.preview_image?(0,a.jsx)(y.default,{src:s.preview_image,alt:"Preview for ".concat(s.title),width:400,height:128,className:"w-full h-32 object-cover rounded-t-lg",onError:e=>{var t;e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")}}):q(s.url)?(0,a.jsxs)("div",{className:"w-full h-32 bg-gray-100 dark:bg-gray-800 rounded-t-lg flex items-center justify-center",children:[(0,a.jsx)(y.default,{src:q(s.url)||"",alt:"Favicon for ".concat(s.title),width:64,height:64,className:"w-16 h-16 object-contain",onError:e=>{var t;e.currentTarget.style.display="none",null==(t=e.currentTarget.nextElementSibling)||t.classList.remove("hidden")}}),(0,a.jsx)("div",{className:"hidden w-12 h-12 bg-gray-600 dark:bg-gray-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xl font-bold text-white",children:O(s.title)})})]}):null,(0,a.jsx)("div",{className:(0,j.cn)("w-full h-32 bg-gray-200 dark:bg-gray-700 rounded-t-lg flex items-center justify-center",(s.preview_image||q(s.url))&&"hidden"),children:(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-600 dark:bg-gray-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xl font-bold text-white",children:O(s.title)})})}),!s.preview_image&&!s.favicon_url&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"p-4 pt-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white mb-1",children:s.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 block mb-3",children:s.url}),s.description&&(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 line-clamp-2",children:s.description}),s.tags&&s.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:s.tags.map(e=>(0,a.jsx)(n.E,{variant:"secondary",className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-2 py-1",children:e.name},e.id))}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,a.jsx)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:(0,a.jsx)("span",{children:(null==(t=s.folder)?void 0:t.name.toUpperCase())||"UNCATEGORIZED"})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-1"}),(0,a.jsxs)("span",{children:[s.visit_count||0," visits"]})]}),void 0!==A&&A>=0&&(0,a.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-1 rounded-full text-xs font-medium",title:"Usage.",children:(0,a.jsxs)("span",{className:"font-bold",children:[J,"%"]})})]})]})]})]}),(0,a.jsx)(c.lG,{open:z,onOpenChange:E,children:(0,a.jsxs)(c.Cf,{className:"max-w-2xl",children:[(0,a.jsx)(c.c7,{children:(0,a.jsx)(c.L3,{children:"Edit Bookmark"})}),(0,a.jsx)(i.H,{bookmark:s,folders:N,onSubmit:M,onCancel:()=>E(!1)})]})})]})}},36383:(e,t,s)=>{s.d(t,{C:()=>l,W:()=>o});var a=s(95155),r=s(12115);let i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)(new Set),[l,n]=(0,r.useState)(!1),c=(0,r.useCallback)(e=>{o(t=>new Set([...t,e]))},[]),d=(0,r.useCallback)(e=>{o(t=>{let s=new Set(t);return s.delete(e),s})},[]),m=(0,r.useCallback)(e=>{o(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[]),u=(0,r.useCallback)(e=>{o(new Set(e.map(e=>e.id)))},[]),h=(0,r.useCallback)(()=>{o(new Set)},[]),x=(0,r.useCallback)(e=>s.has(e),[s]),g=(0,r.useCallback)(e=>e.filter(e=>s.has(e.id)),[s]),p=(0,r.useCallback)(()=>{n(!0)},[]),f=(0,r.useCallback)(()=>{n(!1),o(new Set)},[]),b={selectedIds:s,isSelectionMode:l,selectItem:c,deselectItem:d,toggleItem:m,selectAll:u,deselectAll:h,isSelected:x,selectedCount:s.size,getSelectedItems:g,enterSelectionMode:p,exitSelectionMode:f};return(0,a.jsx)(i.Provider,{value:b,children:t})}function l(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useSelection must be used within a SelectionProvider");return e}},41737:(e,t,s)=>{s.d(t,{F:()=>ex});var a=s(95155),r=s(12115),i=s(54165),o=s(30285),l=s(26126),n=s(66695),c=s(88539),d=s(85057),m=s(72713),u=s(14186),h=s(23861),x=s(69074),g=s(38164),p=s(57434),f=s(33109),b=s(34869),k=s(51976),v=s(36683),j=s(24357),y=s(33786),N=s(92657),w=s(54416),C=s(29869),_=s(4229),A=s(13717),S=s(84616),R=s(85690),z=s(82178),E=s(40133),F=s(381),T=s(75109),I=s(58292),P=s(74979),B=s(17e3),U=s(84109),$=s(66377),D=s(9727),M=s(19144),L=s(17240),O=s(32643),q=s(29621),J=s(28440),W=s(22705),Z=s(92406),H=s(93500),V=s(87325),G=s(67733),Q=s(88702),X=s(56340),Y=s(15968),K=s(89140),ee=s(40224),et=s(87712),es=s(93654),ea=s(48932),er=s(59409);function ei(e){let{content:t,onChange:s,placeholder:r="Start writing your notes...",className:i=""}=e,l=(0,T.hG)({extensions:[I.A.configure({bulletList:{keepMarks:!0,keepAttributes:!1},orderedList:{keepMarks:!0,keepAttributes:!1}}),P.A.configure({placeholder:r}),B.A,U.A.configure({types:["heading","paragraph"]}),$.A],content:t,onUpdate:e=>{let{editor:t}=e;s(t.getHTML())},editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none min-h-[200px] p-4 max-w-none"}}});return l?(0,a.jsxs)("div",{className:"border rounded-lg bg-white dark:bg-gray-900 shadow-sm ".concat(i),children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 rounded-t-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mr-2",children:[(0,a.jsxs)(er.l6,{onValueChange:e=>{switch(e){case"h1":l.chain().focus().toggleHeading({level:1}).run();break;case"h2":l.chain().focus().toggleHeading({level:2}).run();break;case"h3":l.chain().focus().toggleHeading({level:3}).run();break;case"paragraph":l.chain().focus().setParagraph().run()}},children:[(0,a.jsx)(er.bq,{className:"w-28 h-8 text-xs",children:(0,a.jsx)(er.yv,{placeholder:"Style"})}),(0,a.jsxs)(er.gC,{children:[(0,a.jsx)(er.eb,{value:"paragraph",children:"Normal"}),(0,a.jsx)(er.eb,{value:"h1",children:"Heading 1"}),(0,a.jsx)(er.eb,{value:"h2",children:"Heading 2"}),(0,a.jsx)(er.eb,{value:"h3",children:"Heading 3"})]})]}),(0,a.jsxs)(er.l6,{onValueChange:e=>{switch(e){case"small":l.chain().focus().setMark("textStyle",{fontSize:"0.875rem"}).run();break;case"normal":l.chain().focus().setMark("textStyle",{fontSize:"1rem"}).run();break;case"large":l.chain().focus().setMark("textStyle",{fontSize:"1.125rem"}).run();break;case"xl":l.chain().focus().setMark("textStyle",{fontSize:"1.25rem"}).run();break;case"xxl":l.chain().focus().setMark("textStyle",{fontSize:"1.5rem"}).run()}},children:[(0,a.jsx)(er.bq,{className:"w-20 h-8 text-xs",children:(0,a.jsx)(er.yv,{placeholder:"Size"})}),(0,a.jsxs)(er.gC,{children:[(0,a.jsx)(er.eb,{value:"small",children:"Small"}),(0,a.jsx)(er.eb,{value:"normal",children:"Normal"}),(0,a.jsx)(er.eb,{value:"large",children:"Large"}),(0,a.jsx)(er.eb,{value:"xl",children:"X-Large"}),(0,a.jsx)(er.eb,{value:"xxl",children:"XX-Large"})]})]})]}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("bold")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleBold().run(),className:"h-8 w-8 p-0",title:"Bold (Ctrl+B)",children:(0,a.jsx)(D.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("italic")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleItalic().run(),className:"h-8 w-8 p-0",title:"Italic (Ctrl+I)",children:(0,a.jsx)(M.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("underline")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleUnderline().run(),className:"h-8 w-8 p-0",title:"Underline (Ctrl+U)",children:(0,a.jsx)(L.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("strike")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleStrike().run(),className:"h-8 w-8 p-0",title:"Strikethrough",children:(0,a.jsx)(O.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("code")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleCode().run(),className:"h-8 w-8 p-0",title:"Inline Code",children:(0,a.jsx)(q.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("heading",{level:1})?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleHeading({level:1}).run(),className:"h-8 w-8 p-0",title:"Heading 1",children:(0,a.jsx)(J.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("heading",{level:2})?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleHeading({level:2}).run(),className:"h-8 w-8 p-0",title:"Heading 2",children:(0,a.jsx)(W.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("heading",{level:3})?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleHeading({level:3}).run(),className:"h-8 w-8 p-0",title:"Heading 3",children:(0,a.jsx)(Z.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("paragraph")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().setParagraph().run(),className:"h-8 w-8 p-0",title:"Paragraph",children:(0,a.jsx)(H.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive({textAlign:"left"})?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().setTextAlign("left").run(),className:"h-8 w-8 p-0",title:"Align Left",children:(0,a.jsx)(V.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive({textAlign:"center"})?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().setTextAlign("center").run(),className:"h-8 w-8 p-0",title:"Align Center",children:(0,a.jsx)(G.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive({textAlign:"right"})?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().setTextAlign("right").run(),className:"h-8 w-8 p-0",title:"Align Right",children:(0,a.jsx)(Q.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive({textAlign:"justify"})?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().setTextAlign("justify").run(),className:"h-8 w-8 p-0",title:"Justify",children:(0,a.jsx)(X.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("bulletList")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleBulletList().run(),className:"h-8 w-8 p-0",title:"Bullet List",children:(0,a.jsx)(Y.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("orderedList")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleOrderedList().run(),className:"h-8 w-8 p-0",title:"Numbered List",children:(0,a.jsx)(K.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:l.isActive("blockquote")?"default":"ghost",size:"sm",onClick:()=>l.chain().focus().toggleBlockquote().run(),className:"h-8 w-8 p-0",title:"Quote",children:(0,a.jsx)(ee.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>l.chain().focus().setHorizontalRule().run(),className:"h-8 w-8 p-0",title:"Horizontal Rule",children:(0,a.jsx)(et.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-300 dark:bg-gray-600 mx-1"}),(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>l.chain().focus().undo().run(),disabled:!l.can().undo(),className:"h-8 w-8 p-0",title:"Undo (Ctrl+Z)",children:(0,a.jsx)(es.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>l.chain().focus().redo().run(),disabled:!l.can().redo(),className:"h-8 w-8 p-0",title:"Redo (Ctrl+Y)",children:(0,a.jsx)(ea.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"min-h-[200px]",children:(0,a.jsx)(T.$Z,{editor:l,className:"prose prose-sm dark:prose-invert max-w-none [&_.ProseMirror]:outline-none [&_.ProseMirror]:min-h-[200px] [&_.ProseMirror]:p-4 [&_.ProseMirror]:text-sm [&_.ProseMirror]:leading-relaxed [&_.ProseMirror_h1]:text-2xl [&_.ProseMirror_h2]:text-xl [&_.ProseMirror_h3]:text-lg [&_.ProseMirror_p]:text-sm [&_.ProseMirror_blockquote]:border-l-4 [&_.ProseMirror_blockquote]:border-gray-300 [&_.ProseMirror_blockquote]:pl-4 [&_.ProseMirror_blockquote]:italic [&_.ProseMirror_code]:bg-gray-100 [&_.ProseMirror_code]:px-1 [&_.ProseMirror_code]:rounded [&_.ProseMirror_code]:text-sm [&_.ProseMirror_code]:font-mono dark:[&_.ProseMirror_blockquote]:border-gray-600 dark:[&_.ProseMirror_code]:bg-gray-800"})})]}):null}var eo=s(85339),el=s(51154);function en(e){let{className:t="",height:s="600px"}=e,[i,l]=(0,r.useState)(!0),[n,c]=(0,r.useState)(!1),d=()=>{window.open("/notifications-test","_blank","width=1000,height=700,scrollbars=yes,resizable=yes")};return n?(0,a.jsxs)("div",{className:"border rounded-lg p-8 bg-gray-50 dark:bg-gray-800 text-center ".concat(t),children:[(0,a.jsx)(eo.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to Load Notification System"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The notification system couldn't be loaded in this view."}),(0,a.jsxs)(o.$,{onClick:d,className:"mx-auto",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Open in New Window"]})]}):(0,a.jsxs)("div",{className:"relative border rounded-lg bg-gray-50 dark:bg-gray-800 ".concat(t),children:[i&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 dark:bg-gray-800 rounded-lg z-10",style:{height:s},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(el.A,{className:"h-8 w-8 animate-spin text-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading notification system..."})]})}),(0,a.jsx)("iframe",{src:"/notifications-test",className:"w-full border-0 rounded-lg ".concat(i?"opacity-0":"opacity-100"," transition-opacity duration-300"),style:{height:s},title:"Notification System",onLoad:()=>{l(!1),c(!1)},onError:()=>{l(!1),c(!0)},sandbox:"allow-scripts allow-same-origin allow-forms"}),(0,a.jsx)("div",{className:"absolute top-2 right-2 z-20",children:(0,a.jsx)(o.$,{size:"sm",variant:"outline",onClick:d,className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",title:"Open in new window",children:(0,a.jsx)(y.A,{className:"h-3 w-3"})})})]})}s(82620),s(99487),s(41963);var ec=s(75076),ed=s(90530),em=s(55604),eu=s(61976),eh=s(56671);function ex(e){var t;let{bookmark:s,folders:T,tags:I,isOpen:P,onClose:B,onUpdated:U,onBookmarkCreated:$}=e,{user:D}=(0,eu.Jd)(),[M,L]=(0,r.useState)("overview"),[O,q]=(0,r.useState)(1500),[J,W]=(0,r.useState)(!1),[Z,H]=(0,r.useState)(0),[V,G]=(0,r.useState)(""),[Q,X]=(0,r.useState)(""),[Y,K]=(0,r.useState)(25),[ee,et]=(0,r.useState)(1500),[es,ea]=(0,r.useState)(!1),[er,eo]=(0,r.useState)((null==s?void 0:s.description)||""),[el,ex]=(0,r.useState)("<h2>Main Repository Notes</h2><p>This is the main repository hosting platform for all projects. Contains personal and work repositories.</p><ul><li>Personal projects</li><li>Work repositories</li><li>Open source contributions</li></ul><blockquote><p>Remember to check for updates regularly and maintain proper documentation.</p></blockquote>"),[eg,ep]=(0,r.useState)(!1),[ef,eb]=(0,r.useState)(null),[ek,ev]=(0,r.useState)(!1),[ej,ey]=(0,r.useState)([]);(0,r.useEffect)(()=>{(null==s?void 0:s.description)&&eo(s.description)},[null==s?void 0:s.description]),(0,r.useEffect)(()=>{(null==s?void 0:s.preview_image)?eb(s.preview_image):eb(null)},[null==s?void 0:s.preview_image]),(0,r.useEffect)(()=>{let e;return J&&O>0&&(e=setInterval(()=>{q(e=>{let t=e-1;if(H((ee-t)/ee*100),t<=0){W(!1),"Notification"in window&&"granted"===Notification.permission&&new Notification("Timer completed for ".concat(null==s?void 0:s.title,"!"),{body:"".concat(V||"Timer"," session completed!"),icon:"/favicon.ico"});let e="bookmark-focus"===V?"Focus on ".concat(null==s?void 0:s.title):V?V.charAt(0).toUpperCase()+V.slice(1).replace("-"," "):"Timer";eh.oR.success("\uD83C\uDF89 ".concat(e," completed!"))}return t})},1e3)),()=>clearInterval(e)},[J,O,null==s?void 0:s.title,ee,V]),(0,r.useEffect)(()=>{"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission()},[]),(0,r.useEffect)(()=>{(async()=>{if(D&&P)try{let e=new em.U(D.id),t=await e.getBookmarks();ey(t)}catch(e){console.error("Failed to fetch bookmarks:",e)}})()},[D,P]);let eN=()=>{ea(!1),s&&U({...s,description:er})},ew=async()=>{if(!s||!D)return void eh.oR.error("Please sign in to save notes");try{ep(!1),eh.oR.success("Notes saved successfully")}catch(e){console.error("Failed to save notes:",e),eh.oR.error("Failed to save notes")}},eC=async()=>{if(!s||!D)return void eh.oR.error("Please sign in to favorite bookmarks");try{let e=new em.U(D.id);console.log("Modal: Toggling favorite for bookmark:",s.id,"Current favorite status:",s.is_favorite);let t=await e.updateBookmark(s.id,{is_favorite:!s.is_favorite});console.log("Modal: Updated bookmark result:",t),U({...s,...t}),eh.oR.success(t.is_favorite?"❤️ Added to favorites":"\uD83D\uDC94 Removed from favorites")}catch(t){console.error("Failed to update favorite status:",t);let e=t instanceof Error?t.message:"Unknown error occurred";eh.oR.error("Failed to update favorite status: ".concat(e)),U({...s,is_favorite:!s.is_favorite})}},e_=async()=>{if(s)if(navigator.share)try{await navigator.share({title:s.title,url:s.url,text:s.description||"Check out this bookmark: ".concat(s.title)}),eh.oR.success("Bookmark shared successfully")}catch(e){e instanceof Error&&"AbortError"!==e.name&&eh.oR.error("Failed to share bookmark")}else eA()},eA=async()=>{if(!s||!D)return void eh.oR.error("Unable to duplicate bookmark");try{var e,t;console.log("Starting bookmark duplication for:",s.title);let a={title:"".concat(s.title," (Copy)"),url:s.url,description:s.description||"",folder_id:(null==(e=s.folder)?void 0:e.id)||null,favicon_url:s.favicon_url||null,is_favorite:!1,is_archived:!1};console.log("Duplicate data prepared:",a);let r=(null==(t=s.tags)?void 0:t.map(e=>e.id).filter(Boolean))||[];console.log("Tag IDs to duplicate:",r);let i=await fetch("/api/bookmarks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,tagIds:r})});if(!i.ok){let e=await i.json();throw Error(e.error||"Failed to create bookmark")}let o=await i.json();console.log("New bookmark created:",o.id);let l=new em.U(D.id),n=await l.getBookmark(o.id);console.log("Complete bookmark fetched:",n),n&&$?(console.log("Calling onBookmarkCreated callback"),$(n),B()):console.warn("onBookmarkCreated callback not available or bookmark incomplete"),eh.oR.success("\uD83D\uDCCB Bookmark duplicated successfully!")}catch(t){console.error("Failed to duplicate bookmark:",t);let e=t instanceof Error?t.message:"Unknown error occurred";eh.oR.error("Failed to duplicate bookmark: ".concat(e))}},eS=e=>{try{let t=new URL(e).hostname;if("localhost"===t||t.includes("127.0.0.1")||t.includes("192.168."))return null;return"https://www.google.com/s2/favicons?domain=".concat(t,"&sz=32")}catch(e){return null}},eR=e=>{if(e&&e.type.startsWith("image/")){let t=new FileReader;t.onload=e=>{var t;let a=null==(t=e.target)?void 0:t.result;eb(a),s&&U({...s,preview_image:a})},t.readAsDataURL(e)}},ez=()=>{eb(null)};if(!s)return null;let eE=[{id:"overview",label:"Overview",icon:m.A},{id:"timer",label:"Timer",icon:u.A},{id:"notifications",label:"Notifications",icon:h.A},{id:"reminders",label:"Reminders",icon:x.A},{id:"related",label:"Related",icon:g.A},{id:"documents",label:"Documents",icon:p.A},{id:"progress",label:"Progress",icon:f.A}];return(0,a.jsx)(i.lG,{open:P,onOpenChange:B,children:(0,a.jsxs)(i.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(i.c7,{className:"sr-only",children:(0,a.jsx)(i.L3,{children:s.title})}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden flex-shrink-0",children:[eS(s.url)?(0,a.jsx)("img",{src:eS(s.url)||"",alt:"Site favicon",className:"w-6 h-6 object-contain",onError:e=>{var t;let s=e.target;s.style.display="none",null==(t=s.nextElementSibling)||t.classList.remove("hidden")}}):null,(0,a.jsx)(b.A,{className:"w-5 h-5 text-gray-500 ".concat(eS(s.url)?"hidden":"")})]}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:s.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s.url})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",onClick:eC,className:"p-2 ".concat(s.is_favorite?"text-red-500 border-red-200":""),children:(0,a.jsx)(k.A,{className:"h-4 w-4 ".concat(s.is_favorite?"fill-current":"")})}),(0,a.jsx)(o.$,{variant:"outline",size:"sm",onClick:e_,className:"p-2",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{variant:"outline",size:"sm",onClick:eA,className:"p-2",title:"Duplicate Bookmark",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsxs)(o.$,{onClick:()=>window.open(s.url,"_blank"),className:"px-4 py-2",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Visit Site"]})]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("nav",{className:"flex space-x-1 overflow-x-auto",children:eE.map(e=>{let{id:t,label:s,icon:r}=e;return(0,a.jsxs)("button",{onClick:()=>L(t),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap ".concat(M===t?"bg-blue-50 text-blue-600 border-b-2 border-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,a.jsx)(r,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:s})]},t)})})}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===M&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Analytics & Performance"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:s.visit_count||45}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Total Visits"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"+12% from last week"})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-2",children:"2h 30m"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Time Spent"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average 3m per visit"})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:"45"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-purple-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"This Week"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Most active day: Mon"})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"98%"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-orange-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Uptime"})]}),(0,a.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Site Health: Excellent"})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"relative w-full h-48 rounded-lg flex items-center justify-center border-2 border-dashed transition-all cursor-pointer group ".concat(ek?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":ef?"border-gray-200 dark:border-gray-700":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 hover:border-gray-400 dark:hover:border-gray-500"),onDrop:e=>{e.preventDefault(),ev(!1);let t=e.dataTransfer.files[0];t&&eR(t)},onDragOver:e=>{e.preventDefault(),ev(!0)},onDragLeave:e=>{e.preventDefault(),ev(!1)},onClick:()=>{var e;return null==(e=document.getElementById("preview-upload"))?void 0:e.click()},children:[ef?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:ef,alt:"Bookmark preview",className:"w-full h-full object-cover rounded-lg"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),ez()},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(w.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)(C.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"Change Image"})]})})]}):(0,a.jsx)("div",{className:"text-center",children:ek?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{className:"h-12 w-12 text-blue-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Drop image here"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-2 group-hover:text-gray-500"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300",children:"Click or drag to upload"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]})}),(0,a.jsx)("input",{id:"preview-upload",type:"file",accept:"image/*",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&eR(s)},className:"hidden"})]})}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(d.J,{className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>es?eN():ea(!0),children:es?(0,a.jsx)(_.A,{className:"h-4 w-4"}):(0,a.jsx)(A.A,{className:"h-4 w-4"})})]}),es?(0,a.jsx)(c.T,{value:er,onChange:e=>eo(e.target.value),placeholder:"Add a description for this bookmark...",className:"min-h-[80px] resize-none",onBlur:eN}):(0,a.jsx)("div",{className:"min-h-[80px] p-3 border rounded-md bg-gray-50 dark:bg-gray-800 cursor-pointer",onClick:()=>ea(!0),children:(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:er||"Click to add a description..."})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{className:"text-sm font-medium mb-2 block",children:"Tags"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(l.E,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:"code"}),(0,a.jsx)(l.E,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:"git"}),(0,a.jsx)(l.E,{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",children:"collaboration"}),(0,a.jsx)(l.E,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:"open-source"}),null==(t=s.tags)?void 0:t.map(e=>(0,a.jsx)(l.E,{variant:"secondary",style:{backgroundColor:(e.color||"#6366f1")+"20",color:e.color||"#6366f1"},children:e.name},e.id)),(0,a.jsx)(o.$,{variant:"outline",size:"sm",className:"h-6 px-2",onClick:()=>eh.oR.info("Tag management coming soon!"),title:"Add new tag",children:(0,a.jsx)(S.A,{className:"h-3 w-3"})})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{className:"text-lg font-semibold",children:"Notes & Documentation"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Rich text notes with full formatting support"})]}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>eg?ew():ep(!0),className:"flex items-center gap-2",children:eg?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.A,{className:"h-4 w-4"}),"Save"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),"Edit"]})})]}),eg?(0,a.jsx)(ei,{content:el,onChange:ex,placeholder:"Start writing your notes... Use the toolbar above for rich formatting including headings, lists, text alignment, and more.",className:"min-h-[350px]"}):(0,a.jsx)("div",{className:"min-h-[250px] p-6 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800 cursor-pointer prose prose-sm dark:prose-invert max-w-none hover:border-gray-300 dark:hover:border-gray-600 transition-colors",onClick:()=>ep(!0),dangerouslySetInnerHTML:{__html:el||'<div class="text-center text-gray-500 dark:text-gray-400 py-8"><p class="text-lg mb-2">\uD83D\uDCDD Click to add notes</p><p class="text-sm">Use rich text formatting to organize your thoughts, add documentation, or create detailed annotations for this bookmark.</p></div>'}})]}),(0,a.jsx)("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsx)(o.$,{variant:"outline",onClick:B,children:"Close"})})]}),"timer"===M&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Focus Timer"}),(0,a.jsx)(n.Zp,{className:"mb-6",children:(0,a.jsxs)(n.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsxs)("div",{className:"w-10 h-10 flex items-center justify-center bg-blue-100 dark:bg-blue-900/20 rounded-lg overflow-hidden flex-shrink-0",children:[eS(s.url)?(0,a.jsx)("img",{src:eS(s.url)||"",alt:"Site favicon",className:"w-6 h-6 object-contain",onError:e=>{var t;let s=e.target;s.style.display="none",null==(t=s.nextElementSibling)||t.classList.remove("hidden")}}):null,(0,a.jsx)(b.A,{className:"w-5 h-5 text-blue-500 ".concat(eS(s.url)?"hidden":"")})]}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["Focus on: ",s.title]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Start a Pomodoro session for this bookmark"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)(o.$,{onClick:()=>{localStorage.setItem("pomodoroBookmarkContext",JSON.stringify({id:s.id,title:s.title,url:s.url,favicon:eS(s.url)})),window.open("/timer","_blank")},className:"w-full",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Start 25min Focus"]}),(0,a.jsxs)(o.$,{variant:"outline",onClick:()=>{localStorage.setItem("pomodoroBookmarkContext",JSON.stringify({id:s.id,title:s.title,url:s.url,favicon:eS(s.url)})),B(),window.location.href="/timer"},className:"w-full",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Go to Timer Page"]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Quick timer (enhanced mode):"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Task"}),(0,a.jsxs)("select",{className:"w-full text-xs p-1.5 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:V,onChange:e=>G(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select task..."}),(0,a.jsx)("option",{value:"bookmark-focus",children:"Focus on bookmark"}),(0,a.jsx)("option",{value:"reading",children:"Reading session"}),(0,a.jsx)("option",{value:"research",children:"Research time"}),(0,a.jsx)("option",{value:"learning",children:"Learning session"}),(0,a.jsx)("option",{value:"review",children:"Content review"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"List"}),(0,a.jsxs)("select",{className:"w-full text-xs p-1.5 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:Q,onChange:e=>X(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"No list"}),(0,a.jsx)("option",{value:"work",children:"Work tasks"}),(0,a.jsx)("option",{value:"personal",children:"Personal"}),(0,a.jsx)("option",{value:"learning",children:"Learning"}),(0,a.jsx)("option",{value:"urgent",children:"Urgent"}),(0,a.jsx)("option",{value:"someday",children:"Someday/Maybe"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Minutes"}),(0,a.jsxs)("select",{className:"w-full text-xs p-1.5 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:Y,onChange:e=>{let t=parseInt(e.target.value);K(t),q(60*t),et(60*t)},children:[(0,a.jsx)("option",{value:"5",children:"5 min"}),(0,a.jsx)("option",{value:"10",children:"10 min"}),(0,a.jsx)("option",{value:"15",children:"15 min"}),(0,a.jsx)("option",{value:"20",children:"20 min"}),(0,a.jsx)("option",{value:"25",children:"25 min"}),(0,a.jsx)("option",{value:"30",children:"30 min"}),(0,a.jsx)("option",{value:"45",children:"45 min"}),(0,a.jsx)("option",{value:"60",children:"60 min"})]})]})]}),V&&(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded p-2 mb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-blue-700 dark:text-blue-300",children:"bookmark-focus"===V?"Focus: ".concat(s.title):V.charAt(0).toUpperCase()+V.slice(1).replace("-"," ")}),Q&&(0,a.jsx)("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-800 px-1.5 py-0.5 rounded",children:Q})]})}),(0,a.jsx)("div",{className:"text-3xl font-mono font-bold text-gray-700 dark:text-gray-300 mb-3 text-center",children:(e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))})(O)}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mb-4",children:(0,a.jsx)("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(Z,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,a.jsxs)(o.$,{size:"sm",onClick:()=>{W(!0),eh.oR.success("\uD83C\uDFAF Focus timer started! Stay focused!")},disabled:J||0===O,variant:"outline",children:[(0,a.jsx)(R.A,{className:"h-3 w-3 mr-1"}),"Start"]}),(0,a.jsxs)(o.$,{size:"sm",variant:"outline",onClick:()=>{W(!1),eh.oR.info("⏸️ Timer paused")},disabled:!J,children:[(0,a.jsx)(z.A,{className:"h-3 w-3 mr-1"}),"Pause"]}),(0,a.jsxs)(o.$,{size:"sm",variant:"outline",onClick:()=>{W(!1),q(60*Y),et(60*Y),H(0),eh.oR.info("\uD83D\uDD04 Timer reset to ".concat(Y," minutes"))},children:[(0,a.jsx)(E.A,{className:"h-3 w-3 mr-1"}),"Reset"]})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-1 mt-2",children:[(0,a.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>{K(5),q(300),et(300)},className:"text-xs px-2 py-1",children:"5m"}),(0,a.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>{K(15),q(900),et(900)},className:"text-xs px-2 py-1",children:"15m"}),(0,a.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>{K(25),q(1500),et(1500)},className:"text-xs px-2 py-1",children:"25m"})]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2",children:"Comprehensive Timer"}),(0,a.jsxs)("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[(0,a.jsx)("li",{children:"• Full Pomodoro cycles"}),(0,a.jsx)("li",{children:"• Task management"}),(0,a.jsx)("li",{children:"• Progress tracking"}),(0,a.jsx)("li",{children:"• Statistics"})]})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-green-600 dark:text-green-400 mb-2",children:"Quick Timer"}),(0,a.jsxs)("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[(0,a.jsx)("li",{children:"• Simple 25min timer"}),(0,a.jsx)("li",{children:"• In-modal convenience"}),(0,a.jsx)("li",{children:"• No setup required"}),(0,a.jsx)("li",{children:"• Basic notifications"})]})]})})]})]})}),"notifications"===M&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Notification System"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Comprehensive notification management"})]})]}),(0,a.jsx)(en,{height:"600px"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2",children:"Quick Setup"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(o.$,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{window.open("/notifications-test","_blank","width=800,height=600")},children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Open Full Notification Center"]}),(0,a.jsxs)(o.$,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{"Notification"in window?"default"===Notification.permission?Notification.requestPermission().then(e=>{eh.oR.success("granted"===e?"Notifications enabled!":"Notifications not enabled")}):eh.oR.info("Notifications are ".concat(Notification.permission)):eh.oR.error("Notifications not supported in this browser")},children:[(0,a.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Configure Browser Notifications"]})]})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4",children:[(0,a.jsx)("h5",{className:"font-semibold text-green-600 dark:text-green-400 mb-2",children:"Features Available"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,a.jsx)("li",{children:"• Toast notifications (success, error, warning, info)"}),(0,a.jsx)("li",{children:"• Priority levels (low, medium, high, urgent)"}),(0,a.jsx)("li",{children:"• Browser notifications support"}),(0,a.jsx)("li",{children:"• Audio alerts with volume control"}),(0,a.jsx)("li",{children:"• Notification center with history"}),(0,a.jsx)("li",{children:"• Filtering and search capabilities"}),(0,a.jsx)("li",{children:"• Persistent storage"}),(0,a.jsx)("li",{children:"• Customizable settings"})]})]})})]})]}),"reminders"===M&&(0,a.jsx)(ec.ReminderManager,{bookmarkId:s.id,bookmarkTitle:s.title}),"related"===M&&s&&(0,a.jsx)(ed.$,{targetBookmark:s,allBookmarks:ej,onBookmarkVisit:e=>{window.open(e.url,"_blank"),eh.oR.success("Opened ".concat(e.title))},onBookmarkViewDetails:e=>{B(),eh.oR.info("Viewing details for ".concat(e.title))}}),"documents"===M&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Documents & Notes"}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4",children:[(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center py-8",children:"Create and attach documents, notes, and annotations for this bookmark."}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)(o.$,{onClick:()=>eh.oR.info("Document management feature coming soon!"),children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Add Document"]})})]})})]}),"progress"===M&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Learning Progress"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:s.visit_count||0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Visits"})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-2",children:"0"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Study Sessions"})]})}),(0,a.jsx)(n.Zp,{children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2",children:"0h"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time Spent"})]})})]})]})]})]})})}},54165:(e,t,s)=>{s.d(t,{Cf:()=>u,Es:()=>x,L3:()=>g,c7:()=>h,lG:()=>n,rr:()=>p,zM:()=>c});var a=s(95155),r=s(12115),i=s(15452),o=s(54416),l=s(59434);let n=i.bL,c=i.l9,d=i.ZL;i.bm;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=i.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(i.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});g.displayName=i.hE.displayName;let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(i.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});p.displayName=i.VY.displayName},55604:(e,t,s)=>{s.d(t,{U:()=>l});var a=s(34060);s(49509);let r="https://bpmixidxyljfvenukcun.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwbWl4aWR4eWxqZnZlbnVrY3VuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4ODAwMjIsImV4cCI6MjA2NDQ1NjAyMn0.JmyZhvuPfJlzQ9PPEclEc7mKBd55zCEM61nci7fjazc";(0,a.UU)(r,i,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}});var o=s(11342);class l{async getBookmarks(e){console.log("Fetching bookmarks for user:",this.userId);let t=this.supabase.from("bookmarks").select("\n        *,\n        folder:folders(*),\n        tags:bookmark_tags(tag:tags(*))\n      ").eq("user_id",this.userId).order("created_at",{ascending:!1});(null==e?void 0:e.folderId)&&(t=t.eq("folder_id",e.folderId)),(null==e?void 0:e.isArchived)!==void 0&&(t=t.eq("is_archived",e.isArchived)),(null==e?void 0:e.isFavorite)!==void 0&&(t=t.eq("is_favorite",e.isFavorite)),(null==e?void 0:e.limit)&&(t=t.limit(e.limit)),(null==e?void 0:e.offset)&&(t=t.range(e.offset,e.offset+(e.limit||10)-1));let{data:s,error:a}=await t;if(a)throw console.error("Error fetching bookmarks:",a),Error("Failed to fetch bookmarks: ".concat(a.message));return console.log("Found ".concat((null==s?void 0:s.length)||0," bookmarks for user")),(null==s?void 0:s.map(e=>{var t;return{...e,tags:(null==(t=e.tags)?void 0:t.map(e=>e.tag).filter(Boolean))||[]}}))||[]}async getBookmark(e){var t;console.log("Fetching bookmark:",e,"for user:",this.userId);let{data:s,error:a}=await this.supabase.from("bookmarks").select("\n        *,\n        folder:folders(*),\n        tags:bookmark_tags(tag:tags(*))\n      ").eq("id",e).eq("user_id",this.userId).single();if(a){if("PGRST116"===a.code)return console.log("Bookmark not found:",e),null;throw console.error("Error fetching bookmark:",a),Error("Failed to fetch bookmark: ".concat(a.message))}return console.log("Successfully fetched bookmark:",e),{...s,tags:(null==(t=s.tags)?void 0:t.map(e=>e.tag).filter(Boolean))||[]}}async createBookmark(e,t){console.log("Creating bookmark for user:",this.userId);let s={...e,user_id:this.userId,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from("bookmarks").insert(s).select().single();if(r)throw console.error("Error creating bookmark:",r),Error("Failed to create bookmark: ".concat(r.message));return console.log("Successfully created bookmark:",a.id),t&&t.length>0&&await this.addTagsToBookmark(a.id,t),a}async updateBookmark(e,t){console.log("Updating bookmark:",e,"for user:",this.userId);let s={...t,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from("bookmarks").update(s).eq("id",e).eq("user_id",this.userId).select().single();if(r)throw console.error("Error updating bookmark:",r),Error("Failed to update bookmark: ".concat(r.message));return console.log("Successfully updated bookmark:",e),a}async deleteBookmark(e){console.log("Deleting bookmark:",e,"for user:",this.userId);let{error:t}=await this.supabase.from("bookmarks").delete().eq("id",e).eq("user_id",this.userId);if(t)throw console.error("Error deleting bookmark:",t),Error("Failed to delete bookmark: ".concat(t.message));console.log("Successfully deleted bookmark:",e)}async addTagsToBookmark(e,t){let s=t.map(t=>({bookmark_id:e,tag_id:t})),{error:a}=await this.supabase.from("bookmark_tags").insert(s);if(a)throw Error("Failed to add tags to bookmark: ".concat(a.message))}async removeTagsFromBookmark(e,t){let s=this.supabase.from("bookmark_tags").delete().eq("bookmark_id",e);t&&(s=s.in("tag_id",t));let{error:a}=await s;if(a)throw Error("Failed to remove tags from bookmark: ".concat(a.message))}async searchBookmarks(e){let{data:t,error:s}=await this.supabase.from("bookmarks").select("\n        *,\n        folder:folders(*),\n        tags:bookmark_tags(tag:tags(*))\n      ").eq("user_id",this.userId).or("title.ilike.%".concat(e,"%,description.ilike.%").concat(e,"%,url.ilike.%").concat(e,"%")).order("created_at",{ascending:!1});if(s)throw Error("Failed to search bookmarks: ".concat(s.message));return(null==t?void 0:t.map(e=>{var t;return{...e,tags:(null==(t=e.tags)?void 0:t.map(e=>e.tag).filter(Boolean))||[]}}))||[]}async toggleFavorite(e){let t=await this.getBookmark(e);if(!t)throw Error("Bookmark not found");return this.updateBookmark(e,{is_favorite:!t.is_favorite})}async toggleArchive(e){let t=await this.getBookmark(e);if(!t)throw Error("Bookmark not found");return this.updateBookmark(e,{is_archived:!t.is_archived})}async bulkUpdate(e,t){let{error:s}=await this.supabase.from("bookmarks").update(t).in("id",e).eq("user_id",this.userId);if(s)throw Error("Failed to bulk update bookmarks: ".concat(s.message))}async bulkDelete(e){let{error:t}=await this.supabase.from("bookmarks").delete().in("id",e).eq("user_id",this.userId);if(t)throw Error("Failed to bulk delete bookmarks: ".concat(t.message))}constructor(e){var t;this.originalUserId=e,this.userId=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)?e:(0,o.Ay)(e,"6ba7b810-9dad-11d1-80b4-00c04fd430c8")}(e);this.supabase=(t=this.userId,(0,a.UU)(r,i,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1},global:{headers:{"x-user-id":t}}})),console.log("BookmarkService initialized for user:",{original:this.originalUserId,normalized:this.userId,environment:"client"})}}},58257:(e,t,s)=>{s.d(t,{H:()=>m});var a=s(95155),r=s(12115),i=s(30285),o=s(62523),l=s(85057),n=s(88539),c=s(59409),d=s(56671);function m(e){let{bookmark:t,folders:s,onSubmit:m,onCancel:u}=e,[h,x]=(0,r.useState)({title:(null==t?void 0:t.title)||"",url:(null==t?void 0:t.url)||"",description:(null==t?void 0:t.description)||"",folder_id:(null==t?void 0:t.folder_id)||"no-folder"}),[g,p]=(0,r.useState)(!1),f=async e=>{try{return new URL(e),{title:e,description:"",favicon_url:""}}catch(e){return null}},b=async e=>{e.preventDefault(),p(!0);try{if(!h.url)return void d.oR.error("URL is required");let e=null;t||(e=await f(h.url));let s={title:h.title.trim()||(null==e?void 0:e.title)||h.url,url:h.url,description:h.description.trim(),folder_id:h.folder_id&&"no-folder"!==h.folder_id?h.folder_id:null,favicon_url:(null==e?void 0:e.favicon_url)||null};if(t){let e={...t,...s};m(e)}else{let e={id:Date.now().toString(),...s,user_id:"",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_visited_at:null,visit_count:0,is_favorite:!1,is_archived:!1,screenshot_url:null,folder:null,tags:[]};m(e)}d.oR.success(t?"Bookmark updated":"Bookmark created")}catch(e){console.error("Error saving bookmark:",e),d.oR.error("Failed to save bookmark")}finally{p(!1)}};return(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.J,{htmlFor:"url",children:"URL"}),(0,a.jsx)(o.p,{id:"url",type:"url",value:h.url,onChange:e=>x(t=>({...t,url:e.target.value})),placeholder:"https://example.com",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.J,{htmlFor:"title",children:"Title"}),(0,a.jsx)(o.p,{id:"title",value:h.title,onChange:e=>x(t=>({...t,title:e.target.value})),placeholder:"Bookmark title"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(n.T,{id:"description",value:h.description,onChange:e=>x(t=>({...t,description:e.target.value})),placeholder:"Optional description",rows:3})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.J,{htmlFor:"folder",children:"Folder"}),(0,a.jsxs)(c.l6,{value:h.folder_id,onValueChange:e=>x(t=>({...t,folder_id:e})),children:[(0,a.jsx)(c.bq,{children:(0,a.jsx)(c.yv,{placeholder:"Select a folder"})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"no-folder",children:"No folder"}),s.map(e=>(0,a.jsx)(c.eb,{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.$,{type:"submit",disabled:g,children:g?"Saving...":t?"Update":"Create"}),(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:u,children:"Cancel"})]})]})}}}]);